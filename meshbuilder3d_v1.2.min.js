function showOWtable(){for(document.getElementById("panel8").style.display="none",document.getElementById("panelContentSCREEN").style.display="none",document.getElementById("canvas2").style.display="none",document.getElementById("openingTitle").style.display="block",owTable=document.getElementById("tableOW"),owTable.innerHTML='<div id="colow1" class="colow"></div>',M=Math.ceil(openingtable.length/10),k=1,o=1,ocount=0,i=0;i<openingtable.length;i++)Math.floor(openingtable[i][0])>=5*k?(k+=1,ocount>M?(o+=1,ocount=0,owTable.innerHTML+='<div id="colow'+o+'" class="colow"></div>'):ocount+=1):ocount+=1,document.getElementById("colow"+o).innerHTML+='<div id="pickValue" onClick="pickOW('+openingtable[i][0]+');">'+openingtable[i][0]+"</div>";document.getElementById("tableOW").style.display="block",document.getElementById("tableOW").offsetWidth>CANVAS_WIDTH-60&&"block"==document.getElementById("tableOW").style.display?scaleOpeningTable=(CANVAS_WIDTH-60)/document.getElementById("tableOW").offsetWidth:scaleOpeningTable=1,document.getElementById("tableOW").style.transform="scale("+scaleOpeningTable+")",document.getElementById("tableOW").style.transformOrigin="0 0"}function showOLtable(){for(document.getElementById("panel8").style.display="none",document.getElementById("panelContentSCREEN").style.display="none",document.getElementById("canvas2").style.display="none",document.getElementById("openingTitle").style.display="block",olTable=document.getElementById("tableOL"),olTable.innerHTML='<div id="colol1" class="colow"></div>',M=Math.ceil(olALLOWED.length/10),k=1,o=1,ocount=0,i=0;i<olALLOWED.length;i++)olALLOWED[i]>=5*k?(k+=1,ocount>M?(o+=1,ocount=0,olTable.innerHTML+='<div id="colol'+o+'" class="colow"></div>'):ocount+=1):ocount+=1,1==loadSCREENTYPE&&1==olEXTENDED[i]?document.getElementById("colol"+o).innerHTML+='<div id="pickValue" onClick="pickOL('+olALLOWED[i]+');"><font color="#FFAAAA">'+olALLOWED[i]+"</font></div>":2==loadSCREENTYPE?document.getElementById("colol"+o).innerHTML+='<div id="pickValue" onClick="pickOL('+olALLOWED[i]+');">'+5*Math.ceil(olALLOWED[i]/5)+"</div>":document.getElementById("colol"+o).innerHTML+='<div id="pickValue" onClick="pickOL('+olALLOWED[i]+');">'+olALLOWED[i]+"</div>";document.getElementById("tableOL").style.display="block",document.getElementById("tableOL").offsetWidth>CANVAS_WIDTH-60&&"block"==document.getElementById("tableOL").style.display?scaleOpeningTable=(CANVAS_WIDTH-60)/document.getElementById("tableOL").offsetWidth:scaleOpeningTable=1,document.getElementById("tableOL").style.transform="scale("+scaleOpeningTable+")",document.getElementById("tableOL").style.transformOrigin="0 0"}function showFItable(){for(document.getElementById("panel8").style.display="none",document.getElementById("panelContentSCREEN").style.display="none",document.getElementById("canvas2").style.display="none",document.getElementById("diameterTitle").style.display="block",fiTable=document.getElementById("tableFI"),fiTable.innerHTML='<div id="colfi1" class="colow"></div>',M=Math.ceil(fiALLOWED.length/10),k=1,o=1,ocount=0,i=0;i<fiALLOWED.length;i++)fiALLOWED[i]>=5*k?(k+=1,ocount>M?(o+=1,ocount=0,fiTable.innerHTML+='<div id="colfi'+o+'" class="colow"></div>'):ocount+=1):ocount+=1,standardDIA==fiALLOWED[i]?document.getElementById("colfi"+o).innerHTML+='<div id="pickValue" onClick="pickFI('+fiALLOWED[i]+');"><font color="#AAFFAA">'+fiALLOWED[i]+"</font></div>":1!=loadSCREENTYPE&&2!=loadSCREENTYPE||1!=fiEXTENDED[i]?document.getElementById("colfi"+o).innerHTML+='<div id="pickValue" onClick="pickFI('+fiALLOWED[i]+');">'+fiALLOWED[i]+"</div>":document.getElementById("colfi"+o).innerHTML+='<div id="pickValue" onClick="pickFI('+fiALLOWED[i]+');"><font color="#FFAAAA">'+fiALLOWED[i]+"</font></div>";document.getElementById("tableFI").style.display="block",document.getElementById("tableFI").offsetWidth>CANVAS_WIDTH-60&&"block"==document.getElementById("tableFI").style.display?scaleOpeningTable=(CANVAS_WIDTH-60)/document.getElementById("tableFI").offsetWidth:scaleOpeningTable=1,document.getElementById("tableFI").style.transform="scale("+scaleOpeningTable+")",document.getElementById("tableFI").style.transformOrigin="0 0"}function setHookType(e){1==hookchart?loadHOOKTYPE=e:loadHOOKTYPER=e,pickedOL=1,pickedFI=1,reloadScreen(),panel.style.display="none",1==hookchart?showView(3):showView(4)}function setMountType(e){pickedOL=1,pickedFI=1,loadMOUNTTYPE=e,reloadScreen(),showPanel(4),showView(5)}function switchFlip(){pickedOL=1,pickedFI=1,1==loadFLIPY?loadFLIPY=-1:loadFLIPY=1,reloadScreen(),showPanel(4),showView(5)}function dfChange(e){pickedOL=1,pickedFI=1,0==e?(0==loadDOUBLEFOLD?loadDOUBLEFOLD=1:loadDOUBLEFOLD=0,reloadScreen(),showView(3)):(0==loadDOUBLEFOLDR?loadDOUBLEFOLDR=1:loadDOUBLEFOLDR=0,reloadScreen(),showView(4))}function setSquare(){pickedOL=1,pickedFI=1,0==loadSQUARE?loadSQUARE=1:loadSQUARE=0,reloadScreen(),showView(8)}function setRotate(){pickedOL=1,pickedFI=1,1!=loadSCREENTYPE&&3!=loadSCREENTYPE&&7!=loadSCREENTYPE||(tempOW=loadOW,loadOW=loadOL,loadOL=tempOW,loadPERPAR=0),2==loadSCREENTYPE&&(0==loadPERPAR?loadPERPAR=1:loadPERPAR=0),reloadScreen()}function setWireMaterial(e){loadWIREMATERIAL=e,0==e?materialWire.color.setHex(wireColor):materialWire.color.setHex(wireColorS),screenName(),rememberScreen(),showPanel(8)}function setHookSheets(e){pickedOL=1,pickedFI=1,loadHOOKSHEETS=e,reloadScreen(),showPanel(4)}function setHooksMaterial(e){0==loadHOOKSHEETS?(loadHOOKSMATERIAL=e,0==e?(hookColor="0x446678",materialHook.color.setHex(hookColor)):(hookColor="0x88AAAA",materialHook.color.setHex(hookColor))):(loadHOOKSMATERIAL=0,hookColor="0x446678",materialHook.color.setHex(hookColor)),screenName(),rememberScreen(),showPanel(4)}function closePanel(e){showSummary=0,0==loadVIEW&&(document.getElementById("closePanelSelSup").style.pointerEvents="auto",tempSUPPORTS=[],0==e?(loadBackup(),noDims=0,cancelLOAD=1,reloadScreen()):(1==noDims&&(dimsLines(),interArrayCreate(),noDims=0),0==loadHOOKTYPE&&0==drawingMode&&(meshHookArrayL[0].material.opacity=0),0==loadHOOKTYPER&&0==drawingMode&&(meshHookArrayR[0].material.opacity=0)),document.getElementById("tableOW").style.display="none",8==panelNumber?(panelNumber=0,showScreenPanel(0)):panelNumber=0,showPanel(0))}function closePanelHookSel(e){0==e&&loadBackup2(),document.getElementById("panelhookselect").style.display="none",panel.style.display="block",1==hookchart?(hookchart=0,showView(3)):(hookchart=0,showView(4))}function switchFeed(){pickedOL=1,pickedFI=1,1==loadFEED?loadFEED=0:loadFEED=1,reloadScreen()}function pickOW(e){loadOW=e,document.getElementById("tableOW").style.display="none",document.getElementById("panel8").style.display="block",document.getElementById("panelContentSCREEN").style.display="block",document.getElementById("canvas2").style.display="block",document.getElementById("openingTitle").style.display="none",reloadScreen()}function pickOL(e){loadOL=e,pickedOL=1,pickedFI=1,document.getElementById("tableOL").style.display="none",document.getElementById("panel8").style.display="block",document.getElementById("panelContentSCREEN").style.display="block",document.getElementById("canvas2").style.display="block",document.getElementById("openingTitle").style.display="none",reloadScreen()}function pickFI(e){loadFI=e,pickedFI=1,document.getElementById("tableFI").style.display="none",document.getElementById("panel8").style.display="block",document.getElementById("panelContentSCREEN").style.display="block",document.getElementById("canvas2").style.display="block",document.getElementById("diameterTitle").style.display="none",reloadScreen()}function selectScreen(e){loadVIEW=1,loadSCREENTYPE=e,document.getElementById("tableOW").style.display="none",reloadScreen()}function supportChange(e,o){if(SUPPORTMINIMUM2=SUPPORTMINIMUM,(5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE)&&loadOW>=6&&loadFI>=2&&(SUPPORTMINIMUM2=70),0==supBase){if(tempSum=0,0==tempSUPPORTS.length){for(j=0;j<o;j++)tempSUPPORTS[j]=loadSUPPORTS[j],tempSum+=tempSUPPORTS[j];for(j=o+1;j<loadN;j++)tempSUPPORTS[j]=loadSUPPORTS[j],tempSum+=tempSUPPORTS[j]}else{for(j=0;j<o;j++)tempSum+=tempSUPPORTS[j];for(j=o+1;j<loadN;j++)tempSum+=tempSUPPORTS[j]}for(tempSUPPORTS[o]=Math.round(10*e)/10,tempSum+=tempSUPPORTS[o],tempSUPPORTS[loadN]=loadLS-tempSum,tempSum=0,redCheck=0,j=0;j<=loadN;j++)document.getElementById("supval"+j).value=tempSUPPORTS[j],j==loadN&&tempSUPPORTS[j]>=SUPPORTMINIMUM2?document.getElementById("supval"+j).style.backgroundColor="#AAAAAA":tempSUPPORTS[j]>=SUPPORTMINIMUM2?document.getElementById("supval"+j).style.backgroundColor="#FFFFFF":(document.getElementById("supval"+j).style.backgroundColor="#FF0000",redCheck=1);tempSUPPORTS[loadN]>SUPPORTMINIMUM2?document.getElementById("supval"+loadN).style.backgroundColor="#AAAAAA":document.getElementById("supval"+loadN).style.backgroundColor="#FF0000"}else if(1==supBase){if(tempSum=0,0==tempSUPPORTS.length)for(j=0;j<o;j++)tempSum+=loadSUPPORTS[j];else for(j=0;j<o;j++)tempSum+=tempSUPPORTS[j];if(e<tempSum+SUPPORTMINIMUM2?e=SUPPORTMINIMUM2:e-=tempSum,tempSum=0,0==tempSUPPORTS.length){for(j=0;j<o;j++)tempSUPPORTS[j]=loadSUPPORTS[j],tempSum+=tempSUPPORTS[j];for(j=o+1;j<loadN;j++)tempSUPPORTS[j]=loadSUPPORTS[j],tempSum+=tempSUPPORTS[j]}else{for(j=0;j<o;j++)tempSum+=tempSUPPORTS[j];for(j=o+1;j<loadN;j++)tempSum+=tempSUPPORTS[j]}for(tempSUPPORTS[o]=Math.round(10*e)/10,tempSum+=tempSUPPORTS[o],loadLS-tempSum>SUPPORTMINIMUM2?tempSUPPORTS[loadN]=loadLS-tempSum:tempSUPPORTS[loadN]=tempSUPPORTS[loadN],tempSum=0,redCheck=0,j=0;j<=loadN;j++)document.getElementById("supval"+j).value=tempSum+tempSUPPORTS[j],tempSum+=tempSUPPORTS[j],tempSum>loadLS-(loadN-j-1)*SUPPORTMINIMUM2?(document.getElementById("supval"+j).style.backgroundColor="#FF0000",redCheck=1):document.getElementById("supval"+j).style.backgroundColor="#FFFFFF";0==redCheck&&(tempSUPPORTS[loadN]>SUPPORTMINIMUM2?document.getElementById("supval"+loadN).style.backgroundColor="#AAAAAA":document.getElementById("supval"+loadN).style.backgroundColor="#FF0000")}else if(2==supBase){if(0==tempSUPPORTS.length)for(j=0;j<=loadN;j++)tempSUPPORTS[j]=loadSUPPORTS[j];for(tempSum=0,j=0;j<o-1;j++)tempSum+=tempSUPPORTS[j];for((e=loadLS-tempSum-e)<SUPPORTMINIMUM2&&(e=SUPPORTMINIMUM2),tempSum=0,redCheck=0,tempSUPPORTS[o-1]=e,document.getElementById("supval0").value=loadLS,document.getElementById("supval0").style.backgroundColor="#AAAAAA",j=1;j<=loadN;j++)tempSum+=tempSUPPORTS[j-1],document.getElementById("supval"+j).value=loadLS-tempSum,tempSum+(loadN-j+1)*SUPPORTMINIMUM2<=loadLS?document.getElementById("supval"+j).style.backgroundColor="#FFFFFF":(document.getElementById("supval"+j).style.backgroundColor="#FF0000",redCheck=1);tempSUPPORTS[loadN]=loadLS-tempSum,tempSUPPORTS[loadN]<SUPPORTMINIMUM2&&(redCheck=1)}if(0==redCheck)for(pickedOL=1,pickedFI=1,loadSUPPORTS=[],loadSUPPORTS=loadSUPPORTS.concat(tempSUPPORTS),reloadScreen(),document.getElementById("closePanelSelSup").style.pointerEvents="auto",document.getElementById("closePanelSelSup").style.opacity=1,j=0;j<=2;j++)document.getElementById("datum"+j).style.pointerEvents="auto",document.getElementById("datum"+j).style.opacity=1;else for(document.getElementById("closePanelSelSup").style.pointerEvents="none",document.getElementById("closePanelSelSup").style.opacity=.3,j=0;j<=2;j++)document.getElementById("datum"+j).style.pointerEvents="none",document.getElementById("datum"+j).style.opacity=.3}function boltChange(e,o){if(tempSum=0,0==tempBOLTS.length){for(j=0;j<o;j++)j!==loadB-1&&(tempBOLTS[j]=loadBOLTS[j],tempSum+=tempBOLTS[j]);for(j=o+1;j<=loadB;j++)j!==loadB-1&&(tempBOLTS[j]=loadBOLTS[j],tempSum+=tempBOLTS[j])}else{for(j=0;j<o;j++)j!==loadB-1&&(tempSum+=tempBOLTS[j]);for(j=o+1;j<=loadB;j++)j!==loadB-1&&(tempSum+=tempBOLTS[j])}for(tempBOLTS[o]=Math.round(10*e)/10,tempSum+=tempBOLTS[o],tempBOLTS[loadB-1]=loadWS-tempSum,tempSum=0,redCheckB=0,j=0;j<=loadB;j++)document.getElementById("bolt"+j).value=tempBOLTS[j],j==loadB-1&&tempBOLTS[j]>=boltEdgeMin?document.getElementById("bolt"+j).style.backgroundColor="#000000":tempBOLTS[j]>=boltEdgeMin?document.getElementById("bolt"+j).style.backgroundColor="transparent":(document.getElementById("bolt"+j).style.backgroundColor="#FF0000",redCheckB=1);tempBOLTS[loadB-1]>boltEdgeMin?document.getElementById("bolt"+(loadB-1)).style.backgroundColor="#000000":document.getElementById("bolt"+(loadB-1)).style.backgroundColor="#FF0000",0==redCheckB?(pickedOL=1,pickedFI=1,loadBOLTS=[],loadBOLTS=loadBOLTS.concat(tempBOLTS),reloadScreen(),document.getElementById("closePanelSelSup2").style.pointerEvents="auto",document.getElementById("closePanelSelSup2").style.opacity=1):(document.getElementById("closePanelSelSup2").style.pointerEvents="none",document.getElementById("closePanelSelSup2").style.opacity=.3)}function reloadOpening(){scene2.remove(sampleOpening),sampleDia=.9*(CANVAS_HEIGHT/2-10-50-20-40-10),sampleDia>CANVAS_WIDTH/4&&(sampleDia=CANVAS_WIDTH/4),sampleDia<200&&(sampleDia=200),sampleDia=Math.round(sampleDia),2==loadSCREENTYPE&&1==loadPERPAR?(document.getElementById("OWselect").style.left=100+sampleDia/2+"px",document.getElementById("OWselect").style.top=CANVAS_HEIGHT-50-10+"px",document.getElementById("OLselect").style.display="block",document.getElementById("OLselect").style.left="30px",document.getElementById("OLselect").style.top=CANVAS_HEIGHT-20-20-40-10-sampleDia/2+"px"):4==loadSCREENTYPE||5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE?(document.getElementById("OLselect").style.display="none",document.getElementById("OWselect").style.left="30px",document.getElementById("OWselect").style.top=CANVAS_HEIGHT-20-20-40-10-sampleDia/2+"px"):(document.getElementById("OWselect").style.left="30px",document.getElementById("OWselect").style.top=CANVAS_HEIGHT-20-20-40-10-sampleDia/2+"px",document.getElementById("OLselect").style.display="block",document.getElementById("OLselect").style.left=90+sampleDia/2+10+"px",document.getElementById("OLselect").style.top=CANVAS_HEIGHT-40-10-10+"px"),document.getElementById("screenPanelBackground").style.width=140+sampleDia+10+230+30+"px",document.getElementById("screenPanelBackground").style.height=160+sampleDia+"px",document.getElementById("screenPanelBackground").style.top=CANVAS_HEIGHT-10-10-sampleDia-10-40-10-70-20+"px",document.getElementById("screenPanelBackground").style.left="10px",document.getElementById("screenPanelTitle").style.width=140+sampleDia+10+230+30+"px",document.getElementById("screenPanelTitle").style.top=CANVAS_HEIGHT-10-10-10-10-40-(sampleDia+70+20)*scaleScreenMenu+"px",document.getElementById("screenpanelVisual").style.top="0px",document.getElementById("screenPanelTitle").style.left="10px",document.getElementById("sampleBackground").style.width=sampleDia*scaleScreenMenu+"px",document.getElementById("sampleBackground").style.height=sampleDia*scaleScreenMenu+"px",document.getElementById("sampleBackground").style.top=CANVAS_HEIGHT-(sampleDia+20+40)*scaleScreenMenu-10+"px",document.getElementById("sampleBackground").style.left=160*scaleScreenMenu+"px",1==loadSCREENTYPE||3==loadSCREENTYPE||7==loadSCREENTYPE?(document.getElementById("squareCheck").innerHTML='<img src="ICO/check'+loadSQUARE+'.svg" width="30px" height="30px;"/>',document.getElementById("squareOpening").style.display="block",document.getElementById("squareOpening").style.top=CANVAS_HEIGHT-sampleDia-20-40-10+"px",document.getElementById("squareOpening").style.left=160+sampleDia+30+"px",document.getElementById("wireDetails").style.display="block",document.getElementById("wireDetails").style.top=CANVAS_HEIGHT-sampleDia-20-40-10+40+10+"px",document.getElementById("wireDetails").style.left=160+sampleDia+30+"px"):(document.getElementById("squareOpening").style.display="none",document.getElementById("wireDetails").style.display="block",document.getElementById("wireDetails").style.top=CANVAS_HEIGHT-sampleDia-20-40-10+"px",document.getElementById("wireDetails").style.left=160+sampleDia+30+"px"),document.getElementById("diameterValue").innerHTML="&#8709; "+loadFI+" mm",0==wirematerialALLOWED[1]?(document.getElementById("standardWire").style.backgroundColor="#FFFFFF",document.getElementById("standardWire").style.color="#000000",document.getElementById("stainlessWire").style.backgroundColor="transparent",document.getElementById("stainlessWire").style.color="#999999",document.getElementById("stainlessWire").style.borderColor="#999999",document.getElementById("stainlessWire").style.pointerEvents="none"):(document.getElementById("stainlessWire").style.pointerEvents="auto",document.getElementById("stainlessWire").style.borderColor="#FFFFFF",0==loadWIREMATERIAL?(document.getElementById("standardWire").style.backgroundColor="#FFFFFF",document.getElementById("standardWire").style.color="#000000",document.getElementById("stainlessWire").style.backgroundColor="transparent",document.getElementById("stainlessWire").style.color="#FFFFFF"):(document.getElementById("standardWire").style.backgroundColor="transparent",document.getElementById("standardWire").style.color="#FFFFFF",document.getElementById("stainlessWire").style.backgroundColor="#FFFFFF",document.getElementById("stainlessWire").style.color="#000000")),(1==loadSCREENTYPE||3==loadSCREENTYPE||7==loadSCREENTYPE)&&0==loadSQUARE&&loadOW!=loadOL||2==loadSCREENTYPE?(document.getElementById("rotate90").style.display="block",document.getElementById("rotate90").style.top=CANVAS_HEIGHT-20-50-20+"px",document.getElementById("rotate90").style.left="65px"):document.getElementById("rotate90").style.display="none",OPow=loadOW,OPol=loadOL,OPfi=loadFI,1==loadPERPAR?makeSampleScreen(loadSCREENTYPE,1,1):makeSampleScreen(loadSCREENTYPE,1,0),sampleOpening=sampleGroup,sampleOpening.translateZ(-900),0==loadPERPAR||4==loadSCREENTYPE||5==loadSCREENTYPE||6==loadSCREENTYPE?(sampleOpening.translateY(-CANVAS_HEIGHT/2+10+(sampleDia/2+20+40)*scaleScreenMenu),sampleOpening.translateX(-CANVAS_WIDTH/2+(sampleDia/2+20+120+10+10)*scaleScreenMenu)):(sampleOpening.translateX(-CANVAS_HEIGHT/2+sampleDia/2+20+10+40),sampleOpening.translateY(CANVAS_WIDTH/2-sampleDia/2-20-120-10-10)),sampleOpening.rotateX(Math.PI/2),scene2.add(sampleOpening),1!=loadSCREENTYPE&&3!=loadSCREENTYPE&&7!=loadSCREENTYPE||1!=loadSQUARE?(document.getElementById("OLselect").style.pointerEvents="auto",document.getElementById("OLselect").style.borderColor="#FFFFFF",document.getElementById("OLselect").style.color="#FFFFFF"):(document.getElementById("OLselect").style.pointerEvents="none",document.getElementById("OLselect").style.borderColor="#999999",document.getElementById("OLselect").style.color="#999999"),document.getElementById("screenpanelVisual").style.height=CANVAS_HEIGHT-10+"px",document.getElementById("screenpanelVisual").style.transform="scale("+scaleScreenMenu+")",document.getElementById("screenpanelVisual").style.transformOrigin="0 100%",document.getElementById("screenPanelBackground").style.transform="scale("+scaleScreenMenu+")",document.getElementById("screenPanelBackground").style.transformOrigin="0 100%",document.getElementById("screenPanelTitle").style.transform="scale("+scaleScreenMenu+")",document.getElementById("screenPanelTitle").style.transformOrigin="0 100%"}function showScreenPanel(e){1==e?(document.getElementById("panel8").style.display="block",document.getElementById("panelContentSCREEN").style.display="block",document.getElementById("canvas2").style.display="block",reloadOpening()):(document.getElementById("panel8").style.display="none",document.getElementById("panelContentSCREEN").style.display="none",document.getElementById("canvas2").style.display="none",showPanel(0))}function setEdge(e,o){pickedOL=1,pickedFI=1,9==e?(0==o?loadOVERLAP1=0:1==o?loadOVERLAP1=20:2==o&&(loadOVERLAP1=2),reloadScreen(),showPanel(9)):(0==o?loadOVERLAP2=0:1==o?loadOVERLAP2=20:2==o&&(loadOVERLAP2=2),reloadScreen(),showPanel(10))}function showOverlap(e){for(document.getElementById("panel9").style.display="none",document.getElementById("overlapTitle").style.display="block",ovTable=document.getElementById("tableOV"),ovTable.innerHTML="",overlaptable=[5,10,20,30,40,50,60,70,80,90,100,120,150,160,170,180,200],i=0;i<overlaptable.length;i++)(1==e&&loadOVERLAP2+loadWS+overlaptable[i]<=W2+50||2==e&&loadOVERLAP1+loadWS+overlaptable[i]<=W2+50)&&(ovTable.innerHTML+='<div id="pickOvValue" onClick="pickOV('+overlaptable[i]+',overlapButton);">'+overlaptable[i]+"</div>");ovTable.style.display="block",document.getElementById("overlapTitle").style.transform="scale("+scaleEdgePanel+")",document.getElementById("overlapTitle").style.transformOrigin="0 0",document.getElementById("tableOV").style.transform="scale("+scaleEdgePanel+")",document.getElementById("tableOV").style.transformOrigin="0 0"}function pickOV(e,o){pickedOL=1,pickedFI=1,document.getElementById("overlapTitle").style.display="none",document.getElementById("tableOV").style.display="none",1==o?(loadOVERLAP1=e,reloadScreen(),showPanel(9)):(loadOVERLAP2=e,reloadScreen(),showPanel(10))}function tpuChange(e,o){(-1==o&&loadTPU[e]>=zakresTPU[e][0]+1||1==o&&loadTPU[e]<=zakresTPU[e][1]-1)&&(pickedOL=1,pickedFI=1,loadTPU[e]+=o,reloadScreen())}function pickN(e){for(tempSUPPORTS=[],document.getElementById("panel5").style.display="none",pickedOL=1,pickedFI=1,loadN=e,reloadScreen(),document.getElementById("valuesN").innerHTML="",j=0;j<=10;j++)j>=loadN+1||4==loadSCREENTYPE?(document.getElementById("supval"+j).style.display="none",document.getElementById("tpu"+j).style.display="none"):(document.getElementById("supval"+j).style.display="block",5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE?document.getElementById("tpu"+j).style.display="block":document.getElementById("tpu"+j).style.display="none"),j<=nALLOWED&&(j==loadN?document.getElementById("valuesN").innerHTML+='<div id="pickNvalue" style="background-color: #FFFFFF; color: #000000;">'+j+"</div>":document.getElementById("valuesN").innerHTML+='<div id="pickNvalue" onClick="pickN('+j+');">'+j+"</div>");4==loadSCREENTYPE&&(document.getElementById("panel5").style.display="block")}function setForceSPISPA(e){loadSPISPA=e,document.getElementById("panel5").style.display="none",pickedOL=1,pickedFI=1,reloadScreen(),setSPISPAbuttons()}function convertSPISPA(){0==loadSPISPA?(loadSPISPA=1,0!=hookWidth&&0!=hookRadius&&(4==loadSCREENTYPE?loadLS-=5*RhookSheet+2*RhookWire*RcrimpDivider:0==loadHOOKSHEETS?loadLS-=2*RhookSheet+RhookWire*RcrimpDivider:1==loadHOOKSHEETS?loadLS-=RhookWire*RcrimpDivider:2==loadHOOKSHEETS&&(loadLS-=RhookSheet)),0!=hookWidthR&&0!=hookRadiusR&&(4==loadSCREENTYPE?loadLS-=5*RhookSheetR+2*RhookWireR*RcrimpDivider:0==loadHOOKSHEETS?loadLS-=2*RhookSheetR+RhookWireR*RcrimpDivider:1==loadHOOKSHEETS?loadLS-=RhookWireR*RcrimpDivider:2==loadHOOKSHEETS&&(loadLS-=RhookSheetR))):1==loadSPISPA&&(loadSPISPA=0,0!=hookWidth&&0!=hookRadius&&(4==loadSCREENTYPE?loadLS+=5*RhookSheet+2*RhookWire*RcrimpDivider:0==loadHOOKSHEETS?loadLS+=2*RhookSheet+RhookWire*RcrimpDivider:1==loadHOOKSHEETS?loadLS+=RhookWire*RcrimpDivider:2==loadHOOKSHEETS&&(loadLS+=RhookSheet)),0!=hookWidthR&&0!=hookRadiusR&&(4==loadSCREENTYPE?loadLS+=5*RhookSheetR+2*RhookWireR*RcrimpDivider:0==loadHOOKSHEETS?loadLS+=2*RhookSheetR+RhookWireR*RcrimpDivider:1==loadHOOKSHEETS?loadLS+=RhookWireR*RcrimpDivider:2==loadHOOKSHEETS&&(loadLS+=RhookSheetR))),loadLS=Math.round(loadLS),document.getElementById("dimLS").value=loadLS,pickedOL=1,pickedFI=1,reloadScreen(),setSPISPAbuttons()}function setBase(e){pickedOL=1,pickedFI=1,supBase=e,reloadScreen()}function dimChange(e,o){0==o?(e=e>L2?L2:e<L1?L1:Math.round(e),document.getElementById("dimLS").value=Math.round(e),loadLS=Math.round(e)):(loadOVERLAP1>10?o1=loadOVERLAP1:o1=0,loadOVERLAP2>10?o2=loadOVERLAP2:o2=0,e>W2-o1-o2?(e=e>W2?W2:Math.round(e),o1>0&&(loadOVERLAP1=0),o2>0&&(loadOVERLAP2=0)):e=e<W1?W1:Math.round(e),document.getElementById("dimWS").value=Math.round(e),loadWS=Math.round(e)),pickedOL=1,pickedFI=1,reloadScreen(),showView(7)}function Bchange(e){(e=Math.round(e))<Bmin?e=Bmin:e>Bmax&&(e=Bmax),loadB=e,document.getElementById("closePanelSelSup2").style.pointerEvents="auto",document.getElementById("closePanelSelSup2").style.opacity=1,pickedOL=1,pickedFI=1,reloadScreen()}function BWchange(e){(e=Math.round(e))<100?e=100:e>200&&(e=200),loadBWIDTH=e,document.getElementById("closePanelSelSup2").style.pointerEvents="auto",document.getElementById("closePanelSelSup2").style.opacity=1,pickedOL=1,pickedFI=1,reloadScreen()}function setThread(e){0==e?loadBTHREAD=16:1==e?loadBTHREAD=14:2==e&&(loadBTHREAD=12),document.getElementById("closePanelSelSup2").style.pointerEvents="auto",document.getElementById("closePanelSelSup2").style.opacity=1,pickedOL=1,pickedFI=1,reloadScreen()}function switchStrip(){0==loadSTRIPS?loadSTRIPS=1:loadSTRIPS=0,pickedOL=1,pickedFI=1,reloadScreen()}function getScreenDesc(e){for(langtype=[],langtype[0]=["Sito plecione","Woven wire mesh","Woven wire mesh","Woven wire mesh"],langtype[1]=["Sito szczelinowe","Woven wire slotted opening mesh","Woven wire slotted opening mesh","Woven wire slotted opening mesh"],langtype[2]=["Sito spawane","Welded wire mesh","Welded wire mesh","Welded wire mesh"],langtype[3]=["Sito strunowe","Piano wire mesh","Piano wire mesh","Piano wire mesh"],langtype[4]=["Sito harfowe z drutem prostym","Self cleaning mesh with straigh wire","Self cleaning mesh with straigh wire","Self cleaning mesh with straigh wire"],langtype[5]=["Sito harfowe","Self cleaning mesh","Self cleaning mesh","Self cleaning mesh"],langtype[6]=["Sito plecione jednostronnie płaskie","Flat top woven wire mesh","Flat top woven wire mesh","Flat top woven wire mesh"],langtype[7]=["Sito harfowe zig-zag","Self cleaning mesh zig-zag","Self cleaning mesh zig-zag","Self cleaning mesh zig-zag"],langwiremat=[],langwiremat=["stal nierdzewna ","stainless ","stainless ","stainless "],langwiredia=[],langwiredia=["fi drutu ","wire dia ","wire dia ","wire dia "],langslot=[],langopen=[],langslot=[", szczelina ",", opening ",", opening ",", opening "],langopen=[", oczko ",", opening ",", opening ",", opening "],langdims=[],langdims=[", wymiar ",", dims ",", dims ",", dims "],langsheets=[],langsheets=[" (zaczepy ze stali nierdzewnej)"," (stainless sheets)"," (stainless sheets)"," (stainless sheets)"],langweldsheets=[],langweldsheets=[" (zaczepy spawane)"," (welded hooks)"," (welded hooks)"," (welded hooks)"],langbarehooks=[],langbarehooks=[" (zaczepy bez okuć)"," (bare hooks)"," (bare hooks)"," (bare hooks)"],valn=loadSCREENTYPE,valn<1&&(valn=1),1==valn?(name1=langtype[0][language],loadOW==loadOL?id1="p/":id1="pp/"):2==valn?(name1=langtype[1][language],id1="ps/"):3==valn?(name1=langtype[2][language],id1="a/"):4==valn?(name1=langtype[3][language],id1="s/"):5==valn?(name1=langtype[4][language],id1="hb/"):6==valn?(name1=langtype[5][language],id1="ha/"):7==valn?(name1=langtype[6][language],id1="pt/"):8==valn&&(name1=langtype[7][language],id1="hc/"),2==valn?loadOLX=5*Math.ceil(loadOL/5):loadOLX=loadOL,loadFI==Math.round(loadFI)?loadFIX=loadFI+".0":loadFIX=loadFI,loadFIX,1==loadWIREMATERIAL?(wirem=langwiremat[language],idFi="n"):(wirem="",idFi=""),2==valn?0==loadPERPAR?(name2=langslot[language]+loadOW+"x"+loadOLX+"mm, "+wirem+langwiredia[language]+loadFIX+"mm",id2=loadOW+"x"+loadOLX+"/f"+loadFIX+idFi+"/"):(name2=langslot[language]+loadOLX+"x"+loadOW+"mm, "+wirem+langwiredia[language]+loadFIX+"mm",id2=loadOLX+"x"+loadOW+"/f"+loadFIX+idFi+"/"):1==valn||3==valn|7==valn?(name2=langopen[language]+loadOW+"x"+loadOL+"mm, "+wirem+langwiredia[language]+loadFIX+"mm",id2=loadOW+"x"+loadOL+"/f"+loadFIX+idFi+"/"):4==valn?(name2=langslot[language]+loadOW+"mm, "+wirem+langwiredia[language]+loadFIX+"mm",id2=loadOW+"/f"+loadFIX+idFi+"/"):(name2=langopen[language]+loadOW+"mm, "+wirem+langwiredia[language]+loadFIX+"mm",id2=loadOW+"/f"+loadFIX+idFi+"/"),spName=SPname.toLowerCase(),0!=loadHOOKTYPE&&0!=loadHOOKTYPER?(name3=langdims[language]+SPname+loadLS+"xFL",id3=spName+loadLS+"xfl"):(name3=langdims[language]+loadLS+"x",id3=loadLS+"x"),1==loadOVERLAP1?(fl1="+G",fm="-",ifl1="+g"):2==loadOVERLAP1?(fl1="+Y",fm="-",ifl1="+y"):loadOVERLAP1>=5?(fl1="+"+loadOVERLAP1,fm="-",ifl1=fl1):(fl1="",fm="+",ifl1=fl1),fl2="",ifl2="",1==loadOVERLAP2?(fl2=fm+"G",ifl2=fm+"g"):2==loadOVERLAP2?(fl2=fm+"Y",ifl2=fm+"y"):loadOVERLAP2>=5&&(fl2=fm+loadOVERLAP2,ifl2=fl2),name4=loadWS+fl1+fl2,id4=loadWS+ifl1+ifl2,i=0;i<hookschart.length;i++)hookschart[i][0]==loadHOOKTYPE&&(hookName=hookschart[i][1]),hookschart[i][0]==loadHOOKTYPER&&(hookNameR=hookschart[i][1]);9==loadHOOKTYPE||0==loadHOOKTYPE||9==loadHOOKTYPER||0==loadHOOKTYPER?(mountn="",idMount=""):1==loadMOUNTTYPE?(mountn="/C",idMount="-c"):(mountn="/S",idMount="-s"),0==loadHOOKTYPE&&0==loadHOOKTYPER?(name5="",id5=""):loadHOOKTYPE==loadHOOKTYPER?(name5=" "+hookName,id5="/"+hookName.toLowerCase()):(name5=" "+hookName+"-"+hookNameR,id5="/"+hookName.toLowerCase()+"-"+hookNameR.toLowerCase()),hookm="",idn="",0==loadHOOKSHEETS&&1==loadHOOKSMATERIAL?(hookm=langsheets[language],idn="n"):1==loadHOOKSHEETS?(hookm=langbarehooks[language],idn="z"):2==loadHOOKSHEETS&&(hookm=langweldsheets[language],idn="a"),2==valn&&0==loadPERPAR||5==valn||6==valn||8==valn?id6="/"+loadN:4==valn?(0==loadSTRIPS?idStrip="p":idStrip="r",id6="/"+loadN+idStrip):id6="",name5+=mountn+hookm,id5+=idMount.toLowerCase()+idn,0==loadSCREENTYPE?(ScreenName="Sito przykładowe"+name3+name4+name5,ProductID=id3+id4+id5+id6):(ScreenName=name1+name2+name3+name4+name5,ProductID=id1+id2+id3+id4+id5+id6)}function screenName(){getScreenDesc(),document.getElementById("screenName").innerHTML=ScreenName,1==scaleOpening&&(document.getElementById("screenName").innerHTML+='<br><font style="color: #FF9999; font-size: 12px; line-height: 12px;">screen opening has been scaled for better performance</font>')}function screenName2(){document.getElementById("panel14").style.display="block",getScreenDesc(),document.getElementById("screenName2").innerHTML=ScreenName,document.getElementById("productID").value=ProductID,titleWidth=document.getElementById("screenName2").offsetWidth,titleWidth<660&&(titleWidth=660,document.getElementById("screenName2").style.width="660px"),document.getElementById("screenName2").style.display="inline-block",document.getElementById("productID").style.left="60px",document.getElementById("productID").style.width=titleWidth-10-40+"px",panel14Width=document.getElementById("panel14").offsetWidth,panel14Height=document.getElementById("panel14").offsetHeight,panel14Width>CANVAS_WIDTH-100?scaleSummary=(CANVAS_WIDTH-100)/panel14Width:scaleSummary=1,panel14Height>CANVAS_HEIGHT?scaleSummaryH=CANVAS_HEIGHT/panel14Height:scaleSummaryH=1,scaleSummaryH<scaleSummary&&(scaleSummary=scaleSummaryH),document.getElementById("panel14").style.left=CANVAS_WIDTH/2-panel14Width/2+"px",document.getElementById("panel14").style.top=CANVAS_HEIGHT/2-panel14Height/2+"px",document.getElementById("panel14").style.transform="scale("+scaleSummary+")",document.getElementById("panel14").style.transformOrigin="50% 50%",fillSummary(0,0,0)}function calculateRealDims(){4==loadSCREENTYPE?blacha=1.2:2==loadHOOKSHEETS?blacha=4:1==loadHOOKSHEETS?blacha=0:blacha=1.5,angL=180-hookAngle,angR=180-hookAngleR,4==loadSCREENTYPE?(sheetRealLength=600,leftWireCutdown=(5*blacha+2*loadFI)/2+hookRadius,leftWireLength=2*(2*angL*Math.PI.toFixed(6)*(hookRadius+(5*blacha+2*loadFI)/2)/360+hookHeight+hookWidth),slotFill=0):0==loadHOOKTYPE?(sheetRealLength=0,leftWireCutdown=0,leftWireLength=0,slotFill=0):9==loadHOOKTYPE?(0==loadHOOKSHEETS?sheetRealLength=2*hookEntryWidth+RhookWire*RcrimpDivider:sheetRealLength=hookEntryWidth+RhookWire*RcrimpDivider,0==loadHOOKSHEETS?leftWireCutdown=0:9==loadSCREENTYPE?leftWireCutdown=weldOverlapPlate:leftWireCutdown=hookEntryWidth-weldOverlap,leftWireLength=0,slotFill=0):6==loadHOOKTYPE&&2==loadHOOKSHEETS?(sheetRealLength=hookEntryWidth+RhookWire*RcrimpDivider,9==loadSCREENTYPE?leftWireCutdown=weldOverlapPlate:leftWireCutdown=hookEntryWidth-weldOverlap,leftWireLength=0,slotFill=0):loadHOOKSHEETS<2?(1==loadDOUBLEFOLD?(nosL=hookWidth/2,nosL<20&&(nosL=20),nosL+=360*Math.PI.toFixed(6)*(blacha+RhookWire*RcrimpDivider/2)/360-2*blacha-RhookWire*RcrimpDivider):nosL=0,leftWireCutdown=2*blacha+RhookWire*RcrimpDivider+hookRadius,leftWireLength=2*angL*Math.PI.toFixed(6)*(hookRadius+blacha+RhookWire*RcrimpDivider/2)/360+hookHeight+hookWidth+nosL-blacha,sheetRealLength=2*hookEntryWidth+2*leftWireLength+RhookWire*RcrimpDivider,slotFill=leftWireLength):(9==loadSCREENTYPE?leftWireCutdown=weldOverlapPlate:leftWireCutdown=hookEntryWidth-weldOverlap,leftWireLength=0,sheetRealLength=hookEntryWidth+2*angL*Math.PI.toFixed(6)*(hookRadius+blacha/2)/360+hookWidth+hookHeight,slotFill=0),4==loadSCREENTYPE?(sheetRealLengthR=600,leftWireCutdownR=(5*blacha+2*loadFI)/2+hookRadiusR,leftWireLengthR=2*(2*angR*Math.PI*(hookRadiusR+(5*blacha+2*loadFI)/2)/360+hookHeightR+hookWidthR),slotFill+=0):0==loadHOOKTYPER?(sheetRealLengthR=0,leftWireCutdownR=0,leftWireLengthR=0,slotFill+=0):9==loadHOOKTYPER?(0==loadHOOKSHEETS?sheetRealLengthR=2*hookEntryWidthR+RhookWireR*RcrimpDivider:sheetRealLengthR=hookEntryWidthR+RhookWireR*RcrimpDivider,0==loadHOOKSHEETS?leftWireCutdownR=0:9==loadSCREENTYPE?leftWireCutdownR=weldOverlapPlate:leftWireCutdownR=hookEntryWidthR-weldOverlap,leftWireLengthR=0,slotFill+=0):6==loadHOOKTYPER&&2==loadHOOKSHEETS?(sheetRealLengthR=hookEntryWidthR+RhookWireR*RcrimpDivider,9==loadSCREENTYPE?leftWireCutdownR=weldOverlapPlate:leftWireCutdownR=hookEntryWidthR-weldOverlap,leftWireLengthR=0,slotFill+=0):loadHOOKSHEETS<2?(1==loadDOUBLEFOLDR?(nosR=hookWidthR/2,nosR<20&&(nosR=20),nosR+=360*Math.PI.toFixed(6)*(blacha+RhookWireR*RcrimpDivider/2)/360-2*blacha-RhookWireR*RcrimpDivider):nosR=0,leftWireCutdownR=2*blacha+RhookWireR*RcrimpDivider+hookRadiusR,leftWireLengthR=2*angR*Math.PI.toFixed(6)*(hookRadiusR+blacha+RhookWireR*RcrimpDivider/2)/360+hookHeightR+hookWidthR-blacha+nosR,sheetRealLengthR=2*hookEntryWidthR+2*leftWireLengthR+RhookWireR*RcrimpDivider,slotFill+=leftWireLengthR):(9==loadSCREENTYPE?leftWireCutdownR=weldOverlapPlate:leftWireCutdownR=hookEntryWidthR-weldOverlap,leftWireLengthR=0,sheetRealLengthR=hookEntryWidthR+2*angR*Math.PI.toFixed(6)*(hookRadiusR+blacha/2)/360+hookWidthR+hookHeightR,slotFill+=0),totalWireLength=Math.round(RscreenLength-leftWireCutdown-leftWireCutdownR+leftWireLength+leftWireLengthR),totalHooksLength=Math.round(sheetRealLength+sheetRealLengthR),edgeLength=Math.round(RmeshEdge+RmeshEdgeR-hookEntryWidth-hookEntryWidthR)}function fillSummary(e,o,t){for(quantity=o,supSTRING="",i=0;i<loadSUPPORTS.length;i++)i!=loadSUPPORTS.length-1?supSTRING+=loadSUPPORTS[i]+"^":supSTRING+=loadSUPPORTS[i];for(boltSTRING="",i=0;i<loadBOLTS.length;i++)i!=loadBOLTS.length-1?boltSTRING+=loadBOLTS[i]+"^":boltSTRING+=loadBOLTS[i];if(0==loadTPU.length)tpuSTRING="null";else for(tpuSTRING="",i=0;i<loadTPU.length;i++)i!=loadTPU.length-1?tpuSTRING+=loadTPU[i]+"^":tpuSTRING+=loadTPU[i];for(window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(document.getElementById("screenSummary").innerHTML=xmlhttp.responseText)},control=0,tpuCount=0,i=0;i<loadTPU.length;i++)tpuCount+=loadTPU[i];xmlhttp.open("GET","screenSummary180218.php?LS="+loadLS+"&WS="+loadWS+"&SCREENTYPE="+loadSCREENTYPE+"&PERPAR="+loadPERPAR+"&OW="+loadOW+"&OL="+loadOL+"&FI="+loadFI+"&SQUARE="+loadSQUARE+"&WIREMAT="+loadWIREMATERIAL+"&HOOKSHEETS="+loadHOOKSHEETS+"&HOOKSMAT="+loadHOOKSMATERIAL+"&HOOKTYPE="+loadHOOKTYPE+"&HOOKTYPER="+loadHOOKTYPER+"&STRIPS="+loadSTRIPS+"&B="+loadB+"&BTHREAD="+loadBTHREAD+"&BWIDTH="+loadBWIDTH+"&FLIPY="+loadFLIPY+"&MOUNTTYPE="+loadMOUNTTYPE+"&FEED="+loadFEED+"&DFOLD="+loadDOUBLEFOLD+"&DFOLDR="+loadDOUBLEFOLDR+"&N="+loadN+"&SYM="+supSymetry+"&BASE="+supBase+"&OV1="+loadOVERLAP1+"&OV2="+loadOVERLAP2+"&SPISPA="+loadSPISPA+"&tpuCount="+tpuCount+"&TPU="+tpuSTRING+"&BOLTS="+boltSTRING+"&SUPPORTS="+supSTRING+"&SCRID="+ProductID.replace("+","!")+"&TOTALWIRE="+totalWireLength+"&TOTALHOOKS="+totalHooksLength+"&BLACHA="+blacha+"&SLOTFILL="+slotFill+"&EDGEL="+edgeLength+"&ACTION="+e+"&QTY="+o+"&hidSum="+hidSummary,!0),xmlhttp.send(),1==t?document.getElementById("closePanelSelR").onclick=function(){window.location.replace("cart.php")}:2==t?document.getElementById("closePanelSelR").onclick=function(){window.location.replace("offerlist.php")}:3==t&&(document.getElementById("closePanelSelR").onclick=function(){window.location.replace("orderlist.php")})}function rememberScreen(){for(supSTRING="",i=0;i<loadSUPPORTS.length;i++)i!=loadSUPPORTS.length-1?supSTRING+=loadSUPPORTS[i]+"^":supSTRING+=loadSUPPORTS[i];for(boltSTRING="",i=0;i<loadBOLTS.length;i++)i!=loadBOLTS.length-1?boltSTRING+=loadBOLTS[i]+"^":boltSTRING+=loadBOLTS[i];if(0==loadTPU.length)tpuSTRING="null";else for(tpuSTRING="",i=0;i<loadTPU.length;i++)i!=loadTPU.length-1?tpuSTRING+=loadTPU[i]+"^":tpuSTRING+=loadTPU[i];window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(document.getElementById("divActionScreen").innerHTML=xmlhttp.responseText)},xmlhttp.open("GET","rememberScreen.php?LS="+loadLS+"&WS="+loadWS+"&SCREENTYPE="+loadSCREENTYPE+"&PERPAR="+loadPERPAR+"&OW="+loadOW+"&OL="+loadOL+"&FI="+loadFI+"&SQUARE="+loadSQUARE+"&WIREMAT="+loadWIREMATERIAL+"&HOOKSHEETS="+loadHOOKSHEETS+"&HOOKSMAT="+loadHOOKSMATERIAL+"&HOOKTYPE="+loadHOOKTYPE+"&HOOKTYPER="+loadHOOKTYPER+"&STRIPS="+loadSTRIPS+"&B="+loadB+"&BTHREAD="+loadBTHREAD+"&BWIDTH="+loadBWIDTH+"&FLIPY="+loadFLIPY+"&MOUNTTYPE="+loadMOUNTTYPE+"&FEED="+loadFEED+"&DFOLD="+loadDOUBLEFOLD+"&DFOLDR="+loadDOUBLEFOLDR+"&N="+loadN+"&SYM="+supSymetry+"&BASE="+supBase+"&OV1="+loadOVERLAP1+"&OV2="+loadOVERLAP2+"&SPISPA="+loadSPISPA+"&BOLTS="+boltSTRING+"&SUPPORTS="+supSTRING+"&TPU="+tpuSTRING,!0),xmlhttp.send()}function setQty(e){quantity=e}function add2cart(e){e=parseInt(e),QTY=quantity,window.location.replace("additem.php")}function add3cart(e,o){e=parseInt(e),QTY=o,window.location.replace("additem.php")}function parseToFloat(e){var o,t;return o=parseFloat(e),-1==(t=String(o)).lastIndexOf(".")&&(t+=".00"),t}function materialLoad(e,o){0==e?(backgroundBody="radial-gradient(#EEEEEE, #111521) fixed",labelColorR=0,labelColorG=255,labelColorB=0,labelColorO=1,textColorR=0,textColorG=0,textColorB=0,borderLabel=4,lineColor=65280,hookColor="0x446678",hookColorS="0x88AAAA",wireColor="0x446678",wireColorS="0x88AAAA",hookOverColor="0xFFFF00",hookStoreColor="0x00FF00",materialWire=new THREE.MeshStandardMaterial({wireframe:!1,color:wireColor,emissive:1117710,roughness:.5,metalness:.5,shading:THREE.SmoothShading}),materialWireSample=new THREE.MeshStandardMaterial({wireframe:!1,color:wireColor,emissive:1117710,roughness:.5,metalness:.5,shading:THREE.SmoothShading}),materialHook=new THREE.MeshStandardMaterial({wireframe:!1,color:4482680,emissive:1117710,roughness:.5,metalness:.5,transparent:!0,opacity:1,shading:THREE.SmoothShading}),materialBlackStrip=new THREE.MeshStandardMaterial({wireframe:!1,color:3355443,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading}),materialWhiteStrip=new THREE.MeshStandardMaterial({wireframe:!1,color:15658734,emissive:1117710,roughness:.5,metalness:.2,shading:THREE.SmoothShading}),materialPuStrip=new THREE.MeshStandardMaterial({wireframe:!1,color:3355443,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:.8}),materialBlackRubber=new THREE.MeshStandardMaterial({wireframe:!1,color:2236962,emissive:1117710,roughness:.8,metalness:.1,shading:THREE.SmoothShading}),materialSeal=new THREE.MeshStandardMaterial({wireframe:!1,color:12303291,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:.6}),lineDashMaterial=new THREE.LineDashedMaterial({color:lineColor,dashSize:20,gapSize:4}),lineSolidMaterial=new THREE.LineBasicMaterial({color:lineColor}),materialFeed=new THREE.MeshStandardMaterial({wireframe:!1,color:65280,emissive:1117710,roughness:1,metalness:.7,transparent:!0,opacity:1,shading:THREE.SmoothShading}),materialBolt=new THREE.MeshStandardMaterial({wireframe:!1,color:4482680,emissive:1117710,roughness:.5,metalness:.5,shading:THREE.SmoothShading}),materialHollow=new THREE.MeshStandardMaterial({wireframe:!1,color:16776960,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:0}),materialHollowOV1=new THREE.MeshStandardMaterial({wireframe:!1,color:16776960,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:0}),materialHollowOV2=new THREE.MeshStandardMaterial({wireframe:!1,color:16776960,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:0}),materialHollowSup=new THREE.MeshStandardMaterial({wireframe:!1,color:16776960,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:0}),materialHollowB=new THREE.MeshStandardMaterial({wireframe:!1,color:16776960,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:0}),materialHookH=new THREE.MeshStandardMaterial({wireframe:!1,color:16776960,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:0})):(drawWhite=16777215,drawBlack=0,labelColorR=248,labelColorG=248,labelColorB=248,labelColorO=1,textColorR=0,textColorG=0,textColorB=0,borderLabel=0,backgroundBody="radial-gradient(#555555, #000000) fixed",hookColor=drawWhite,hookOverColor="0xFFFF00",hookStoreColor="0x00FF00",hookColorS="0x88AAAA",wireColor="0xFFFFFF",wireColorS="0xFFFFFF",materialStrokeBlack=new THREE.MeshBasicMaterial({wireframe:!1,color:drawBlack,shading:THREE.FlatShading,vertexColors:THREE.NoColors,side:THREE.BackSide}),materialWire=new THREE.MeshBasicMaterial({wireframe:!1,color:wireColor,shading:THREE.FlatShading,vertexColors:THREE.NoColors}),materialWireSample=new THREE.MeshStandardMaterial({wireframe:!1,color:16777215,emissive:1117710,roughness:.5,metalness:.5,shading:THREE.SmoothShading}),materialHook=new THREE.MeshBasicMaterial({wireframe:!1,color:hookColor,shading:THREE.FlatShading,vertexColors:THREE.NoColors}),materialBlackStrip=new THREE.MeshBasicMaterial({wireframe:!1,color:drawBlack,shading:THREE.FlatShading,vertexColors:THREE.NoColors}),materialWhiteStrip=new THREE.MeshBasicMaterial({wireframe:!1,color:drawWhite,shading:THREE.FlatShading,vertexColors:THREE.NoColors,side:THREE.BackSide}),materialPuStrip=new THREE.MeshBasicMaterial({wireframe:!1,color:drawBlack,shading:THREE.FlatShading,vertexColors:THREE.NoColors}),materialBlackRubber=new THREE.MeshBasicMaterial({wireframe:!1,color:drawBlack,shading:THREE.FlatShading,vertexColors:THREE.NoColors}),materialSeal=new THREE.MeshBasicMaterial({wireframe:!1,color:drawWhite,shading:THREE.FlatShading,vertexColors:THREE.NoColors,side:THREE.BackSide}),0==productSheets?lineColor=13421772:lineColor=10066329,lineDashMaterial=new THREE.LineDashedMaterial({color:lineColor,dashSize:20,gapSize:4}),lineSolidMaterial=new THREE.LineBasicMaterial({color:lineColor}),materialFeed=new THREE.MeshBasicMaterial({wireframe:!1,color:drawWhite,shading:THREE.FlatShading,vertexColors:THREE.NoColors,side:THREE.BackSide}),materialBolt=new THREE.MeshBasicMaterial({wireframe:!1,color:drawWhite,shading:THREE.FlatShading,vertexColors:THREE.NoColors,side:THREE.BackSide}),materialHollow=new THREE.MeshStandardMaterial({wireframe:!1,color:16776960,emissive:1117710,roughness:.3,metalness:.2,shading:THREE.SmoothShading,transparent:!0,opacity:0}),materialHollowOV1=materialHollow,materialHollowOV2=materialHollow,materialHollowSup=materialHollow,materialHollowB=materialHollow,materialHookH=materialHollow),document.body.style.background=backgroundBody,1==o&&reloadScreen()}function test(){for(Linegeometry=new THREE.Geometry,drawHookShape(),i=0;i<path.length;i++)Linegeometry.vertices.push(new THREE.Vector3(path[i][0]-meshEdge+hookEntryWidth,path[i][1]*upDownL+200,screenWidth/2));Linegeometry.computeLineDistances(),Line=new THREE.Line(Linegeometry,lineSolidMaterial),scene.add(Line)}function screentypeMesh(){screentypeGroup=new THREE.Object3D,1==screentype||2==screentype?(wireMesh(),wireMeshCross()):3==screentype?(straightMesh(),straightMeshCross(2*feedDirection-1)):4==screentype?straightMesh():5==screentype?straightharpMesh(0):8==screentype?straightharpMesh(1):6==screentype?nostraightharpMesh():7==screentype?(wireMesh(),wireMeshCross()):9==screentype?hollowscreenMesh(loadSCREENTYPE):0==screentype&&hollowscreenMesh(),screenMeshGroup.add(screentypeGroup)}function hooksMeshes(){hooksGroup=new THREE.Object3D,1!=hookSheets&&(meshHookArrayL=[],meshHookArrayR=[],meshHookArrayL=drawHook(loadHOOKTYPE,meshHookArrayL,hookAngle,hookWidth,hookHeight,hookRadius,hookEntryWidth,hookWidthInner,loadDOUBLEFOLD,hookSheet,hookWire*crimpDivider,1,upDownL,iterArc,drawingMode,pencilWeight),meshHookArrayR=drawHook(loadHOOKTYPER,meshHookArrayR,hookAngleR,hookWidthR,hookHeightR,hookRadiusR,hookEntryWidthR,hookWidthInnerR,loadDOUBLEFOLDR,hookSheetR,hookWireR*crimpDivider,-1,upDownR,iterArc,drawingMode,pencilWeight),0==drawingMode?(meshHookL=new THREE.Object3D,meshHookR=new THREE.Object3D,meshHookL.add(meshHookArrayL[0]),meshHookR.add(meshHookArrayR[0])):(meshHookL=new THREE.Object3D,meshHookR=new THREE.Object3D,meshHookL.add(meshHookArrayL[0]),meshHookL.add(meshHookArrayL[1]),meshHookR.add(meshHookArrayR[0]),meshHookR.add(meshHookArrayR[1])),2==hookSheets?(9==loadSCREENTYPE?positionCorrection=hookWire/2+hookSheet/2:positionCorrection=hookWire*crimpDivider/2,weldHookPos=-positionCorrection,weldHookPosR=-positionCorrection,meshHookL.position.set(-meshEdge,weldHookPos,-screenWidth/2),meshHookR.position.set(meshEdgeR,weldHookPosR,-screenWidth/2)):(meshHookL.position.set(-meshEdge,0,-screenWidth/2),meshHookR.position.set(meshEdgeR,0,-screenWidth/2)),0!=hookType&&hooksGroup.add(meshHookL),0!=hookTypeR&&hooksGroup.add(meshHookR)),screenMeshGroup.add(hooksGroup)}function supportMesh(){if(supportGroup=new THREE.Object3D,geometryHolSup=new THREE.CubeGeometry(30,hookWire+30,screenWidth,1,1,1),meshHolSupTemp=new THREE.Mesh(geometryHolSup,materialHollowSup),meshHolSup=[],4==screentype)for(shapeBlackStrip=new THREE.Shape,shapeWhiteStrip=new THREE.Shape,drawBlackStrip(shapeBlackStrip),drawWhiteStrip(shapeWhiteStrip,stripShape),pathArrayBlackStrip=[],pathArrayBlackStrip[pathArrayBlackStrip.length]=new THREE.Vector3(0,0,-screenWidth/2+.5),pathArrayBlackStrip[pathArrayBlackStrip.length]=new THREE.Vector3(0,0,screenWidth/2-.5),pathArrayWhiteStrip=[],pathArrayWhiteStrip[pathArrayWhiteStrip.length]=new THREE.Vector3(0,0,-screenWidth/2+.5),pathArrayWhiteStrip[pathArrayWhiteStrip.length]=new THREE.Vector3(0,0,screenWidth/2-.5),pathBlackStrip=new THREE.CatmullRomCurve3(pathArrayBlackStrip),pathWhiteStrip=new THREE.CatmullRomCurve3(pathArrayWhiteStrip),geometryBlackStrip=new THREE.ExtrudeGeometry(shapeBlackStrip,{steps:1,extrudePath:pathBlackStrip}),geometryWhiteStrip=new THREE.ExtrudeGeometry(shapeWhiteStrip,{steps:1,extrudePath:pathWhiteStrip}),geometryBlackStripF=new THREE.ExtrudeGeometry(shapeBlackStrip,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,screenWidth/2-.5),new THREE.Vector3(0,0,screenWidth/2)])}),geometryWhiteStripF=new THREE.ExtrudeGeometry(shapeWhiteStrip,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,screenWidth/2-.5),new THREE.Vector3(0,0,screenWidth/2)])}),meshBlackStripTemp=new THREE.Mesh(geometryBlackStrip,materialBlackStrip),meshBlackStripTemp.rotation.z=Math.PI/2,meshWhiteStripTemp=new THREE.Mesh(geometryWhiteStrip,materialWhiteStrip),meshWhiteStripTemp.rotation.z=Math.PI/2,1==computeWire&&(meshWhiteStripTemp.geometry.computeVertexNormals(),meshBlackStripTemp.geometry.computeVertexNormals()),meshBlackStripFTemp=new THREE.Mesh(geometryBlackStripF,materialBlackStrip),meshWhiteStripFTemp=new THREE.Mesh(geometryWhiteStripF,materialWhiteStrip),meshBlackStripFTemp.rotation.z=Math.PI/2,meshWhiteStripFTemp.rotation.z=Math.PI/2,meshBlackStripBTemp=meshBlackStripFTemp.clone(),meshBlackStripBTemp.position.set(0,0,-(screenWidth-.5)),meshWhiteStripBTemp=meshWhiteStripFTemp.clone(),meshWhiteStripBTemp.position.set(0,0,-(screenWidth-.5)),pianoStripe=new THREE.Object3D,pianoStripe.add(meshBlackStripTemp),pianoStripe.add(meshWhiteStripTemp),pianoStripe.add(meshBlackStripFTemp),pianoStripe.add(meshBlackStripBTemp),pianoStripe.add(meshWhiteStripFTemp),pianoStripe.add(meshWhiteStripBTemp),meshPianoStripe=[],meshPianoStripe.length=0,stripeDistance=(screenRealLeft+screenRealRight)/(supportCount+1),j=1;j<=supportCount;j++)meshPianoStripe[meshPianoStripe.length]=pianoStripe.clone(),meshPianoStripe[meshPianoStripe.length-1].position.set(-screenRealLeft+j*stripeDistance,0,0),supportGroup.add(meshPianoStripe[meshPianoStripe.length-1]),meshHolSup[meshHolSup.length]=meshHolSupTemp.clone(),meshHolSup[meshHolSup.length-1].position.set(-screenRealLeft+j*stripeDistance,0,0),supportGroup.add(meshHolSup[meshHolSup.length-1]);else if(5==screentype||6==screentype||8==screentype||9==screentype||0==screentype){for(pudimArray=[],pudimArray[pudimArray.length]=rdimS,pudimArray[pudimArray.length]=rdimS+15,shapePuStrip=new THREE.Shape,shapeSupportRubber=new THREE.Shape,drawPuStrip(shapePuStrip),drawSupportRubber(shapeSupportRubber,rubberType),geometryPuStrip=new THREE.ExtrudeGeometry(shapePuStrip,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,-screenWidth/2-overLap1),new THREE.Vector3(0,0,screenWidth/2+overLap2)])}),geometrySupportRubber=new THREE.ExtrudeGeometry(shapeSupportRubber,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,-screenWidth/2),new THREE.Vector3(0,0,screenWidth/2)])}),meshPuStripTemp=new THREE.Mesh(geometryPuStrip,materialPuStrip),meshPuStripTemp.rotation.z=Math.PI/2,meshSupportRubberTemp=new THREE.Mesh(geometrySupportRubber,materialBlackRubber),meshSupportRubberTemp.rotation.z=Math.PI/2,1==flatScreen&&(shapeEdgeStrip=new THREE.Shape,drawEdgeStrip(shapeEdgeStrip),geometryEdgeStrip=new THREE.ExtrudeGeometry(shapeEdgeStrip,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,-screenWidth/2),new THREE.Vector3(0,0,screenWidth/2)])}),meshEdgeStripTemp=new THREE.Mesh(geometryEdgeStrip,materialPuStrip),meshEdgeStripTemp.rotation.z=Math.PI/2,meshEdgeStripLH=meshEdgeStripTemp.clone(),meshEdgeStripLH.position.set(rdimS+15,0,0),supportGroup.add(meshEdgeStripLH),meshEdgeStripRH=meshEdgeStripTemp.clone(),meshEdgeStripRH.position.set(rdimE-15,0,0),supportGroup.add(meshEdgeStripRH)),1==computeWire&&(meshPuStripTemp.geometry.computeVertexNormals(),meshSupportRubberTemp.geometry.computeVertexNormals()),meshPuStrip=[],meshPuStrip.length=0,meshSupportRubber=[],meshSupportRubber.length=0,podzMin=60,rwireDiameter<=1.2?(podz=150,podzMax=200):rwireDiameter<=1.5?(podz=180,podzMax=250):rwireDiameter<=2.5?(podz=200,podzMax=400):(podz=350,podzMax=450),estima=60,sumSupPu=0,supportArrayBase=[],supportArrayBase[0]=supportArray[0],zakresTPU=[],j=0;j<=supportArray.length-1;j++)if(0==j?(meshPuStrip[meshPuStrip.length]=meshPuStripTemp.clone(),meshPuStrip[meshPuStrip.length-1].position.set(-RmeshEdge+hookEntryWidth+puW/2,0,0),pudimArray[pudimArray.length]=-RmeshEdge+hookEntryWidth+puW/2,0!=screentype&&9!=screentype&&supportGroup.add(meshPuStrip[meshPuStrip.length-1]),puDistance=RmeshEdge-hookEntryWidth-puW/2-(RscreenRealLeft-supportArray[0]),puStart=-RmeshEdge+hookEntryWidth+puW/2):0!=j&&(supportArrayBase[j]=supportArrayBase[j-1]+supportArray[j],meshPuStrip[meshPuStrip.length]=meshPuStripTemp.clone(),meshPuStrip[meshPuStrip.length-1].position.set(-RscreenRealLeft+supportArrayBase[j-1],0,0),pudimArray[pudimArray.length]=-RscreenRealLeft+supportArrayBase[j-1],meshSupportRubber[meshSupportRubber.length]=meshSupportRubberTemp.clone(),meshSupportRubber[meshSupportRubber.length-1].position.set(-RscreenRealLeft+supportArrayBase[j-1],-puH/2-4,0),0==machineSelect&&(meshHolSup[meshHolSup.length]=meshHolSupTemp.clone(),meshHolSup[meshHolSup.length-1].position.set(-RscreenRealLeft+supportArrayBase[j-1],0,0),supportGroup.add(meshHolSup[meshHolSup.length-1])),0!=screentype&&9!=screentype&&supportGroup.add(meshPuStrip[meshPuStrip.length-1]),supportGroup.add(meshSupportRubber[meshSupportRubber.length-1]),sumSupPu+=supportArray[j-1],puDistance=supportArray[j],puStart=-RscreenRealLeft+sumSupPu),j==supportArray.length-1&&(meshPuStrip[meshPuStrip.length]=meshPuStripTemp.clone(),meshPuStrip[meshPuStrip.length-1].position.set(RmeshEdgeR-hookEntryWidthR-puW/2,0,0),pudimArray[pudimArray.length]=RmeshEdgeR-hookEntryWidthR-puW/2,0!=screentype&&9!=screentype&&supportGroup.add(meshPuStrip[meshPuStrip.length-1]),puDistance=RmeshEdgeR-hookEntryWidthR-puW/2-(-RscreenRealLeft+sumSupPu)),0!=screentype&&9!=screentype&&(1==supportArray.length&&(puDistance=RmeshEdgeR-hookEntryWidthR-puW/2+(RmeshEdge-hookEntryWidth-puW/2)),puMax=Math.floor(puDistance/podzMin)-1,puMin=0,puMin<0&&(puMin=0),zakresTPU[j]=[puMin,puMax],null==loadTPU[j]||loadTPU[j]<puMin||loadTPU[j]>puMax?(puDistance>podz?puDistance-Math.floor(puDistance/podz)*podz<=estima?puAddCount=Math.floor(puDistance/podz)-1:puAddCount=Math.floor(puDistance/podz):puAddCount=0,loadTPU[j]=puAddCount):puAddCount=loadTPU[j],puAddCount>0))for(puSpacing=puDistance/(puAddCount+1),z=1;z<=puAddCount;z++)meshPuStrip[meshPuStrip.length]=meshPuStripTemp.clone(),meshPuStrip[meshPuStrip.length-1].position.set(puStart+z*puSpacing,0,0),pudimArray[pudimArray.length]=puStart+z*puSpacing,supportGroup.add(meshPuStrip[meshPuStrip.length-1]);pudimArray[pudimArray.length]=rdimE-15,pudimArray[pudimArray.length]=rdimE}if(2==screentype&&0==perPar)for(shapeSupportRubber=new THREE.Shape,drawSupportRubber(shapeSupportRubber,rubberType),geometrySupportRubber=new THREE.ExtrudeGeometry(shapeSupportRubber,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,-screenWidth/2),new THREE.Vector3(0,0,screenWidth/2)])}),meshSupportRubberTemp=new THREE.Mesh(geometrySupportRubber,materialBlackRubber),meshSupportRubberTemp.rotation.z=Math.PI/2,1==computeWire&&meshSupportRubberTemp.geometry.computeVertexNormals(),meshSupportRubber=[],meshSupportRubber.length=0,supportArrayBase=[],supportArrayBase[0]=supportArray[0],j=1;j<=supportArray.length-1;j++)supportArrayBase[j]=supportArrayBase[j-1]+supportArray[j],meshSupportRubber[meshSupportRubber.length]=meshSupportRubberTemp.clone(),meshSupportRubber[meshSupportRubber.length-1].position.set(-screenRealLeft+supportArrayBase[j-1],-wireDiameter-4,0),meshHolSup[meshHolSup.length]=meshHolSupTemp.clone(),meshHolSup[meshHolSup.length-1].position.set(-screenRealLeft+supportArrayBase[j-1],0,0),supportGroup.add(meshHolSup[meshHolSup.length-1]),supportGroup.add(meshSupportRubber[meshSupportRubber.length-1]);screenMeshGroup.add(supportGroup)}function boltMesh(){if(boltGroup=new THREE.Object3D,meshHolB=[],boltWidth2=boltWidth+40,geometryHolB=new THREE.CubeGeometry(boltWidth2,boltThread,screenWidth-boltArray[0]-boltArray[boltArray.length-1]),meshHolBTemp=new THREE.Mesh(geometryHolB,materialHollowB),6==hookType||6==hookTypeR){if(shapeBolt=new THREE.Shape,drawBolt(shapeBolt,0,0,boltThread/2,8),geometryBolt=new THREE.ExtrudeGeometry(shapeBolt,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(-boltWidth2/2,0,0),new THREE.Vector3(boltWidth2/2,0,0)])}),meshBoltTemp=new THREE.Mesh(geometryBolt,materialBolt),1==computeWire&&0==drawingMode&&meshBoltTemp.geometry.computeVertexNormals(),1==drawingMode&&(shapeBoltStroke=new THREE.Shape,drawBolt(shapeBoltStroke,0,0,boltThread/2+pencilWeight,8),geometryBoltStroke=new THREE.ExtrudeGeometry(shapeBoltStroke,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(-boltWidth2/2-pencilWeight,0,0),new THREE.Vector3(boltWidth2/2+pencilWeight,0,0)])}),meshBoltTempStroke=new THREE.Mesh(geometryBoltStroke,materialStrokeBlack)),meshBolt=[],meshBolt.length=0,meshBoltR=[],meshBoltR.length=0,6==hookType)for(meshHolB[meshHolB.length]=meshHolBTemp.clone(),boltBase=[],boltBase[0]=boltArray[0],0==hookSheets?yBolt=flipY*(hookWire*crimpDivider*1.5+2.5*hookSheet+boltThread/2+.02+7*pencilWeight):yBolt=upDownL*(boltThread/2-hookWire*crimpDivider/2-.25*hookSheet+2*pencilWeight),meshHolB[meshHolB.length-1].position.set(-screenLength/2-boltWidth2/2+40,yBolt,(boltArray[0]-boltArray[boltArray.length-1])/2),boltGroup.add(meshHolB[meshHolB.length-1]),j=0;j<boltArray.length-1;j++)meshBolt=meshBoltTemp.clone(),meshBolt.position.set(-screenLength/2-boltWidth2/2+40,yBolt,-screenWidth/2+boltBase[j]),boltGroup.add(meshBolt),1==drawingMode&&(meshBolt=meshBoltTempStroke.clone(),meshBolt.position.set(-screenLength/2-boltWidth2/2+40,yBolt,-screenWidth/2+boltBase[j]),boltGroup.add(meshBolt)),boltBase[j+1]=boltBase[j]+boltArray[j+1];if(6==hookTypeR)for(meshHolB[meshHolB.length]=meshHolBTemp.clone(),boltBase=[],boltBase[0]=boltArray[0],0==hookSheets?yBolt=-upDownR*(hookWireR*crimpDivider*1.5+2.5*hookSheetR+boltThread/2+.02+7*pencilWeight):yBolt=-upDownR*(boltThread/2-hookWireR*crimpDivider/2-.25*hookSheetR+2*pencilWeight),meshHolB[meshHolB.length-1].position.set(screenLength/2+boltWidth2/2-40,yBolt,(boltArray[0]-boltArray[boltArray.length-1])/2),boltGroup.add(meshHolB[meshHolB.length-1]),j=0;j<boltArray.length-1;j++)meshBoltR=meshBoltTemp.clone(),meshBoltR.position.set(screenLength/2+boltWidth2/2-40,yBolt,-screenWidth/2+boltBase[j]),boltGroup.add(meshBoltR),1==drawingMode&&(meshBoltR=meshBoltTempStroke.clone(),meshBoltR.position.set(screenLength/2+boltWidth2/2-40,yBolt,-screenWidth/2+boltBase[j]),boltGroup.add(meshBoltR)),boltBase[j+1]=boltBase[j]+boltArray[j+1]}screenMeshGroup.add(boltGroup)}function overlapMesh(){overlapGroup=new THREE.Object3D,1!=overLap1&&2!=overLap1||(shapeSeal=new THREE.Shape,drawSeal(shapeSeal,overLap1),geometrySeal=new THREE.ExtrudeGeometry(shapeSeal,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(-(meshEdge-hookEntryWidth),0,0),new THREE.Vector3(meshEdgeR-hookEntryWidthR,0,0)])}),meshOV1Screen=new THREE.Mesh(geometrySeal,materialSeal),1==computeWire&&meshOV1Screen.geometry.computeVertexNormals(),meshOV1Screen.position.set(0,0,-screenWidth/2),overlapGroup.add(meshOV1Screen)),1!=overLap2&&2!=overLap2||(shapeSealB=new THREE.Shape,drawSeal(shapeSealB,overLap2),geometrySealB=new THREE.ExtrudeGeometry(shapeSealB,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(-(meshEdgeR-hookEntryWidthR),0,0),new THREE.Vector3(meshEdge-hookEntryWidth,0,0)])}),meshOV2Screen=new THREE.Mesh(geometrySealB,materialSeal),1==computeWire&&meshOV2Screen.geometry.computeVertexNormals(),meshOV2Screen.rotation.y=Math.PI,meshOV2Screen.position.set(0,0,screenWidth/2),overlapGroup.add(meshOV2Screen)),screenMeshGroup.add(overlapGroup)}function dimsLines(){if(0==supBase?baseHeight=0:baseHeight=10,SPlineHeight=200,arrowWidth=30,lengthMargin=60,yHeight=.75*SPlineHeight*CANVAS_WIDTH/(loadLS+lengthMargin),yHeight>CANVAS_HEIGHT/4&&(lengthMargin=.75*CANVAS_WIDTH*SPlineHeight/(CANVAS_HEIGHT/4)-loadLS),dimsGroup=new THREE.Object3D,dimsSpispaGroup=new THREE.Object3D,dimsWidthGroup=new THREE.Object3D,dimsSupportGroup=new THREE.Object3D,dimsBoltGroup=new THREE.Object3D,divider=.75,1==SpL?SPWL=2:SPWL=0,SPWR=2*SpR,LineSPgeometryL=new THREE.Geometry,LineSPgeometryL.vertices.push(new THREE.Vector3(-screenRealLeft+SPWL,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2-wireDiameter),new THREE.Vector3(-screenRealLeft+SPWL,-(hookSheet+hookRadius+hookWire/2)*upDownL,screenWidth/2-wireDiameter)),LineSPgeometryL.computeLineDistances(),LineSPL=new THREE.Line(LineSPgeometryL,lineDashMaterial),LineSPgeometryR=new THREE.Geometry,LineSPgeometryR.vertices.push(new THREE.Vector3(screenRealRight-SPWR,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2-wireDiameter),new THREE.Vector3(screenRealRight-SPWR,-(hookSheetR+hookRadiusR+hookWireR/2)*upDownR,screenWidth/2-wireDiameter)),LineSPgeometryR.computeLineDistances(),LineSPR=new THREE.Line(LineSPgeometryR,lineDashMaterial),LineSPbottomGeometry=new THREE.Geometry,LineSPbottomGeometry.vertices.push(new THREE.Vector3(-screenRealLeft+SPWL,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2-wireDiameter),new THREE.Vector3(screenRealRight-SPWR,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2-wireDiameter)),LineSPbottomGeometry.computeLineDistances(),LineSPbottom=new THREE.Line(LineSPbottomGeometry,lineSolidMaterial),Lfrom=new THREE.Vector3(-screenRealLeft-arrowWidth+SPWL*arrowWidth,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2-wireDiameter),Lto=new THREE.Vector3(-screenRealLeft+SPWL,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2-wireDiameter),Ldirection=Lto.clone().sub(Lfrom),Llength=Ldirection.length(),LarrowHelper=new THREE.ArrowHelper(Ldirection.normalize(),Lfrom,Llength,lineColor,30,10),Rfrom=new THREE.Vector3(screenRealRight+arrowWidth-SPWR*arrowWidth,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2-wireDiameter),Rto=new THREE.Vector3(screenRealRight-SPWR,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2-wireDiameter),Rdirection=Rto.clone().sub(Rfrom),Rlength=Rdirection.length(),RarrowHelper=new THREE.ArrowHelper(Rdirection.normalize(),Rfrom,Rlength,lineColor,30,10),labelSPISPA=makeTextSprite(SPname+" "+loadLS,{fontsize:40,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),labelSPISPA.position.set(0,-SPlineHeight*divider-baseHeight*loadN,screenWidth/2+60),dimsSpispaGroup.add(labelSPISPA),0==supBase&&(topSupDist=(SPlineHeight/2-invY*(wireDiameter+hookSheet+hookRadius))*CANVAS_WIDTH/(loadLS+lengthMargin)),labelSUP=[],5==screentype||6==screentype||8==screentype||9==screentype||2==screentype&&0==perPar||4==screentype&&0==loadN||0==screentype){for(supX=-screenRealLeft,supXstatic=-screenRealLeft,supXend=screenRealRight,supI=CANVAS_WIDTH*(lengthMargin/2)/(loadLS+lengthMargin),supSum=0,supSumTemp=0,supH=40*CANVAS_WIDTH/(loadLS+lengthMargin),tpuH=70*CANVAS_WIDTH/(loadLS+lengthMargin),supH2=90*CANVAS_WIDTH/(loadLS+lengthMargin),supW=142*CANVAS_WIDTH/(loadLS+lengthMargin),supportArrows=[],supi=[],document.getElementById("panel5").style.display="none",i=0;i<=supportArray.length-1;i++)0==i?SPWLC=1:SPWLC=0,i==supportArray.length-1?SPWRC=1:SPWRC=0,0==supBase?(Sto=new THREE.Vector3(supX-SPWLC*SPWL,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),Sfrom=new THREE.Vector3(supX+supportArray[i]/2,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),supportArrows[supportArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,30,10),dimsSupportGroup.add(supportArrows[supportArrows.length-1]),Sfrom=new THREE.Vector3(supX+supportArray[i]/2,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),Sto=new THREE.Vector3(supX+supportArray[i]+SPWRC*SPWR,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),supportArrows[supportArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,30,10),dimsSupportGroup.add(supportArrows[supportArrows.length-1]),loadN>0?supValue=Math.round(10*supportArray[i])/10:supValue="add supports",labelSUP[labelSUP.length]=makeTextSprite(supValue,{fontsize:40,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),labelSUP[labelSUP.length-1].position.set(supX+supportArray[i]/2+70,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),dimsSupportGroup.add(labelSUP[labelSUP.length-1]),i<supportArray.length-1&&(supportLineGeometry=new THREE.Geometry,supportLineGeometry.vertices.push(new THREE.Vector3(supX+(supportArray[i]+SPWRC*SPWR),-SPlineHeight/2-baseHeight,screenWidth/2-wireDiameter),new THREE.Vector3(supX+(supportArray[i]+SPWRC*SPWR),-30,screenWidth/2-wireDiameter)),supportLineGeometry.computeLineDistances(),supportLine=new THREE.Line(supportLineGeometry,lineDashMaterial),dimsSupportGroup.add(supportLine))):1==supBase?(topSupDist=(SPlineHeight/2-invY*(wireDiameter+hookSheet+hookRadius)+baseHeight*i)*CANVAS_WIDTH/(loadLS+lengthMargin),Sto=new THREE.Vector3(supXstatic-SPWLC*SPWL,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),Sfrom=new THREE.Vector3(supX+supportArray[i]/2,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),supportArrows[supportArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,30,10),dimsSupportGroup.add(supportArrows[supportArrows.length-1]),Sfrom=new THREE.Vector3(supX+supportArray[i]/2,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),Sto=new THREE.Vector3(supX+supportArray[i]+SPWRC*SPWR,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),supportArrows[supportArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,30,10),dimsSupportGroup.add(supportArrows[supportArrows.length-1]),supValue=Math.round(10*(supportArray[i]+supSum))/10,labelSUP[labelSUP.length]=makeTextSprite(supValue,{fontsize:40,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),labelSUP[labelSUP.length-1].position.set(supX+supportArray[i]/2+70,-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),dimsSupportGroup.add(labelSUP[labelSUP.length-1]),i<supportArray.length-1&&(supportLineGeometry=new THREE.Geometry,supportLineGeometry.vertices.push(new THREE.Vector3(supX+(supportArray[i]+SPWRC*SPWR),-SPlineHeight/2-baseHeight*i,screenWidth/2-wireDiameter),new THREE.Vector3(supX+(supportArray[i]+SPWRC*SPWR),-30,screenWidth/2-wireDiameter)),supportLineGeometry.computeLineDistances(),supportLine=new THREE.Line(supportLineGeometry,lineDashMaterial),dimsSupportGroup.add(supportLine))):2==supBase&&(topSupDist=(SPlineHeight/2-invY*(wireDiameter+hookSheet+hookRadius)+baseHeight*(supportArray.length-1-i))*CANVAS_WIDTH/(loadLS+lengthMargin),Sto=new THREE.Vector3(supX-SPWLC*SPWL,-SPlineHeight/2-baseHeight*(supportArray.length-1-i),screenWidth/2-wireDiameter),Sfrom=new THREE.Vector3(supX+supportArray[i]/2,-SPlineHeight/2-baseHeight*(supportArray.length-1-i),screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),supportArrows[supportArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,30,10),dimsSupportGroup.add(supportArrows[supportArrows.length-1]),Sfrom=new THREE.Vector3(supX+supportArray[i]/2,-SPlineHeight/2-baseHeight*(supportArray.length-1-i),screenWidth/2-wireDiameter),Sto=new THREE.Vector3(supXend+SPWRC*SPWR,-SPlineHeight/2-baseHeight*(supportArray.length-1-i),screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),supportArrows[supportArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,30,10),dimsSupportGroup.add(supportArrows[supportArrows.length-1]),supValue=Math.round(10*(loadLS-supSum))/10,labelSUP[labelSUP.length]=makeTextSprite(supValue,{fontsize:40,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),labelSUP[labelSUP.length-1].position.set(supX+supportArray[i]/2+70,-SPlineHeight/2-baseHeight*(supportArray.length-1-i),screenWidth/2-wireDiameter),dimsSupportGroup.add(labelSUP[labelSUP.length-1]),i<supportArray.length-1&&(supportLineGeometry=new THREE.Geometry,supportLineGeometry.vertices.push(new THREE.Vector3(supX+(supportArray[i]+SPWRC*SPWR),-SPlineHeight/2-baseHeight*(supportArray.length-1-i-1),screenWidth/2-wireDiameter),new THREE.Vector3(supX+(supportArray[i]+SPWRC*SPWR),-30,screenWidth/2-wireDiameter)),supportLineGeometry.computeLineDistances(),supportLine=new THREE.Line(supportLineGeometry,lineDashMaterial),dimsSupportGroup.add(supportLine))),supInput=document.getElementById("supval"+i),supi[i]=CANVAS_WIDTH*supportArray[i]/(loadLS+lengthMargin),supInput.style.left=supI+supi[i]/2-supW/2+"px",supInput.style.height=supH+"px",supInput.style.fontSize=supH+"px",supInput.style.lineHeight=supH+"px",supInput.style.width=supW+"px",supInput.style.padding="0px",supInput.style.top=Math.round(CANVAS_HEIGHT/2+topSupDist)-supH2/2+"px",5!=loadSCREENTYPE&&6!=loadSCREENTYPE&&8!=loadSCREENTYPE||(tpuInput=document.getElementById("tpu"+i),tpuInput.style.left=supI+supi[i]/2-supW/4+"px",tpuInput.style.height=supH+"px",tpuInput.style.fontSize=supH+"px",tpuInput.style.lineHeight=supH+"px",tpuInput.style.width=supW/2+"px",tpuInput.style.lineHeight=supH+"px",tpuInput.style.padding="0px",tpuInput.style.top=Math.round(CANVAS_HEIGHT/2+topSupDist)-supH2+"px"),0==tempSUPPORTS.length?0==supBase?supInput.value=Math.round(10*supportArray[i])/10:1==supBase?supInput.value=Math.round(10*(supportArray[i]+supSum))/10:2==supBase&&(supInput.value=Math.round(10*(loadLS-supSum))/10):(0==supBase?supInput.value=Math.round(10*tempSUPPORTS[i])/10:1==supBase?supInput.value=Math.round(10*(tempSUPPORTS[i]+supSumTemp))/10:2==supBase&&(supInput.value=Math.round(10*(loadLS-supSumTemp))/10),supSumTemp+=tempSUPPORTS[i]),supSum+=supportArray[i],supI+=supi[i],supX+=supportArray[i];5!=panelNumber&&13!=panelNumber||(document.getElementById("panel5").style.display="block")}if((5==screentype||6==screentype||8==screentype||8==screentype||8==screentype||8==screentype)&&1==flatScreen){for(puArrows=[],puLabels=[],pudimArray.sort((function(e,o){return e-o})),supSumPu=0,ip=0;ip<pudimArray.length-1;ip++)Sto=new THREE.Vector3(pudimArray[ip],SPlineHeight/4,screenWidth/2-wireDiameter),Sfrom=new THREE.Vector3(pudimArray[ip]+Math.abs(pudimArray[ip+1]-pudimArray[ip])/2,SPlineHeight/4,screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),puArrows[puArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,5,5),dimsSupportGroup.add(puArrows[puArrows.length-1]),Sfrom=new THREE.Vector3(pudimArray[ip+1]-Math.abs(pudimArray[ip+1]-pudimArray[ip])/2,SPlineHeight/4,screenWidth/2-wireDiameter),Sto=new THREE.Vector3(pudimArray[ip+1],SPlineHeight/4,screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),puArrows[puArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,5,5),dimsSupportGroup.add(puArrows[puArrows.length-1]),0==ip&&(supportLineGeometry=new THREE.Geometry,supportLineGeometry.vertices.push(new THREE.Vector3(pudimArray[ip],SPlineHeight/2,screenWidth/2-wireDiameter),new THREE.Vector3(pudimArray[ip],20,screenWidth/2-wireDiameter)),supportLineGeometry.computeLineDistances(),supportLine=new THREE.Line(supportLineGeometry,lineDashMaterial),dimsSupportGroup.add(supportLine)),ip==pudimArray.length-2?lineDivider=2:lineDivider=4,supportLineGeometry=new THREE.Geometry,supportLineGeometry.vertices.push(new THREE.Vector3(pudimArray[ip+1],SPlineHeight/lineDivider,screenWidth/2-wireDiameter),new THREE.Vector3(pudimArray[ip+1],20,screenWidth/2-wireDiameter)),supportLineGeometry.computeLineDistances(),supportLine=new THREE.Line(supportLineGeometry,lineDashMaterial),dimsSupportGroup.add(supportLine),supValue=Math.round(Math.abs(pudimArray[ip+1]-pudimArray[ip]),2),supSumPu+=supValue,puLabels[puLabels.length]=makeTextSprite(supValue,{fontsize:28,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),puLabels[puLabels.length-1].position.set(pudimArray[ip]+Math.abs(pudimArray[ip+1]-pudimArray[ip])/2+85,SPlineHeight/4-16,screenWidth/2-wireDiameter),dimsSupportGroup.add(puLabels[puLabels.length-1]);Sto=new THREE.Vector3(rdimS,SPlineHeight/2,screenWidth/2-wireDiameter),Sfrom=new THREE.Vector3(0,SPlineHeight/2,screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),puArrows[puArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,5,5),dimsSupportGroup.add(puArrows[puArrows.length-1]),Sfrom=new THREE.Vector3(0,SPlineHeight/2,screenWidth/2-wireDiameter),Sto=new THREE.Vector3(rdimE,SPlineHeight/2,screenWidth/2-wireDiameter),Sdirection=Sto.clone().sub(Sfrom),Slength=Sdirection.length(),puArrows[puArrows.length]=new THREE.ArrowHelper(Sdirection.normalize(),Sfrom,Slength,lineColor,5,5),dimsSupportGroup.add(puArrows[puArrows.length-1]),supValue=Math.round(supSumPu,2),puLabelTotal=makeTextSprite(supValue,{fontsize:40,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),puLabelTotal.position.set(70,SPlineHeight/2,screenWidth/2-wireDiameter),dimsSupportGroup.add(puLabelTotal)}if(dimsSpispaGroup.add(LineSPL),dimsSpispaGroup.add(LineSPR),dimsSpispaGroup.add(LineSPbottom),dimsSpispaGroup.add(LarrowHelper),dimsSpispaGroup.add(RarrowHelper),0==flatScreen&&(6!=hookType?(SPlineHeight=200,widDiv=2):(SPlineHeight=300,widDiv=1),widthXline=-meshEdge-hookRadius-2*hookSheet-hookWire,widthTopGeometry=new THREE.Geometry,widthTopGeometry.vertices.push(new THREE.Vector3(widthXline,0,-screenWidth/2),new THREE.Vector3(widthXline-SPlineHeight/widDiv,0,-screenWidth/2)),widthTopGeometry.computeLineDistances(),widthTopLine=new THREE.Line(widthTopGeometry,lineDashMaterial),dimsWidthGroup.add(widthTopLine),widthBotGeometry=new THREE.Geometry,widthBotGeometry.vertices.push(new THREE.Vector3(widthXline,0,screenWidth/2),new THREE.Vector3(widthXline-SPlineHeight/widDiv,0,screenWidth/2)),widthBotGeometry.computeLineDistances(),widthBotLine=new THREE.Line(widthBotGeometry,lineDashMaterial),dimsWidthGroup.add(widthBotLine),Tfrom=new THREE.Vector3(widthXline-SPlineHeight/widDiv,0,0),Tto=new THREE.Vector3(widthXline-SPlineHeight/widDiv,0,-screenWidth/2),Tdirection=Tto.clone().sub(Tfrom),Tlength=Tdirection.length(),TarrowHelper=new THREE.ArrowHelper(Tdirection.normalize(),Tfrom,Tlength,lineColor,30,10),dimsWidthGroup.add(TarrowHelper),Bfrom=new THREE.Vector3(widthXline-SPlineHeight/widDiv,0,0),Bto=new THREE.Vector3(widthXline-SPlineHeight/widDiv,0,screenWidth/2),Bdirection=Bto.clone().sub(Bfrom),Blength=Bdirection.length(),BarrowHelper=new THREE.ArrowHelper(Bdirection.normalize(),Bfrom,Blength,lineColor,30,10),dimsWidthGroup.add(BarrowHelper),labelWidth=makeTextSprite(screenWidth,{fontsize:40,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),labelWidth.position.set(widthXline-SPlineHeight/widDiv,0,0),dimsWidthGroup.add(labelWidth)),0==flatScreen)if(labelBolt=[],6==hookType)for(boltBase=[],boltBase[0]=boltArray[0],0==hookSheets?yBolt=flipY*(1.5*hookWire+2.5*hookSheet+boltThread/2):yBolt=flipY*(boltThread/2-hookWire/2-.25*hookSheet),j=0;j<=boltArray.length-1;j++)j<boltArray.length-1&&(boltBotGeometry=new THREE.Geometry,boltBotGeometry.vertices.push(new THREE.Vector3(-(screenLength/2+boltWidth),0,-screenWidth/2+boltBase[j]),new THREE.Vector3(-(screenLength/2+boltWidth)-SPlineHeight/3,0,-screenWidth/2+boltBase[j])),boltBotGeometry.computeLineDistances(),boltBotLine=new THREE.Line(boltBotGeometry,lineDashMaterial),dimsBoltGroup.add(boltBotLine)),Tfrom=new THREE.Vector3(-(screenLength/2+boltWidth)-SPlineHeight/3,0,-screenWidth/2+boltBase[j]-boltArray[j]/2),Tto=new THREE.Vector3(-(screenLength/2+boltWidth)-SPlineHeight/3,0,-screenWidth/2+boltBase[j]-boltArray[j]),Tdirection=Tto.clone().sub(Tfrom),Tlength=Tdirection.length(),boltTarrowHelper=new THREE.ArrowHelper(Tdirection.normalize(),Tfrom,Tlength,lineColor,30,10),dimsBoltGroup.add(boltTarrowHelper),Bfrom=new THREE.Vector3(-(screenLength/2+boltWidth)-SPlineHeight/3,0,-screenWidth/2+boltBase[j]-boltArray[j]/2),Bto=new THREE.Vector3(-(screenLength/2+boltWidth)-SPlineHeight/3,0,-screenWidth/2+boltBase[j]),Bdirection=Bto.clone().sub(Bfrom),Blength=Bdirection.length(),boltBarrowHelper=new THREE.ArrowHelper(Bdirection.normalize(),Bfrom,Blength,lineColor,30,10),dimsBoltGroup.add(boltBarrowHelper),labelValue=Math.round(10*boltArray[j])/10,labelBolt[labelBolt.length]=makeTextSprite(labelValue,{fontsize:40,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),labelBolt[labelBolt.length-1].position.set(-(screenLength/2+boltWidth)-SPlineHeight/3+70,0,-screenWidth/2+boltBase[j]-boltArray[j]/2+30),dimsBoltGroup.add(labelBolt[labelBolt.length-1]),boltBase[j+1]=boltBase[j]+boltArray[j+1];else if(6==hookTypeR)for(boltBase=[],boltBase[0]=boltArray[0],0==hookSheets?yBolt=flipY*(1.5*hookWireR+2.5*hookSheetR+boltThread/2):yBolt=flipY*(boltThread/2-hookWireR/2-.25*hookSheetR),j=0;j<=boltArray.length-1;j++)0==j&&(boltTopGeometry=new THREE.Geometry,boltTopGeometry.vertices.push(new THREE.Vector3(screenLength/2+boltWidth,0,-screenWidth/2),new THREE.Vector3(screenLength/2+boltWidth+SPlineHeight/3,0,-screenWidth/2)),boltTopGeometry.computeLineDistances(),boltTopLine=new THREE.Line(boltTopGeometry,lineDashMaterial),dimsBoltGroup.add(boltTopLine)),boltBotGeometry=new THREE.Geometry,boltBotGeometry.vertices.push(new THREE.Vector3(screenLength/2+boltWidth,0,-screenWidth/2+boltBase[j]),new THREE.Vector3(screenLength/2+boltWidth+SPlineHeight/3,0,-screenWidth/2+boltBase[j])),boltBotGeometry.computeLineDistances(),boltBotLine=new THREE.Line(boltBotGeometry,lineDashMaterial),dimsBoltGroup.add(boltBotLine),Tfrom=new THREE.Vector3(screenLength/2+boltWidth+SPlineHeight/3,0,-screenWidth/2+boltBase[j]-boltArray[j]/2),Tto=new THREE.Vector3(screenLength/2+boltWidth+SPlineHeight/3,0,-screenWidth/2+boltBase[j]-boltArray[j]),Tdirection=Tto.clone().sub(Tfrom),Tlength=Tdirection.length(),boltTarrowHelper=new THREE.ArrowHelper(Tdirection.normalize(),Tfrom,Tlength,lineColor,30,10),dimsBoltGroup.add(boltTarrowHelper),Bfrom=new THREE.Vector3(screenLength/2+boltWidth+SPlineHeight/3,0,-screenWidth/2+boltBase[j]-boltArray[j]/2),Bto=new THREE.Vector3(screenLength/2+boltWidth+SPlineHeight/3,0,-screenWidth/2+boltBase[j]),Bdirection=Bto.clone().sub(Bfrom),Blength=Bdirection.length(),boltBarrowHelper=new THREE.ArrowHelper(Bdirection.normalize(),Bfrom,Blength,lineColor,30,10),dimsBoltGroup.add(boltBarrowHelper),labelValue=Math.round(10*boltArray[j])/10,labelBolt[labelBolt.length]=makeTextSprite(labelValue,{fontsize:40,fontface:"Lucida Console",borderColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO}}),labelBolt[labelBolt.length-1].position.set(screenLength/2+boltWidth+SPlineHeight/3+70,0,-screenWidth/2+boltBase[j]-boltArray[j]/2+30),dimsBoltGroup.add(labelBolt[labelBolt.length-1]),boltBase[j+1]=boltBase[j]+boltArray[j+1];0==flatScreen&&(feedScale=screenLength>screenWidth?screenWidth/2/3:screenWidth/2/4,shapeFeed=new THREE.Shape,shapeFeed.moveTo(-1*feedScale,1.5*feedScale),shapeFeed.lineTo(1*feedScale,1.5*feedScale),shapeFeed.lineTo(1*feedScale,0),shapeFeed.lineTo(2*feedScale,0),shapeFeed.lineTo(0,-1.5*feedScale),shapeFeed.lineTo(-2*feedScale,0),shapeFeed.lineTo(-1*feedScale,0),shapeFeed.lineTo(-1*feedScale,1.5*feedScale),0==drawingMode?feedHeight=50:feedHeight=20.01,geometryFeed=new THREE.ExtrudeGeometry(shapeFeed,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,20,0),new THREE.Vector3(0,feedHeight,0)])}),meshFeed=new THREE.Mesh(geometryFeed,materialFeed),1==feedDirection&&(meshFeed.rotation.y=3*Math.PI/2),meshFeed.position.set(0,0,-screenWidth/2-overLap1-2*feedScale),dimsGroup.add(meshFeed)),dimsGroup.add(dimsWidthGroup),dimsGroup.add(dimsSupportGroup),dimsGroup.add(dimsSpispaGroup),dimsGroup.add(dimsBoltGroup),screenMeshGroup.add(dimsGroup)}function hollowScreen(){1==overLap1||2==overLap1?topMargin=0:topMargin=50,1==overLap2||2==overLap2?bottomMargin=0:bottomMargin=50,geometryHolScreen=new THREE.CubeGeometry(meshEdge+meshEdgeR-140,2,screenWidth-topMargin-bottomMargin,1,1,1),meshHolScreen=new THREE.Mesh(geometryHolScreen,materialHollow),meshHolScreen.position.set(0,0,topMargin/2-bottomMargin/2),screentypeGroup.add(meshHolScreen),1!=overLap1&&2!=overLap1&&(geometryOV1=new THREE.CubeGeometry(meshEdge+meshEdgeR-140,2,50+overLap1,1,1,1),meshOV1Screen=new THREE.Mesh(geometryOV1,materialHollowOV1),0==overLap1?ladd=50:ladd=overLap1+50,meshOV1Screen.position.set(0,0,-(ladd/2-50+screenWidth/2)),screentypeGroup.add(meshOV1Screen)),1!=overLap2&&2!=overLap2&&(geometryOV2=new THREE.CubeGeometry(meshEdge+meshEdgeR-140,2,50+overLap2,1,1,1),meshOV2Screen=new THREE.Mesh(geometryOV2,materialHollowOV2),0==overLap2?radd=50:radd=overLap2+50,meshOV2Screen.position.set(0,0,radd/2-50+screenWidth/2),screentypeGroup.add(meshOV2Screen)),1!=hookSheets&&0!=hookType||(hookHeightH=Math.sin(hookAngle*Math.PI/180)*hookWidth+2*hookRadius+3*hookWire+4,hookHWidth=screenLength/2-meshEdge+70+hookWire/2+2,geometryHLH=new THREE.CubeGeometry(hookHWidth,hookHeightH,screenWidth,1,1,1),meshHookArrayL=[],meshHookArrayL[0]=new THREE.Mesh(geometryHLH,materialHookH),meshHookArrayL[0].position.set(70-meshEdge-hookHWidth/2,-upDownL*(hookHeightH/2-hookWire/2),0),hooksGroup.add(meshHookArrayL[0])),1!=hookSheets&&0!=hookTypeR||(hookHeightHR=Math.sin(hookAngleR*Math.PI/180)*hookWidthR+2*hookRadiusR+3*hookWireR+4,hookHWidthR=screenLength/2-meshEdgeR+70+hookWireR/2+2,geometryHRH=new THREE.CubeGeometry(hookHWidthR,hookHeightHR,screenWidth,1,1,1),meshHookArrayR=[],meshHookArrayR[0]=new THREE.Mesh(geometryHRH,materialHookH),meshHookArrayR[0].position.set(meshEdgeR-70+hookHWidthR/2,-upDownR*(hookHeightHR/2-hookWireR/2),0),hooksGroup.add(meshHookArrayR[0]))}function hollowscreenMesh(e){if(meshWireTemp=new THREE.Object3D,e&&9==e){0!==loadHOOKTYPE?leftWeld=20:leftWeld=0,0!==loadHOOKTYPER?rightWeld=20:rightWeld=0,plateLS=RscreenLength-leftWeld-rightWeld,plateFI=wireDiameter,plateWS=loadWS;var o=new THREE.Shape;o.moveTo(plateWS/2,-plateLS/2),o.lineTo(plateWS/2,plateLS/2),o.lineTo(-plateWS/2,plateLS/2),o.lineTo(-plateWS/2,-plateLS/2);var t=new THREE.Shape;for(t.moveTo(plateWS/2-300,-plateLS/2+300),t.lineTo(plateWS/2-300,plateLS/2-300),t.lineTo(-plateWS/2+300,plateLS/2-300),t.lineTo(-plateWS/2+300,-plateLS/2+300),o.holes.push(t),holscrGeometry=new THREE.ExtrudeGeometry(o,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,-plateFI/2,0),new THREE.Vector3(0,plateFI,0)])}),geom=holscrGeometry,areaT=0,z=0;z<geom.faces.length;z++)face=geom.faces[z],geom.faces[z].normal.y<0&&(tri=new THREE.Triangle(geom.vertices[face.a],geom.vertices[face.b],geom.vertices[face.c]),areaT+=tri.area()/1e6);alert("Pole powierzchni: "+Math.round(100*areaT)/100+" m2, Wymiary: "+Math.round(plateLS/1e3*100)/100+"x"+Math.round(plateWS/1e3*100)/100+"m")}else leftWeld=0,rightWeld=0,holscrGeometry=new THREE.BoxGeometry(meshEdge+meshEdgeR,wireDiameter,loadWS);meshWireClone=new THREE.Mesh(holscrGeometry,materialWire),meshWireClone.position.set(leftWeld/2-rightWeld/2,0,0),screentypeGroup.add(meshWireClone)}function wireMesh(){if(2==screentype&&1==perPar){for(crossCount=wireDiameter<=2?openingLength<=20?2:openingLength<=100?3:openingLength<=150?4:5:wireDiameter<=2.5?openingLength<=75?3:openingLength<=100?4:5:wireDiameter<=5?openingLength<=100?3:openingLength<=200?4:5:openingLength<=100?2:openingLength<=150?3:4,openingLength2=OW2,pfVar=openingLength2+wireDiameter,oczko=openingLength+wireDiameter+(crossCount-1)*pfVar,leftLimit=Math.floor(screenWidth/2/pfVar),rightLimit=Math.floor(screenWidth/2/pfVar),leftCrossStart=Math.floor(leftLimit/pfVar)-crossCount,crossArray=[],oczkoCount=1,zarobienieCount=0,alertC=0,fillStart=crossCount,fillEnd=crossCount,z=-leftLimit;z<=rightLimit;z++)z<=-leftLimit+fillStart||z>=rightLimit-fillEnd?crossArray[z]=1:z<=-leftLimit+fillStart+oczkoCount*Math.floor(oczko/pfVar)?z<=-leftLimit+fillStart+oczkoCount*Math.floor(oczko/pfVar)-crossCount?crossArray[z]=0:crossArray[z]=1:(crossArray[z]=0,oczkoCount+=1);openingLength2=openingWidth,openingWidth2=OW2}else 0==perPar&&2==screentype?(openingWidth2=openingWidth,openingLength2=OW2):1==perPar?(openingLength2=openingWidth,openingWidth2=openingLength):(openingLength2=openingLength,openingWidth2=openingWidth);if(meshWireArray=[],meshWireTemp=new THREE.Object3D,meshWireTempInv=new THREE.Object3D,meshWireArray=wirePath(meshWireArray,iterArc,openingLength2,openingWidth2,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,1,0,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireArray[1].material=materialWire,meshWireTemp.add(meshWireArray[0]),meshWireTempInv.add(meshWireArray[1]),1==drawingMode&&(meshWireArray[2].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[2]),meshWireArray[3].material=materialStrokeBlack,meshWireTempInv.add(meshWireArray[3])),jLimit=Math.floor((screenWidth/2-wireDiameter/2)/(openingWidth2+wireDiameter)),jLimitR=Math.floor((screenWidth/2-wireDiameter/2)/(openingWidth2+wireDiameter)),2==screentype&&1==perPar)for(j=-jLimit;j<=jLimitR;j++)1==crossArray[j]&&(j%2==0?meshWireClone=meshWireTemp.clone():meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*(openingWidth2+wireDiameter)),screentypeGroup.add(meshWireClone));else for(j=-jLimit;j<=jLimitR;j++)j%2==0?meshWireClone=meshWireTemp.clone():meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*(openingWidth2+wireDiameter)),screentypeGroup.add(meshWireClone);if(overLap1>5||overLap2>5){if(meshWireArray=[],meshWireTemp=new THREE.Object3D,meshWireTempInv=new THREE.Object3D,meshWireArray=wirePath(meshWireArray,iterArc,openingLength2,openingWidth2,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,1,1,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireArray[1].material=materialWire,meshWireTemp.add(meshWireArray[0]),meshWireTempInv.add(meshWireArray[1]),1==drawingMode&&(meshWireArray[2].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[2]),meshWireArray[3].material=materialStrokeBlack,meshWireTempInv.add(meshWireArray[3])),overLap1>5)for(jLimitO1=Math.floor((screenWidth/2+overLap1-wireDiameter/2)/(openingWidth2+wireDiameter)),j=-jLimitO1;j<-jLimit;j++)j%2==0?meshWireClone=meshWireTemp.clone():meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*(openingWidth2+wireDiameter)),screentypeGroup.add(meshWireClone);if(overLap2>5)for(jLimitO2=Math.floor((screenWidth/2+overLap2-wireDiameter/2)/(openingWidth2+wireDiameter)),j=jLimitR+1;j<=jLimitO2;j++)j%2==0?meshWireClone=meshWireTemp.clone():meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*(openingWidth2+wireDiameter)),screentypeGroup.add(meshWireClone)}}function straightharpMesh(e){for(triangleHeight=openingWidth/2/.41421356+3*wireDiameter,meshWireArray=[],meshWireArrayInv=[],meshWireTemp=new THREE.Object3D,meshWireTempInv=new THREE.Object3D,meshWireArray=wirePath(meshWireArray,iterArc,openingLength,openingWidth,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,2,0,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireArrayInv=wirePath(meshWireArrayInv,iterArc,openingLength,openingWidth,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,3,0,drawingMode,computeWire),meshWireArrayInv[0].material=materialWire,meshWireTemp.add(meshWireArray[0]),meshWireTempInv.add(meshWireArrayInv[0]),1==drawingMode&&(meshWireArray[1].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[1]),meshWireArrayInv[1].material=materialStrokeBlack,meshWireTempInv.add(meshWireArrayInv[1])),jLimit=Math.floor((screenWidth/2+wireDiameter-triangleHeight/2)/triangleHeight),j=-jLimit;j<=jLimit;j++)meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(0,0,j*triangleHeight),screentypeGroup.add(meshWireClone);if(0==e)for(jLimitS=Math.floor((screenWidth/2-triangleHeight/2)/triangleHeight),j=-jLimitS-1;j<=jLimitS;j++)meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*triangleHeight+triangleHeight/2),screentypeGroup.add(meshWireClone);if(overLap1>5||overLap2>5){if(meshWireArray=[],meshWireArrayInv=[],meshWireTemp=new THREE.Object3D,meshWireTempInv=new THREE.Object3D,meshWireArray=wirePath(meshWireArray,iterArc,openingLength,openingWidth,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,2,1,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireArrayInv=wirePath(meshWireArrayInv,iterArc,openingLength,openingWidth,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,3,1,drawingMode,computeWire),meshWireArrayInv[0].material=materialWire,meshWireTemp.add(meshWireArray[0]),meshWireTempInv.add(meshWireArrayInv[0]),1==drawingMode&&(meshWireArray[1].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[1]),meshWireArrayInv[1].material=materialStrokeBlack,meshWireTempInv.add(meshWireArrayInv[1])),overLap1>5){for(jLimitO1=Math.floor((screenWidth/2+overLap1+wireDiameter-triangleHeight/2)/triangleHeight),j=-jLimitO1;j<-jLimit;j++)meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(0,0,j*triangleHeight),screentypeGroup.add(meshWireClone);if(0==e)for(jLimitSO1=Math.floor((screenWidth/2+overLap1-triangleHeight/2)/triangleHeight),j=-jLimitSO1-1;j<-jLimitS;j++)meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*triangleHeight+triangleHeight/2),screentypeGroup.add(meshWireClone)}if(overLap2>5){for(jLimitO2=Math.floor((screenWidth/2+overLap2+wireDiameter-triangleHeight/2)/triangleHeight),j=jLimit+1;j<=jLimitO2;j++)meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(0,0,j*triangleHeight),screentypeGroup.add(meshWireClone);if(0==e)for(jLimitSO2=Math.floor((screenWidth/2+overLap2-triangleHeight/2)/triangleHeight),j=jLimitS+1;j<=jLimitSO2;j++)meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*triangleHeight+triangleHeight/2),screentypeGroup.add(meshWireClone)}}}function nostraightharpMesh(){for(meshWireArray=[],meshWireTemp=new THREE.Object3D,meshWireTempInv=new THREE.Object3D,meshWireArray=wirePath(meshWireArray,iterArc,openingLength,openingWidth,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,4,0,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireArray[1].material=materialWire,meshWireTemp.add(meshWireArray[0]),meshWireTempInv.add(meshWireArray[1]),1==drawingMode&&(meshWireArray[2].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[2]),meshWireArray[3].material=materialStrokeBlack,meshWireTempInv.add(meshWireArray[3])),triangleHeight=openingWidth/2*Math.sqrt(2)+wireDiameter,jLimitN=Math.floor((screenWidth/2+wireDiameter-triangleHeight/2)/triangleHeight),j=-jLimitN;j<=jLimitN;j++)j%2==0?meshWireClone=meshWireTemp.clone():meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*triangleHeight),screentypeGroup.add(meshWireClone);if(overLap1>5||overLap2>5){if(meshWireArray=[],meshWireTemp=new THREE.Object3D,meshWireTempInv=new THREE.Object3D,meshWireArray=wirePath(meshWireArray,iterArc,openingLength,openingWidth,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,4,1,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireArray[1].material=materialWire,meshWireTemp.add(meshWireArray[0]),meshWireTempInv.add(meshWireArray[1]),1==drawingMode&&(meshWireArray[2].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[2]),meshWireArray[3].material=materialStrokeBlack,meshWireTempInv.add(meshWireArray[3])),triangleHeight=openingWidth/2*Math.sqrt(2)+wireDiameter,overLap1>5)for(jLimitO1=Math.floor((screenWidth/2+overLap1+wireDiameter-triangleHeight/2)/triangleHeight),j=-jLimitO1;j<-jLimitN;j++)j%2==0?meshWireClone=meshWireTemp.clone():meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*triangleHeight),screentypeGroup.add(meshWireClone);if(overLap2>5)for(jLimitO2=Math.floor((screenWidth/2+overLap2+wireDiameter-triangleHeight/2)/triangleHeight),j=jLimitN+1;j<=jLimitO2;j++)j%2==0?meshWireClone=meshWireTemp.clone():meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(0,0,j*triangleHeight),screentypeGroup.add(meshWireClone)}}function straightMesh(){for(1==perPar&&3==screentype?(openingLength2=openingWidth,openingWidth2=openingLength):(openingLength2=openingLength,openingWidth2=openingWidth),meshWireArray=[],meshWireTemp=new THREE.Object3D,meshWireArray=wirePath(meshWireArray,iterArc,openingLength,openingWidth,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,3,0,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireTemp.add(meshWireArray[0]),1==drawingMode&&(meshWireArray[1].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[1])),jLimit=Math.floor((screenWidth/2-(openingWidth2+wireDiameter)/2)/(openingWidth2+wireDiameter)),j=-jLimit-1;j<=jLimit;j++)meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(0,0,j*(openingWidth2+wireDiameter)+(openingWidth2+wireDiameter)/2),screentypeGroup.add(meshWireClone);if(4!=screentype&&(overLap1>5||overLap2>5)){if(meshWireArray=[],meshWireTemp=new THREE.Object3D,meshWireArray=wirePath(meshWireArray,iterArc,openingLength,openingWidth,wireDiameter,hookAngle,hookWidth,hookRadius,hookSheet,hookWire,invY,hookAngleR,hookWidthR,hookRadiusR,hookSheetR,hookWireR,invYR,3,1,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireTemp.add(meshWireArray[0]),1==drawingMode&&(meshWireArray[1].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[1])),overLap1>5)for(jLimitO1=Math.floor((screenWidth/2+overLap1-(openingWidth2+wireDiameter)/2)/(openingWidth2+wireDiameter)),j=-jLimitO1-1;j<-jLimit-1;j++)meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(0,0,j*(openingWidth2+wireDiameter)+(openingWidth2+wireDiameter)/2),screentypeGroup.add(meshWireClone);if(overLap2>5)for(jLimitO2=Math.floor((screenWidth/2+overLap2-(openingWidth2+wireDiameter)/2)/(openingWidth2+wireDiameter)),j=jLimit+1;j<=jLimitO2;j++)meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(0,0,j*(openingWidth2+wireDiameter)+(openingWidth2+wireDiameter)/2),screentypeGroup.add(meshWireClone)}}function wireMeshCross(){if(2==screentype&&0==perPar){for(crossCount=wireDiameter<=2?openingLength<=20?2:openingLength<=100?3:openingLength<=150?4:5:wireDiameter<=2.5?openingLength<=75?3:openingLength<=100?4:5:wireDiameter<=5?openingLength<=100?3:openingLength<=200?4:5:openingLength<=100?2:openingLength<=150?3:4,openingLength2=OW2,pfVar=openingLength2+wireDiameter,oczko=openingLength+wireDiameter+(crossCount-1)*pfVar,leftLimit=Math.floor(screenRealLeft/pfVar),rightLimit=Math.floor(screenRealRight/pfVar),leftCrossStart=Math.floor((meshEdge-hookEntryWidth)/pfVar)-crossCount,currentSupport=0,crossArray=[],oczkoCount=0,zarobienieCount=crossCount-1,supportSum=supportArray[0],supportSumC=Math.round(supportSum/pfVar),fillEnd=0,alertC=0,wireDiameter>fiMaxInHooks?fillStart=Math.floor((screenRealLeft-meshEdge+hookEntryWidth)/pfVar)+crossCount:fillStart=Math.floor(80/pfVar)+crossCount-2,insertWire=0,z=-leftLimit;z<=rightLimit;z++)currentSupport==loadN?wireDiameter>fiMaxInHooks?fillEnd=Math.ceil((screenRealRight-meshEdgeR+hookEntryWidthR)/pfVar)+crossCount:fillEnd=Math.ceil(80/pfVar):supportArray[currentSupport]-Math.floor(supportArray[currentSupport]/pfVar)*pfVar<pfVar?fillEnd=Math.ceil(crossCount/2):fillEnd=Math.floor(crossCount/2),insertWire=1,0!==currentSupport?fillStartOne=0:fillStartOne=fillStart-1,z<-leftLimit+supportSumC-fillEnd?zarobienieCount==crossCount-1?(insertWire=1,zarobienieCount=0,oczkoCount+=1):(begin=-leftLimit+supportSumC-Math.floor(supportArray[currentSupport]/pfVar)+fillStartOne,z<begin+oczkoCount*Math.ceil(oczko/pfVar)-crossCount+1?insertWire=0:(insertWire=1,zarobienieCount+=1)):z==-leftLimit+supportSumC-fillEnd?(insertWire=1,zarobienieCount=0):zarobienieCount==crossCount-1?(insertWire=0,zarobienieCount=0,oczkoCount=1,currentSupport+=1,supportSum+=supportArray[currentSupport],supportSumC=Math.round(supportSum/pfVar)):zarobienieCount<crossCount-1?(insertWire=1,zarobienieCount+=1):insertWire=0,crossArray[z]=insertWire;for(z=-leftLimit;z<-leftLimit+fillStart;z++)crossArray[z]=1;openingWidth2=openingWidth,openingWidthP=openingWidth,openingLength2=OW2}else 1==perPar&&2==screentype?(openingLength2=openingWidth,openingWidth2=openingLength,openingWidthP=OW2):1==perPar?(openingLength2=openingWidth,openingWidth2=openingLength,openingWidthP=openingLength):(openingLength2=openingLength,openingWidth2=openingWidth,openingWidthP=openingWidth);if(meshWireArray=[],meshWireArray=wirePathCross(meshWireArray,openingLength2,openingWidthP,wireDiameter,1,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireArray[1].material=materialWire,meshWireTemp=new THREE.Object3D,meshWireTempInv=new THREE.Object3D,meshWireTemp.add(meshWireArray[0]),meshWireTempInv.add(meshWireArray[1]),1==drawingMode&&(meshWireArray[2].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[2]),meshWireArray[3].material=materialStrokeBlack,meshWireTempInv.add(meshWireArray[3])),0==loadHOOKTYPE?wireOutCancel=0:wireOutCancel=1,0==loadHOOKTYPER?wireOutCancelR=0:wireOutCancelR=1,hookSheets<=1?(loadFI>fiMaxInHooks?(crossWireOut=hookEntryWidth*wireOutCancel,crossWireOutR=hookEntryWidthR*wireOutCancelR):(crossWireOut=0,crossWireOutR=0),jLimit=Math.floor((meshEdge-wireDiameter/2-crossWireOut)/(openingLength2+wireDiameter)),jLimitR=Math.floor((meshEdgeR-wireDiameter/2-crossWireOutR)/(openingLength2+wireDiameter))):(jLimit=Math.floor((meshEdge-wireDiameter/2-openingLength2-(hookEntryWidth*wireOutCancel-weldOverlap))/(openingLength2+wireDiameter)),jLimitR=Math.floor((meshEdgeR-wireDiameter/2-openingLength2-(hookEntryWidthR*wireOutCancelR-weldOverlap))/(openingLength2+wireDiameter))),polFaza=openingLength2+wireDiameter,C=0,2==screentype&&0==perPar)for(j=-jLimit;j<=jLimitR;j++)1==crossArray[j]&&(j%2==0?(meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(j*polFaza,0,0)):(meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(j*polFaza,0,0)),screentypeGroup.add(meshWireClone));else for(j=-jLimit;j<=jLimitR;j++)j%2==0?(meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(j*polFaza,0,0)):(meshWireClone=meshWireTempInv.clone(),meshWireClone.position.set(j*polFaza,0,0)),screentypeGroup.add(meshWireClone)}function straightMeshCross(e){for(1==perPar&&3==screentype?(openingLength2=openingWidth,openingWidth2=openingLength):(openingLength2=openingLength,openingWidth2=openingWidth),meshWireArray=[],meshWireArray=wirePathCross(meshWireArray,openingLength2,openingWidth2,wireDiameter,2,drawingMode,computeWire),meshWireArray[0].material=materialWire,meshWireTemp=new THREE.Object3D,meshWireTemp.add(meshWireArray[0]),1==drawingMode&&(meshWireArray[1].material=materialStrokeBlack,meshWireTemp.add(meshWireArray[1])),0==loadHOOKTYPE?wireOutCancel=0:wireOutCancel=1,0==loadHOOKTYPER?wireOutCancelR=0:wireOutCancelR=1,jLimit=Math.floor((meshEdge-wireDiameter/2-hookEntryWidth*wireOutCancel)/(openingLength2+wireDiameter)),jLimitR=Math.floor((meshEdgeR-wireDiameter/2-hookEntryWidthR*wireOutCancelR)/(openingLength2+wireDiameter)),polFaza=openingLength2+wireDiameter,C=0,j=-jLimit;j<=jLimitR;j++)meshWireClone=meshWireTemp.clone(),meshWireClone.position.set(j*polFaza,e*wireDiameter*.75,0),screentypeGroup.add(meshWireClone),C++}function drawLine(e,o,t,a){path[path.length]=[t*Math.cos(a*Math.PI/180)+e,t*Math.sin(a*Math.PI/180)+o]}function drawCircle(e,o,t,a){for(mark=Math.round(Math.abs(t)/t),A=hookLine[i-1][2],a0=(a-A)/iterArc,rn=Math.abs(t*Math.cos(a0/2*Math.PI/180)),mark,w0=Math.abs(2*rn*Math.tan(a0/2*Math.PI/180)),LP=A+mark*a0/2,j=1;j<=iterArc;j++)i==iterArc?(LP+=mark*a0,path[path.length]=[w0*Math.cos(LP*Math.PI/180)+path[path.length-1][0],w0*Math.sin(LP*Math.PI/180)+path[path.length-1][1]]):(LP+=-mark*a0,path[path.length]=[w0*Math.cos(LP*Math.PI/180)+path[path.length-1][0],w0*Math.sin(LP*Math.PI/180)+path[path.length-1][1]])}function drawHookLine(e){for(hookLine=[],L=0,z=0,angleAdd=0,i=0;i<hookShape.length;i++)0!=i&&2==hookShape[i-1][0]&&Math.abs(hookShape[i-1][1])/hookShape[i-1][1]==1&&(angleAdd+=2*hookShape[i-1][2]),hookLine[i]=[hookShape[i][0],hookShape[i][1],L+hookShape[i][2]-angleAdd],0==i?Marker=-1:Marker=-Math.abs(hookShape[i-1][1])/hookShape[i-1][1],L-=Marker*hookShape[i][2]}function drawHookShape(){for(hookLine=[],path=[],hookShape=[],hookShape[0]=[1,hookEntryWidth,180],hookShape[1]=[2,-hookRadius,180-hookAngle],hookShape[2]=[1,hookWidth,0],hookShape[3]=[2,hookWire*crimpDivider/2+hookSheet,180],hookShape[4]=[1,hookWidth,0],hookShape[5]=[2,hookRadius+2*hookSheet+hookWire*crimpDivider,180-hookAngle],hookShape[6]=[1,hookEntryWidth,0],drawHookLine(1),path=[],path[0]=[0,0],i=0;i<hookLine.length;i++)mark=Math.abs(hookLine[i][1])/hookLine[i][1],1==hookLine[i][0]?drawLine(path[path.length-1][0],path[path.length-1][1],hookLine[i][1],hookLine[i][2]):drawCircle(path[path.length-1][0],path[path.length-1][1],hookLine[i][1],hookLine[i][2])}function drawHookWireShape(){for(4==loadSCREENTYPE?(0==drawingMode?(R1=0==hookRadius?.01:hookRadius,hookWireT=hookWire,hookSheetT=hookSheet,r=.01):(R1=0==hookRadius?.01:hookRadius,hookWireT=hookWire,hookSheetT=hookSheet+2*pencilWeight,r=.01),rH=r+hookSheetT,R2=R1+hookSheetT,R3=R2+hookWireT,R4=R3+hookSheetT,R5=R4+2*r,R6=R5+hookSheetT,R7=R6+hookWireT,R8=R7+hookSheetT,R9=R8+2*r,R10=R9+hookSheetT,rU=(2*r+hookSheetT+hookWireT)/2,RU=rU+hookSheetT,rB=(4*r+2*hookWireT+3*hookSheetT)/2,RB=rB+hookSheetT,RW=R6+hookWireT/2,E=hookEntryWidth,hookHeight>0?H=hookHeight-2*hookRadius:H=0,Em=hookEntryWidth-.01-hookWire/2-hookSheet,1==hookWidthInner?W=hookWidth-2*hookSheet-hookWire-.01:W=hookWidth-2*hookSheet-hookWire-.01-5*hookSheet-2*hookWire-.04-hookRadius,RW2=R2+hookWireT/2,RWM=rH+hookWireT/2,hookShape=[],hookShape[hookShape.length]=[1,E,180],hookHeight>0?(hookShape[hookShape.length]=[2,-RW,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-RW,90-hookAngle]):hookShape[hookShape.length]=[2,-RW,180-hookAngle],hookShape[hookShape.length]=[1,W,0],hookShape[hookShape.length]=[2,-RWM,180],hookShape[hookShape.length]=[1,W,0],hookHeight>0?(hookShape[hookShape.length]=[2,RW2,90-hookAngle],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,RW2,90]):hookShape[hookShape.length]=[2,RW2,180-hookAngle],hookShape[hookShape.length]=[1,Em,0]):(0==flatScreen?(HhookWire=HhookWireR=hookWire,HhookSheet=hookSheet,HhookSheetR=hookSheetR,HcrimpDivider=crimpDivider):(HhookWire=HhookWireR=RhookWire,HhookSheet=HhookSheetR=blacha,HcrimpDivider=RcrimpDivider),hookShape=[],loadFI<=1&&(hookWidth>0||hookAngle>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE)||loadFI<=3&&1==loadDOUBLEFOLD&&(hookWidth>0||hookAngle>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE)?loadDOUBLEFOLD=1:loadDOUBLEFOLD=0,1==loadDOUBLEFOLD?NOS=hookWidth/2:NOS=0,NOS>20&&(NOS=20),0!==hookWidth?NOS>0?1==hookWidthInner?W=hookWidth-2*HhookSheet-HhookWire*HcrimpDivider:W=hookWidth-2*HhookSheet-HhookWire*HcrimpDivider-HhookWire*HcrimpDivider-2*HhookSheet-hookRadius:1==hookWidthInner?W=hookWidth-HhookSheet-HhookWire*HcrimpDivider/2:W=hookWidth-HhookSheet-HhookWire*HcrimpDivider/2-HhookWire*HcrimpDivider-2*HhookSheet-hookRadius:W=0,hookHeight>0?H=hookHeight-2*hookRadius:H=0,0==drawingMode||1==flatScreen?(r=.01,R=hookRadius+HhookSheet+HhookWire*HcrimpDivider/2,RN=r+HhookSheet+HhookWire*HcrimpDivider/2):(r=.01+pencilWeight,R=hookRadius+hookSheet+2*pencilWeight+hookWire*crimpDivider/2,RN=r+hookSheet+pencilWeight+hookWire*crimpDivider/2),E=hookEntryWidth,hookShape[hookShape.length]=[1,E,180],0!==W&&(H>0?(hookShape[hookShape.length]=[2,-R,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R,90-hookAngle]):hookShape[hookShape.length]=[2,-R,180-hookAngle],hookShape[hookShape.length]=[1,W,0],0!==NOS&&(hookShape[hookShape.length]=[2,RN,180],hookShape[hookShape.length]=[1,NOS,0]))),drawHookLine(1),path=[],path[0]=[0,0],i=0;i<hookLine.length;i++)mark=Math.abs(hookLine[i][1])/hookLine[i][1],1==hookLine[i][0]?drawLine(path[path.length-1][0],path[path.length-1][1],hookLine[i][1],hookLine[i][2]):drawCircle(path[path.length-1][0],path[path.length-1][1],hookLine[i][1],hookLine[i][2]);for(pathL=[],pathL=pathL.concat(path),pathL.reverse(),4==loadSCREENTYPE?(0==drawingMode?(R1=0==hookRadiusR?.01:hookRadiusR,hookWireT=hookWireR,hookSheetT=hookSheetR,r=.01):(R1=0==hookRadiusR?.01:hookRadiusR,hookWireT=hookWireR,hookSheetT=hookSheetR+2*pencilWeight,r=.01),rH=r+hookSheetT,R2=R1+hookSheetT,R3=R2+hookWireT,R4=R3+hookSheetT,R5=R4+2*r,R6=R5+hookSheetT,R7=R6+hookWireT,R8=R7+hookSheetT,R9=R8+2*r,R10=R9+hookSheetT,rU=(2*r+hookSheetT+hookWireT)/2,RU=rU+hookSheetT,rB=(4*r+2*hookWireT+3*hookSheetT)/2,RB=rB+hookSheetT,RW=R6+hookWireT/2,E=hookEntryWidthR,hookHeightR>0?H=hookHeightR-2*hookRadiusR:H=0,Em=hookEntryWidthR-.01-hookWireR/2-hookSheetR,1==hookWidthInnerR?W=hookWidthR-2*hookSheetR-hookWireR-.01:W=hookWidthR-2*hookSheetR-hookWireR-.01-5*hookSheetR-2*hookWireR-.04-hookRadiusR,RW2=R2+hookWireT/2,RWM=rH+hookWireT/2,hookShape=[],hookShape[hookShape.length]=[1,E,180],hookHeightR>0?(hookShape[hookShape.length]=[2,-RW,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-RW,90-hookAngleR]):hookShape[hookShape.length]=[2,-RW,180-hookAngleR],hookShape[hookShape.length]=[1,W,0],hookShape[hookShape.length]=[2,-RWM,180],hookShape[hookShape.length]=[1,W,0],hookHeightR>0?(hookShape[hookShape.length]=[2,RW2,90-hookAngleR],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,RW2,90]):hookShape[hookShape.length]=[2,RW2,180-hookAngleR],hookShape[hookShape.length]=[1,Em,0]):(0==flatScreen?(HhookWire=HhookWireR=hookWire,HhookSheet=hookSheet,HhookSheetR=hookSheetR,HcrimpDivider=crimpDivider):(HhookWire=HhookWireR=RhookWire,HhookSheet=HhookSheetR=blacha,HcrimpDivider=RcrimpDivider),hookShape=[],loadFI<=1&&(hookWidthR>0||hookAngleR>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE)||loadFI<=3&&1==loadDOUBLEFOLDR&&(hookWidthR>0||hookAngleR>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE)?loadDOUBLEFOLDR=1:loadDOUBLEFOLDR=0,1==loadDOUBLEFOLDR?NOS=hookWidthR/2:NOS=0,NOS>20&&(NOS=20),0!==hookWidthR?NOS>0?1==hookWidthInnerR?W=hookWidthR-2*HhookSheetR-HhookWireR*HcrimpDivider:W=hookWidthR-2*HhookSheetR-HhookWireR*HcrimpDivider-HhookWireR*HcrimpDivider-2*HhookSheetR-hookRadiusR:1==hookWidthInnerR?W=hookWidthR-HhookSheetR-HhookWireR*HcrimpDivider/2:W=hookWidthR-HhookSheetR-HhookWireR*HcrimpDivider/2-HhookWireR*HcrimpDivider-2*HhookSheetR-hookRadiusR:W=0,E=hookEntryWidthR,hookHeightR>0?H=hookHeightR-2*hookRadiusR:H=0,0==drawingMode||1==flatScreen?(r=.01,R=hookRadiusR+HhookSheetR+HhookWireR*HcrimpDivider/2,RN=r+HhookSheetR+HhookWireR*HcrimpDivider/2):(r=.01+pencilWeight,R=hookRadiusR+hookSheetR+2*pencilWeight+hookWireR*crimpDivider/2,RN=r+hookSheetR+pencilWeight+hookWireR*crimpDivider/2),hookShape[hookShape.length]=[1,E,180],0!==W&&(H>0?(hookShape[hookShape.length]=[2,-R,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R,90-hookAngleR]):hookShape[hookShape.length]=[2,-R,180-hookAngleR],hookShape[hookShape.length]=[1,W,0],0!==NOS&&(hookShape[hookShape.length]=[2,RN,180],hookShape[hookShape.length]=[1,NOS,0]))),drawHookLine(1),path=[],path[0]=[0,0],i=0;i<hookLine.length;i++)mark=Math.abs(hookLine[i][1])/hookLine[i][1],1==hookLine[i][0]?drawLine(path[path.length-1][0],path[path.length-1][1],hookLine[i][1],hookLine[i][2]):drawCircle(path[path.length-1][0],path[path.length-1][1],hookLine[i][1],hookLine[i][2]);pathR=[],pathR=pathR.concat(path)}function drawHook(e,o,t,a,l,n,d,s,h,m,p,c,S,g,u,y){function T(){for(drawHookLine(1),path=[],path[0]=[0,0],i=0;i<hookLine.length;i++)mark=Math.abs(hookLine[i][1])/hookLine[i][1],1==hookLine[i][0]?drawLine(path[path.length-1][0],path[path.length-1][1],hookLine[i][1],hookLine[i][2]):drawCircle(path[path.length-1][0],path[path.length-1][1],hookLine[i][1],hookLine[i][2])}function R(o){if(shapeHook=new THREE.Shape,0==hookSheets?4==loadSCREENTYPE?(0==o?(r=.01,hookWireT=p,hookSheetT=m,R1=0==n?r:n):1==o?(r=.01,hookWireT=p,hookSheetT=m+2*y,R1=0==n?r:n):2==o&&(r=.01+y,hookWireT=p+2*y,hookSheetT=m,R1=0==n?r:n+y),H=l>0?l-2*n:0,rH=r+hookSheetT,R2=R1+hookSheetT,R3=R2+hookWireT,R4=R3+hookSheetT,R5=R4+2*r,R6=R5+hookSheetT,R7=R6+hookWireT,R8=R7+hookSheetT,R9=R8+2*r,R10=R9+hookSheetT,rU=(2*r+hookSheetT+hookWireT)/2,RU=rU+hookSheetT,rB=(2*hookWireT+4*r+3*hookSheetT)/2,RB=rB+hookSheetT,Em=d-.01-p/2-m,E=d,W=1==s?a-2*m-p-.01:a-2*m-p-.01-5*m-2*p-.04-n,Y=2*r+hookSheetT+hookWireT/2,X=Em):(h=loadFI<=1&&(a>0||t>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE)||loadFI<=3&&1==h&&(a>0||t>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE)?1:0,NOS=1==h?a/2:0,NOS>20&&(NOS=20),NOS>0?W=1==s?a-2*m-p:a-2*m-p-p-2*m-n:W=1==s?a-m-p/2:a-m-p/2-p-2*m-n,0==o?(r=.01,hookWireT=p,hookSheetT=m,R1=0==n?r:n):1==o?(r=.01,hookWireT=p,hookSheetT=m+2*y,R1=0==n?r:n):2==o&&(r=.01+y,hookWireT=p+2*y,hookSheetT=m,R1=0==n?r:n+y),R2=R1+hookSheetT,R3=R2+hookWireT,R4=R3+hookSheetT,r1=hookWireT/2,r2=r1+hookSheetT,dr1=hookWireT+hookSheetT+r,dr2=dr1+hookSheetT,dr1m=hookSheetT+r,dr2m=r,E=d,H=l>0?l-2*n:0,Y=hookWireT/2,YI=hookWireT/2+hookSheetT):2==hookSheets&&(0==o?(hookWireT=p,hookSheetT=m,R1=0==n?.01:n):1==o?(hookSheetT=m+2*y,R1=0==n?.01:n):2==o&&(hookSheetT=m,R1=0==n?.01+y:n+y),H=l>0?l-2*n:0,E=d,R2=R1+hookSheetT,W=1==s?a-m/2:a-m/2-n-m,Y=hookSheetT/2),4==loadSCREENTYPE)for(hookShape=[],hookShape[hookShape.length]=[1,Em,180],H>0?(hookShape[hookShape.length]=[2,-R4,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R4,90-t]):hookShape[hookShape.length]=[2,-R4,180-t],hookShape[hookShape.length]=[1,W,0],hookShape[hookShape.length]=[2,r,180],hookShape[hookShape.length]=[1,W,0],H>0?(hookShape[hookShape.length]=[2,R5,90-t],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,R5,90]):hookShape[hookShape.length]=[2,R5,180-t],hookShape[hookShape.length]=[1,Em,0],hookShape[hookShape.length]=[2,rU,180],hookShape[hookShape.length]=[1,Em,0],H>0?(hookShape[hookShape.length]=[2,-R2,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R2,90-t]):hookShape[hookShape.length]=[2,-R2,180-t],hookShape[hookShape.length]=[1,W,0],hookShape[hookShape.length]=[2,rB,180],hookShape[hookShape.length]=[1,W,0],H>0?(hookShape[hookShape.length]=[2,R9,90-t],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,R9,90]):hookShape[hookShape.length]=[2,R9,180-t],hookShape[hookShape.length]=[1,E-.01-m,0],hookShape[hookShape.length]=[2,r,180],hookShape[hookShape.length]=[1,E-.01-m,0],H>0?(hookShape[hookShape.length]=[2,-R8,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R8,90-t]):hookShape[hookShape.length]=[2,-R8,180-t],hookShape[hookShape.length]=[1,W-m/2,0],hookShape[hookShape.length]=[2,-hookSheetT/2,180],hookShape[hookShape.length]=[1,W-m/2,0],H>0?(hookShape[hookShape.length]=[2,R7,90-t],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,R7,90]):hookShape[hookShape.length]=[2,R7,180-t],hookShape[hookShape.length]=[1,E-.01-m,0],hookShape[hookShape.length]=[2,-rH,180],hookShape[hookShape.length]=[1,E-.01-m,0],H>0?(hookShape[hookShape.length]=[2,-R10,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R10,90-t]):hookShape[hookShape.length]=[2,-R10,180-t],hookShape[hookShape.length]=[1,W,0],hookShape[hookShape.length]=[2,-RB,180],hookShape[hookShape.length]=[1,W,0],H>0?(hookShape[hookShape.length]=[2,R1,90-t],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,R1,90]):hookShape[hookShape.length]=[2,R1,180-t],hookShape[hookShape.length]=[1,Em,0],hookShape[hookShape.length]=[2,-RU,180],hookShape[hookShape.length]=[1,Em,0],H>0?(hookShape[hookShape.length]=[2,-R6,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R6,90-t]):hookShape[hookShape.length]=[2,-R6,180-t],hookShape[hookShape.length]=[1,W,0],hookShape[hookShape.length]=[2,-rH,180],hookShape[hookShape.length]=[1,W,0],H>0?(hookShape[hookShape.length]=[2,R3,90-t],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,R3,90]):hookShape[hookShape.length]=[2,R3,180-t],hookShape[hookShape.length]=[1,Em,0],T(),pathPiano=[],pathPiano=pathPiano.concat(path),shapeHook.moveTo(c*(0+X),S*(0-Y)),i=0;i<pathPiano.length;i++)shapeHook.lineTo(c*(pathPiano[i][0]+X),S*(pathPiano[i][1]-Y));else if(0==hookSheets){for(hookShape=[],hookShape[hookShape.length]=[1,E,180],6==e&&2==hookSheets||9==e?hookShape[hookShape.length]=[2,r1,180]:(H>0?(hookShape[hookShape.length]=[2,-R2,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R2,90-t]):hookShape[hookShape.length]=[2,-R2,180-t],hookShape[hookShape.length]=[1,W,0],0==NOS?hookShape[hookShape.length]=[2,r1,180]:(hookShape[hookShape.length]=[2,dr1,180],hookShape[hookShape.length]=[1,NOS,0],hookShape[hookShape.length]=[2,r1,180],hookShape[hookShape.length]=[1,NOS,0],hookShape[hookShape.length]=[2,-dr1m,180]),hookShape[hookShape.length]=[1,W,0],H>0?(hookShape[hookShape.length]=[2,R3,90-t],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,R3,90]):hookShape[hookShape.length]=[2,R3,180-t]),hookShape[hookShape.length]=[1,E,0],T(),pathInner=[],pathInner=pathInner.concat(path),hookShape=[],hookShape[hookShape.length]=[1,E,180],6==e&&2==hookSheets||9==e?hookShape[hookShape.length]=[2,r2,180]:(H>0?(hookShape[hookShape.length]=[2,-R1,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R1,90-t]):hookShape[hookShape.length]=[2,-R1,180-t],hookShape[hookShape.length]=[1,W,0],0==NOS?hookShape[hookShape.length]=[2,r2,180]:(hookShape[hookShape.length]=[2,dr2,180],hookShape[hookShape.length]=[1,NOS,0],hookShape[hookShape.length]=[2,r2,180],hookShape[hookShape.length]=[1,NOS,0],hookShape[hookShape.length]=[2,-dr2m,180]),hookShape[hookShape.length]=[1,W,0],H>0?(hookShape[hookShape.length]=[2,R4,90-t],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,R4,90]):hookShape[hookShape.length]=[2,R4,180-t]),hookShape[hookShape.length]=[1,E,0],T(),pathOuter=[],pathOuter=pathOuter.concat(path),pathOuter.reverse(),shapeHook.moveTo(c*(0+E),S*(0-Y)),i=0;i<pathInner.length;i++)shapeHook.lineTo(c*(pathInner[i][0]+E),S*(pathInner[i][1]-Y));for(i=0;i<pathOuter.length;i++)shapeHook.lineTo(c*(pathOuter[i][0]+E),S*(pathOuter[i][1]-YI))}else if(2==hookSheets)for(hookShape=[],hookShape[hookShape.length]=[1,E,180],6==e||9==e?hookShape[hookShape.length]=[2,hookSheetT/2,180]:(H>0?(hookShape[hookShape.length]=[2,-R1,90],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,-R1,90-t]):hookShape[hookShape.length]=[2,-R1,180-t],hookShape[hookShape.length]=[1,W,0],hookShape[hookShape.length]=[2,hookSheetT/2,180],hookShape[hookShape.length]=[1,W,0],H>0?(hookShape[hookShape.length]=[2,R2,90-t],hookShape[hookShape.length]=[1,H,0],hookShape[hookShape.length]=[2,R2,90]):hookShape[hookShape.length]=[2,R2,180-t]),hookShape[hookShape.length]=[1,E,0],T(),shapeHook.moveTo(c*(0+E),S*(0-Y)),i=0;i<path.length;i++)shapeHook.lineTo(c*(path[i][0]+E),S*(path[i][1]-Y))}return stroke=0,0==u?(R(0),geometryHook=new THREE.ExtrudeGeometry(shapeHook,{steps:1,amount:screenWidth,bevelEnabled:!1}),1==loadHOOKSMATERIAL&&(hookColor="0x88AAAA",materialHook.color.setHex(hookColor)),meshHook=new THREE.Mesh(geometryHook,materialHook),1==computeWire&&meshHook.geometry.computeVertexNormals(),o[0]=meshHook):(R(2),geometryHookI=new THREE.ExtrudeGeometry(shapeHook,{steps:1,amount:screenWidth-2*y,bevelEnabled:!1}),meshHookI=new THREE.Mesh(geometryHookI,materialHook),meshHookI.position.set(0,0,y),o[0]=meshHookI,R(1),geometryHookS=new THREE.ExtrudeGeometry(shapeHook,{steps:1,amount:screenWidth,bevelEnabled:!1}),meshHookS=new THREE.Mesh(geometryHookS,materialStrokeBlack),o[1]=meshHookS),o}function drawWire(e,o,t,a,l){for(xArc=[],yArc=[],xArc=[a+o],yArc=[0+t],alfaIter=360/l,e.moveTo(xArc[0],yArc[0]),i=1;i<=l;i++)xArc[i]=Math.cos(alfaIter*i*Math.PI/180)*a+o,yArc[i]=Math.sin(alfaIter*i*Math.PI/180)*a+t,e.lineTo(xArc[i],yArc[i]);e.lineTo(xArc[0],yArc[0])}function drawBolt(e,o,t,a,l){for(xArc=[],yArc=[],xArc=[a+o],yArc=[0+t],alfaIter=360/l,e.moveTo(xArc[0],yArc[0]),i=1;i<=l;i++)xArc[i]=Math.cos(alfaIter*i*Math.PI/180)*a+o,yArc[i]=Math.sin(alfaIter*i*Math.PI/180)*a+t,e.lineTo(xArc[i],yArc[i]);e.lineTo(xArc[0],yArc[0])}function drawPathWire(){for(drawHookWireShape(),pathl=0,pathr=0,i=1;i<pathL.length;i++)x0=pathL[i-1][0],y0=pathL[i-1][1],x1=pathL[i][0],y1=pathL[i][1],x=x0-x1,y=y0-y1,pathl+=Math.sqrt(x*x+y*y);for(pathl-=hookEntryWidth,i=1;i<pathR.length;i++)x0=pathR[i-1][0],y0=pathR[i-1][1],x1=pathR[i][0],y1=pathR[i][1],x=x0-x1,y=y0-y1,pathr+=Math.sqrt(x*x+y*y);pathr-=hookEntryWidthR}function makeWaves(align,openingWidth,openingLength,wireDiameter){if(macXY=[],macXYinv=[],0==align?(9==loadHOOKTYPE&&0==loadHOOKTYPE||(mac=macL.concat(mac)),9==loadHOOKTYPER&&0==loadHOOKTYPER||(mac=mac.concat(macR)),dia=wireDiameter,ol=openingLength,ow=openingWidth,pf=eval(wavedim),fala1=[],fala2=[],fala1=fala1.concat(waveset),f1=[],f2=[],iStart=-Math.ceil(screenLhLength/pf)-1,iStop=Math.ceil(screenRhLength/pf)+1,iStartDivider=-Math.floor((meshEdge-hookEntryWidth-dia)/pf),iStopDivider=Math.floor((meshEdgeR-hookEntryWidthR-dia)/pf)):(dia=wireDiameter,ol=openingLength,ow=openingWidth,pf=eval(wavedim),fala1=[],fala2=[],fala1=fala1.concat(waveset),f1=[],f2=[],iStart=-Math.ceil((screenWidth/2+overLap1)/pf)-3,iStop=Math.ceil((screenWidth/2+overLap2)/pf)+3,iStartDivider=iStart,iStopDivider=iStop),0==eval(waveset[0][0])){for(fala2=fala2.concat(waveset),i=0;i<waveset.length;i++)f1[i]=[],f2[i]=[],f1[i][0]=eval(fala1[i][0]),f1[i][1]=eval(fala1[i][1]),f2[i][0]=eval(fala2[i][0]),f2[i][1]=eval(fala2[i][1]);inv=-1}else{for(fala2=fala2.concat(waveset.reverse()),i=0;i<waveset.length;i++)f1[i]=[],f2[i]=[],f1[i][0]=eval(fala1[i][0]),f1[i][1]=eval(fala1[i][1]),f2[i][0]=pf-eval(fala2[i][0]),f2[i][1]=eval(fala2[i][1]);inv=1}for(i=iStart;i<iStop;i++)if(i<iStartDivider||i>=iStopDivider?CD=crimpDivider:CD=1,i%2==0)for(z=0;z<f1.length;z++)1==invcheck&&(macXYinv[macXYinv.length]=[i*pf+f2[z][0],inv*f2[z][1]*CD]),macXY[macXY.length]=[i*pf+f1[z][0],f1[z][1]*CD];else for(z=0;z<f2.length;z++)macXY[macXY.length]=[i*pf+f2[z][0],f2[z][1]*CD],1==invcheck&&(macXYinv[macXYinv.length]=[i*pf+f1[z][0],inv*f1[z][1]*CD])}function wirePath(o,t,a,l,r,n,d,h,m,p,c,E,S,g,u,T,R,k,H,O,W){if(geometryWireL=new THREE.Geometry,geometryWireM=new THREE.Geometry,geometryWireR=new THREE.Geometry,pathArray=[],pathArrayInv=[],zTemp=a/2,yTemp=r/2/Math.sin(Math.atan(r/a)),wireYdist=yTemp-zTemp,wireY=r/2-wireYdist,polFaza=a+r,drawPathWire(),hookSheets<=1?0==H?(9!=loadHOOKTYPE||0!=loadHOOKTYPE?screenLhLength=meshEdge+pathl:screenLhLength=meshEdge,9!=loadHOOKTYPER||0!=loadHOOKTYPER?screenRhLength=meshEdgeR+pathr:screenRhLength=meshEdgeR):(loadFI>fiMaxInHooks||3==loadSCREENTYPE?(crossWireOut=hookEntryWidth,crossWireOutR=hookEntryWidthR):(crossWireOut=0,crossWireOutR=0),screenLhLength=meshEdge-crossWireOut,screenRhLength=meshEdgeR-crossWireOutR):(0==hookType?screenLhLength=meshEdge+r/2:screenLhLength=meshEdge-hookEntryWidth+weldOverlap,0==hookTypeR?screenRhLength=meshEdgeR+r/2:screenRhLength=meshEdgeR-hookEntryWidthR+weldOverlap),macL=[],macL.length=0,mac=[],mac.length=0,macR=[],macR.length=0,hookSheets<=1)if(0==H){if(0!=d)for(xPosition=-meshEdge+hookEntryWidth,i=1;i<pathL.length-1;i++)i==pathL.length-2&&3==k?(x0=pathL[i-1][0],y0=pathL[i-1][1],x1=pathL[i][0]+r,y1=pathL[i][1],x=x0-x1,y=y0-y1,alfa=180*Math.atan(y/x)/Math.PI-90,s=-meshEdge-pathl,e=-meshEdge-pathl+Math.sqrt(x*x+y*y)+r):(x0=pathL[i-1][0],y0=pathL[i-1][1],x1=pathL[i][0],y1=pathL[i][1],x=x0-x1,y=y0-y1,alfa=180*Math.atan(y/x)/Math.PI-90,s=-meshEdge-pathl,e=-meshEdge-pathl+Math.sqrt(x*x+y*y)),1==i&&(rdimS=s),macL[macL.length]=[s,e,alfa,x0+xPosition,y0,x1+xPosition,y1],pathl-=Math.sqrt(x*x+y*y);else rdimS=-meshEdge;if(3==k?(mac[mac.length]=[-meshEdge,hookEntryWidth/3-meshEdge,90,-meshEdge,0,hookEntryWidth/3-meshEdge,0],mac[mac.length]=[hookEntryWidth/3-meshEdge,-meshEdge+hookEntryWidth,90,hookEntryWidth/3-meshEdge,0,-meshEdge+hookEntryWidth,0],mac[mac.length]=[-meshEdge+hookEntryWidth,+meshEdgeR-hookEntryWidthR,90,-meshEdge+hookEntryWidth,0,+meshEdgeR-hookEntryWidthR,0],mac[mac.length]=[+meshEdgeR-hookEntryWidthR,+meshEdgeR-hookEntryWidthR/3,90,+meshEdgeR-hookEntryWidthR,0,+meshEdgeR-hookEntryWidthR/3,0],mac[mac.length]=[+meshEdgeR-hookEntryWidthR/3,+meshEdgeR,90,+meshEdgeR-hookEntryWidthR/3,0,+meshEdgeR,0]):(mac[mac.length]=[-meshEdge,-meshEdge+hookEntryWidth,90,-meshEdge,0,-meshEdge+hookEntryWidth,0],mac[mac.length]=[-meshEdge+hookEntryWidth,+meshEdgeR-hookEntryWidthR,90,-meshEdge+hookEntryWidth,0,+meshEdgeR-hookEntryWidthR,0],mac[mac.length]=[+meshEdgeR-hookEntryWidthR,+meshEdgeR,90,+meshEdgeR-hookEntryWidthR,0,+meshEdgeR,0]),0!=S)for(xPosition=meshEdgeR-hookEntryWidthR,previous=0,i=1;i<pathR.length-1;i++)x0=pathR[i][0],y0=pathR[i][1],x1=pathR[i+1][0],y1=pathR[i+1][1],x=x0-x1,y=y0-y1,alfa=180*Math.atan(y/x)/Math.PI-90,s=meshEdgeR+previous,e=s+Math.sqrt(x*x+y*y),macR[macR.length]=[s,e,alfa,-x0+xPosition,y0,-x1+xPosition,y1],previous+=Math.sqrt(x*x+y*y),i==pathR.length-2&&(rdimE=e);else rdimE=meshEdgeR}else mac[mac.length]=[-screenLhLength,+screenRhLength,90,-screenLhLength,0,screenRhLength,0];else mac=[],mac.length=0,0==hookType?leftZero=0:leftZero=1,0==hookTypeR?rightZero=0:rightZero=1,mac[mac.length]=[-meshEdge+hookEntryWidth*leftZero-weldOverlap*leftZero,+meshEdgeR-hookEntryWidthR*rightZero+weldOverlap*rightZero,90,-meshEdge+hookEntryWidth*leftZero-weldOverlap*leftZero,0,+meshEdgeR-hookEntryWidthR*rightZero+weldOverlap*rightZero,0];function P(e){0==flatScreen&&90!=alfaBis&&(startPoint-endPoint==0?x=0:x=(X0*(x-endPoint)-X1*(x-startPoint))/(startPoint-endPoint),X1-X0==0?y=e*(Y0+y*Math.sin(alfaBis*Math.PI/180)):y=e*(x*((Y1-Y0)/(X1-X0))+(Y0-(Y1-Y0)/(X1-X0)*X0)+y*Math.sin(alfaBis*Math.PI/180)))}if(1==k?(7==loadSCREENTYPE?(crimpType=2,waveset=[],waveset[waveset.length]=["ol","dia/2-((dia/2)/Math.sin(Math.atan(dia/ol))-ol/2)"],waveset[waveset.length]=["dia/2+ol","-dia/2+((dia/2)/Math.sin(Math.atan(dia/ol))-ol/2)"],wavedim="dia+ol",invcheck=1):loadFI<=loadOL/5&&2!==loadSCREENTYPE?(crimpType=1,waveset=[],waveset[waveset.length]=["dia/2","dia/2-((dia/2)/Math.sin(Math.atan(dia/ol))-ol/2)"],waveset[waveset.length]=["(ol+dia)/3","0"],waveset[waveset.length]=["2*(ol+dia)/3","0"],waveset[waveset.length]=["dia/2+ol","-dia/2+((dia/2)/Math.sin(Math.atan(dia/ol))-ol/2)"],wavedim="dia+ol",invcheck=1):(crimpType=0,waveset=[],waveset[waveset.length]=["dia/2","dia/2-((dia/2)/Math.sin(Math.atan(dia/ol))-ol/2)"],waveset[waveset.length]=["dia/2+ol","-dia/2+((dia/2)/Math.sin(Math.atan(dia/ol))-ol/2)"],wavedim="dia+ol",invcheck=1),XZwave=0,makeWaves(0,l,a,r)):2==k?(waveset=[],waveset[waveset.length]=["0","(((ow/2)/0.41421356)/2 + dia/2)"],waveset[waveset.length]=["(ow/2)/0.41421356","-(((ow/2)/0.41421356)/2 + dia/2)"],wavedim="2*((ow/2)/0.41421356)",invcheck=0,XZwave=1,makeWaves(0,l,a,r)):4==k&&(waveset=[],waveset[waveset.length]=["0","(ow/2)*Math.sqrt(2)/2"],waveset[waveset.length]=["(((ow/2)*Math.sqrt(2))+dia/2)","-(ow/2)*Math.sqrt(2)/2"],wavedim="2*(((ow/2)*Math.sqrt(2))+dia/2)",invcheck=1,XZwave=1,makeWaves(0,l,a,r)),1==O?(shapeWire=new THREE.Shape,shapeWireOutline=new THREE.Shape,drawWire(shapeWire,0,0,r/2,iterWire),4==loadSCREENTYPE?(loadOW,drawWire(shapeWireOutline,0,0,(r+pencilWeight)/2,iterWire)):drawWire(shapeWireOutline,0,0,(r+pencilWeight)/2,iterWire)):(shapeWire=new THREE.Shape,drawWire(shapeWire,0,0,r/2,iterWire)),i=0,ii=0,1==k){for(z=0;z<mac.length;z++){if(startPoint=mac[z][0],endPoint=mac[z][1],alfaBis=mac[z][2],X0=mac[z][3],Y0=mac[z][4],X1=mac[z][5],Y1=mac[z][6],startPoint<0?upDown=upDownL:upDown=upDownR,0==z)for(j=0;j<macXY.length&&startPoint>=macXY[i][0];j++)i++;if(startPoint<macXY[i][0]&&(x0=macXY[i-1][0],x1=macXY[i][0],y0=macXY[i-1][1],y1=macXY[i][1],x=startPoint,yz=0,y=(y1-y0)*(x-x0)/(x1-x0)+y0,P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz)),1==invcheck){if(0==z)for(j=0;j<macXYinv.length&&startPoint>=macXYinv[ii][0];j++)ii++;startPoint<macXYinv[ii][0]&&(x0=macXYinv[ii-1][0],x1=macXYinv[ii][0],y0=macXYinv[ii-1][1],y1=macXYinv[ii][1],x=startPoint,yz=0,y=(y1-y0)*(x-x0)/(x1-x0)+y0,P(upDown),pathArrayInv[pathArrayInv.length]=new THREE.Vector3(x,y,yz))}for(;macXY[i][0]<endPoint;)x=macXY[i][0],yz=0,y=macXY[i][1],(Math.abs(x-startPoint)>2*r||z==mac.length-1||Math.abs(x-endPoint)>2*r||0==z)&&(P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz)),i++;if(1==invcheck)for(;macXYinv[ii][0]<endPoint;)x=macXYinv[ii][0],yz=0,y=macXYinv[ii][1],(Math.abs(x-startPoint)>2*r||z==mac.length-1||Math.abs(x-endPoint)>2*r||0==z)&&(P(upDown),pathArrayInv[pathArrayInv.length]=new THREE.Vector3(x,y,yz)),ii++;z==mac.length-1&&macXY[i][0]>=endPoint&&(x=endPoint,yz=0,x0=macXY[i-1][0],x1=macXY[i][0],y0=macXY[i-1][1],y1=macXY[i][1],y=(y1-y0)*(x-x0)/(x1-x0)+y0,P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz)),1==invcheck&&z==mac.length-1&&macXYinv[ii][0]>=endPoint&&(x=endPoint,yz=0,x0=macXYinv[ii-1][0],x1=macXYinv[ii][0],y0=macXYinv[ii-1][1],y1=macXYinv[ii][1],y=(y1-y0)*(x-x0)/(x1-x0)+y0,P(upDown),pathArrayInv[pathArrayInv.length]=new THREE.Vector3(x,y,yz))}path=new THREE.CatmullRomCurve3(pathArray),2==crimpType?(path.type="catmullrom",path.tension=.1,geometryWire=new THREE.ExtrudeGeometry(shapeWire,{steps:Math.round(1.5*wireDetails),extrudePath:path})):geometryWire=new THREE.ExtrudeGeometry(shapeWire,{steps:wireDetails,extrudePath:path}),meshWire=new THREE.Mesh(geometryWire),1==O&&(geometryWireOutline=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:wireDetails,extrudePath:path}),meshWireOutline=new THREE.Mesh(geometryWireOutline)),pathInv=new THREE.CatmullRomCurve3(pathArrayInv),2==crimpType?(pathInv.type="catmullrom",pathInv.tension=.1,geometryWireInv=new THREE.ExtrudeGeometry(shapeWire,{steps:Math.round(1.5*wireDetails),extrudePath:pathInv})):geometryWireInv=new THREE.ExtrudeGeometry(shapeWire,{steps:wireDetails,extrudePath:pathInv}),meshWireInv=new THREE.Mesh(geometryWireInv),1==O&&(geometryWireOutlineInv=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:wireDetails,extrudePath:pathInv}),meshWireOutlineInv=new THREE.Mesh(geometryWireOutlineInv))}else if(3==k){for(pathArray=[],z=0;z<mac.length;z++)startPoint=mac[z][0],endPoint=mac[z][1],pathArray[pathArray.length]=new THREE.Vector3(startPoint,0,0),pathArray[pathArray.length]=new THREE.Vector3(endPoint,0,0);for(pathArray.length>0&&(path=new THREE.CatmullRomCurve3(pathArray),geometryWireM=new THREE.ExtrudeGeometry(shapeWire,{steps:1,extrudePath:path}),1==O&&(geometryWireMOutline=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:1,extrudePath:path}),3==loadSCREENTYPE&&(wireBSPOutline=new ThreeBSP(new THREE.Mesh(geometryWireMOutline))))),pathArray=[],z=0;z<macL.length;z++)startPoint=macL[z][0],endPoint=macL[z][1],alfaBis=macL[z][2],X0=macL[z][3],Y0=macL[z][4],X1=macL[z][5],Y1=macL[z][6],startPoint<0?upDown=upDownL:upDown=upDownR,x=startPoint,y=0,yz=0,P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz),z==macL.length-1&&(x=endPoint,y=0,yz=0,P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz));for(pathArray.length>0&&(path=new THREE.CatmullRomCurve3(pathArray),geometryWireL=new THREE.ExtrudeGeometry(shapeWire,{steps:hookwireSteps,extrudePath:path}),geometryWireM.merge(geometryWireL),1==O&&(geometryWireLOutline=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:hookwireSteps,extrudePath:path}),3==loadSCREENTYPE?(wireLBSPOutline=new ThreeBSP(new THREE.Mesh(geometryWireLOutline)),wireBSPOutline=wireLBSPOutline.union(wireBSPOutline)):geometryWireMOutline.merge(geometryWireLOutline))),pathArray=[],z=0;z<macR.length;z++)startPoint=macR[z][0],endPoint=macR[z][1],alfaBis=macR[z][2],X0=macR[z][3],Y0=macR[z][4],X1=macR[z][5],Y1=macR[z][6],startPoint<0?upDown=upDownL:upDown=upDownR,x=startPoint,y=0,yz=0,P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz),z==macR.length-1&&(x=endPoint,y=0,yz=0,P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz));pathArray.length>0&&(path=new THREE.CatmullRomCurve3(pathArray),geometryWireR=new THREE.ExtrudeGeometry(shapeWire,{steps:hookwireSteps,extrudePath:path}),geometryWireM.merge(geometryWireR),1==O&&(geometryWireROutline=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:hookwireSteps,extrudePath:path}),3==loadSCREENTYPE?(wireRBSPOutline=new ThreeBSP(new THREE.Mesh(geometryWireROutline)),wireBSPOutline=wireRBSPOutline.union(wireBSPOutline)):geometryWireMOutline.merge(geometryWireROutline))),meshWire=new THREE.Mesh(geometryWireM),1==O&&(3==loadSCREENTYPE?meshWireOutline=wireBSPOutline.toMesh():meshWireOutline=new THREE.Mesh(geometryWireMOutline))}else if(2==k||4==k){for(z=0;z<mac.length;z++){if(startPoint=mac[z][0],endPoint=mac[z][1],alfaBis=mac[z][2],X0=mac[z][3],Y0=mac[z][4],X1=mac[z][5],Y1=mac[z][6],startPoint<0?upDown=upDownL:upDown=upDownR,0==z)for(j=0;j<macXY.length&&startPoint>=macXY[i][0];j++)i++;if(startPoint<macXY[i][0]&&(x0=macXY[i-1][0],x1=macXY[i][0],y0=macXY[i-1][1],y1=macXY[i][1],x=startPoint,y=0,yz=(y1-y0)*(x-x0)/(x1-x0)+y0,P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz)),1==invcheck){if(0==z)for(j=0;j<macXYinv.length&&startPoint>=macXYinv[ii][0];j++)ii++;startPoint<macXYinv[ii][0]&&(x0=macXYinv[ii-1][0],x1=macXYinv[ii][0],y0=macXYinv[ii-1][1],y1=macXYinv[ii][1],x=startPoint,y=0,yz=(y1-y0)*(x-x0)/(x1-x0)+y0,P(upDown),pathArrayInv[pathArrayInv.length]=new THREE.Vector3(x,y,yz))}for(;macXY[i][0]<endPoint;)x=macXY[i][0],y=0,yz=macXY[i][1],(Math.abs(x-startPoint)>2*r||z==mac.length-1||Math.abs(x-endPoint)>2*r||0==z)&&(P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz)),i++;if(1==invcheck)for(;macXYinv[ii][0]<endPoint;)x=macXYinv[ii][0],y=0,yz=macXYinv[ii][1],(Math.abs(x-startPoint)>2*r||z==mac.length-1||Math.abs(x-endPoint)>2*r||0==z)&&(P(upDown),pathArrayInv[pathArrayInv.length]=new THREE.Vector3(x,y,yz)),ii++;z==mac.length-1&&macXY[i][0]>=endPoint&&(x=endPoint,y=0,x0=macXY[i-1][0],x0=macXY[i][0],y0=macXY[i-1][1],y1=macXY[i][1],x1-x0==0?yz=y0:yz=(y1-y0)*(x-x0)/(x1-x0)+y0,P(upDown),pathArray[pathArray.length]=new THREE.Vector3(x,y,yz)),1==invcheck&&z==mac.length-1&&macXYinv[ii][0]>=endPoint&&(x=endPoint,y=0,x0=macXYinv[ii-1][0],x0=macXYinv[ii][0],y0=macXYinv[ii-1][1],y1=macXYinv[ii][1],x1-x0==0?yz=y0:yz=(y1-y0)*(x-x0)/(x1-x0)+y0,P(upDown),pathArrayInv[pathArrayInv.length]=new THREE.Vector3(x,y,yz))}path=new THREE.CatmullRomCurve3(pathArray),geometryWire=new THREE.ExtrudeGeometry(shapeWire,{steps:wireDetails,extrudePath:path}),meshWire=new THREE.Mesh(geometryWire),1==O&&(geometryWireOutline=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:wireDetails,extrudePath:path}),meshWireOutline=new THREE.Mesh(geometryWireOutline)),1==invcheck&&(pathInv=new THREE.CatmullRomCurve3(pathArrayInv),geometryWireInv=new THREE.ExtrudeGeometry(shapeWire,{steps:wireDetails,extrudePath:pathInv}),meshWireInv=new THREE.Mesh(geometryWireInv),1==O&&(geometryWireOutlineInv=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:wireDetails,extrudePath:pathInv}),meshWireOutlineInv=new THREE.Mesh(geometryWireOutlineInv)))}return 1==W&&0==O&&(meshWire.geometry.computeFaceNormals(),meshWire.geometry.computeVertexNormals(),1!=k&&4!=k||(meshWireInv.geometry.computeFaceNormals(),meshWireInv.geometry.computeVertexNormals())),[],1==k||4==k?1==O?[meshWire,meshWireInv,meshWireOutline,meshWireOutlineInv]:[meshWire,meshWireInv]:1==O?[meshWire,meshWireOutline]:[meshWire]}function wirePathCross(e,o,t,a,l,r,n){if(pathArray=[],pathArrayInv=[],1==r?(shapeWire=new THREE.Shape,shapeWireOutline=new THREE.Shape,drawWire(shapeWire,0,0,a/2,iterWire),drawWire(shapeWireOutline,0,0,(a+pencilWeight)/2,iterWire)):(shapeWire=new THREE.Shape,drawWire(shapeWire,0,0,a/2,iterWire)),1==l){for(7==loadSCREENTYPE?(crimpType=2,waveset=[],waveset[waveset.length]=["dia/2","-dia/2+((dia/2)/Math.sin(Math.atan(dia/ow))-ow/2)"],waveset[waveset.length]=["dia","dia/2-((dia/2)/Math.sin(Math.atan(dia/ow))-ow/2)"],wavedim="dia+ow",invcheck=1):loadFI<=loadOW/5&&2!==loadSCREENTYPE?(crimpType=1,waveset=[],waveset[waveset.length]=["dia/2","-dia/2+((dia/2)/Math.sin(Math.atan(dia/ow))-ow/2)"],waveset[waveset.length]=["(ow+dia)/3","0"],waveset[waveset.length]=["2*(ow+dia)/3","0"],waveset[waveset.length]=["dia/2+ow","dia/2-((dia/2)/Math.sin(Math.atan(dia/ow))-ow/2)"],wavedim="dia+ow",invcheck=1):(crimpType=0,waveset=[],waveset[waveset.length]=["dia/2","-dia/2+((dia/2)/Math.sin(Math.atan(dia/ow))-ow/2)"],waveset[waveset.length]=["dia/2+ow","dia/2-((dia/2)/Math.sin(Math.atan(dia/ow))-ow/2)"],wavedim="dia+ow",invcheck=1),XZwave=0,makeWaves(1,t,o,a),i=0,ii=0,startPoint=-screenWidth/2-overLap1,endPoint=screenWidth/2+overLap2,j=0;j<macXY.length&&startPoint>=macXY[i][0];j++)i++;if(startPoint<macXY[i][0]&&(x0=macXY[i-1][0],x1=macXY[i][0],y0=macXY[i-1][1],y1=macXY[i][1],x=startPoint,yz=0,y=(y1-y0)*(x-x0)/(x1-x0)+y0,pathArray[pathArray.length]=new THREE.Vector3(yz,y,x)),1==invcheck){for(j=0;j<macXYinv.length&&startPoint>=macXYinv[ii][0];j++)ii++;startPoint<macXYinv[ii][0]&&(x0=macXYinv[ii-1][0],x1=macXYinv[ii][0],y0=macXYinv[ii-1][1],y1=macXYinv[ii][1],x=startPoint,yz=0,y=(y1-y0)*(x-x0)/(x1-x0)+y0,pathArrayInv[pathArrayInv.length]=new THREE.Vector3(yz,y,x))}for(;macXY[i][0]<endPoint;)x=macXY[i][0],yz=0,y=macXY[i][1],pathArray[pathArray.length]=new THREE.Vector3(yz,y,x),i++;if(1==invcheck)for(;macXYinv[ii][0]<endPoint;)x=macXYinv[ii][0],yz=0,y=macXYinv[ii][1],pathArrayInv[pathArrayInv.length]=new THREE.Vector3(yz,y,x),ii++;macXY[i][0]>=endPoint&&(x=endPoint,yz=0,x0=macXY[i-1][0],x1=macXY[i][0],y0=macXY[i-1][1],y1=macXY[i][1],y=(y1-y0)*(x-x0)/(x1-x0)+y0,pathArray[pathArray.length]=new THREE.Vector3(yz,y,x)),1==invcheck&&macXYinv[ii][0]>=endPoint&&(x=endPoint,yz=0,x0=macXYinv[ii-1][0],x1=macXYinv[ii][0],y0=macXYinv[ii-1][1],y1=macXYinv[ii][1],y=(y1-y0)*(x-x0)/(x1-x0)+y0,pathArrayInv[pathArrayInv.length]=new THREE.Vector3(yz,y,x)),path=new THREE.CatmullRomCurve3(pathArray),2==crimpType?(path.type="catmullrom",path.tension=.1,geometryWire=new THREE.ExtrudeGeometry(shapeWire,{steps:Math.round(1.5*wireDetailsCross),extrudePath:path})):geometryWire=new THREE.ExtrudeGeometry(shapeWire,{steps:wireDetailsCross,extrudePath:path}),meshWire=new THREE.Mesh(geometryWire),1==r&&(geometryWireOutline=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:wireDetailsCross,extrudePath:path}),meshWireOutline=new THREE.Mesh(geometryWireOutline)),pathInv=new THREE.CatmullRomCurve3(pathArrayInv),2==crimpType?(pathInv.type="catmullrom",pathInv.tension=.1,geometryWireInv=new THREE.ExtrudeGeometry(shapeWire,{steps:Math.round(1.5*wireDetailsCross),extrudePath:pathInv})):geometryWireInv=new THREE.ExtrudeGeometry(shapeWire,{steps:wireDetailsCross,extrudePath:pathInv}),meshWireInv=new THREE.Mesh(geometryWireInv),1==r&&(geometryWireOutlineInv=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:wireDetailsCross,extrudePath:pathInv}),meshWireOutlineInv=new THREE.Mesh(geometryWireOutlineInv))}else 2==l&&(wireY=0,Xzero=-screenWidth/2-overLap1,Xend=screenWidth/2+overLap2,pathArray[pathArray.length]=new THREE.Vector3(0,wireY,Xzero),pathArray[pathArray.length]=new THREE.Vector3(0,wireY,Xend),path=new THREE.CatmullRomCurve3(pathArray),geometryWire=new THREE.ExtrudeGeometry(shapeWire,{steps:1,extrudePath:path}),meshWire=new THREE.Mesh(geometryWire),1==r&&(geometryWireOutline=new THREE.ExtrudeGeometry(shapeWireOutline,{steps:1,extrudePath:path}),meshWireOutline=new THREE.Mesh(geometryWireOutline)));return 1==n&&0==r&&(meshWire.geometry.computeFaceNormals(),meshWire.geometry.computeVertexNormals(),1==l&&(meshWireInv.geometry.computeFaceNormals(),meshWireInv.geometry.computeVertexNormals())),[],1==l?1==r?[meshWire,meshWireInv,meshWireOutline,meshWireOutlineInv]:[meshWire,meshWireInv]:1==r?[meshWire,meshWireOutline]:[meshWire]}function drawHookBackup(e,o,t,a,l,r,n,d,s,h){function m(o,t,a,l,r,n){for(xArc=[],yArc=[],alfaIter=(r-l)/n,xArc=[d*Math.cos(l*Math.PI/180)*a+o],yArc=[Math.sin(l*Math.PI/180)*a+t],e.lineTo(xArc[0],h*yArc[0]),i=1;i<=n;i++)xArc[i]=d*Math.cos((l+alfaIter*i)*Math.PI/180)*a+o,yArc[i]=Math.sin((l+alfaIter*i)*Math.PI/180)*a+t,e.lineTo(xArc[i],h*yArc[i])}iterArcMin=3,44==screentype?(xCenter=0,yCenter=-(a+r+n/2),blockOneY=yCenter+(a+3*r+2*n),radiusArc=a+3*r+2*n,radiusArcZ=r+n/2,yZadd=r+n/2,radiusTemp=n+1.5*r,blockOneX=xCenter+d*l,angleArc=270-o,e.moveTo(blockOneX,h*blockOneY),m(xCenter,yCenter,radiusArc,90,angleArc,s),xTempStart=d*Math.cos(angleArc*Math.PI/180)*radiusArc+xCenter,yTempStart=Math.sin(angleArc*Math.PI/180)*radiusArc+yCenter,blockTwoX=d*Math.cos((90+angleArc)*Math.PI/180)*(t-r-n)+xTempStart,blockTwoY=Math.sin((90+angleArc)*Math.PI/180)*(t-r-n)+yTempStart,e.lineTo(blockTwoX,h*blockTwoY),xTempStart=d*Math.abs(Math.cos(angleArc*Math.PI/180)*radiusTemp)+blockTwoX,yTempStart=Math.abs(Math.sin(angleArc*Math.PI/180)*radiusTemp)+blockTwoY,m(xTempStart,yTempStart,radiusTemp,angleArc,angleArc+180,s),xTempStart=d*Math.abs(Math.cos(angleArc*Math.PI/180)*radiusTemp)*2+blockTwoX,yTempStart=2*Math.abs(Math.sin(angleArc*Math.PI/180)*radiusTemp)+blockTwoY,blockThreeX=-d*Math.abs(Math.cos((90+angleArc)*Math.PI/180)*(t-r-n))+xTempStart,blockThreeY=Math.abs(Math.sin((90+angleArc)*Math.PI/180)*(t-r-n))+yTempStart,e.lineTo(blockThreeX,h*blockThreeY),m(xCenter,yCenter,a,angleArc,90,s),blockOneXE=xCenter+d*(l-n/2-r),blockOneYE=yCenter+a,e.lineTo(blockOneXE,h*blockOneYE),radiusTempE=n/2+r,yTempStartE=yCenter+a+r+n/2,m(blockOneXE,yTempStartE,radiusTempE,270,450,iterArcMin),e.lineTo(xCenter,h*(blockOneYE+2*r+n)),radiusArc2=a+2*r+n,m(xCenter,yCenter,radiusArc2,90,angleArc,s),xTempStart=d*Math.cos(angleArc*Math.PI/180)*radiusArc2+xCenter,yTempStart=Math.sin(angleArc*Math.PI/180)*radiusArc2+yCenter,blockTwoX=d*Math.cos((90+angleArc)*Math.PI/180)*(t-r-n)+xTempStart,blockTwoY=Math.sin((90+angleArc)*Math.PI/180)*(t-r-n)+yTempStart,e.lineTo(blockTwoX,h*blockTwoY),radiusTemp=r/2,xTempStart=-d*Math.abs(Math.cos(angleArc*Math.PI/180)*radiusTemp)+blockTwoX,yTempStart=-Math.abs(Math.sin(angleArc*Math.PI/180)*radiusTemp)+blockTwoY,m(xTempStart,yTempStart,radiusTemp,angleArc,angleArc+180,iterArcMin),xTempStart=-d*Math.abs(Math.cos(angleArc*Math.PI/180)*radiusTemp)*2+blockTwoX,yTempStart=2*-Math.abs(Math.sin(angleArc*Math.PI/180)*radiusTemp)+blockTwoY,blockThreeX=-d*Math.abs(Math.cos((90+angleArc)*Math.PI/180)*(t-r-n))+xTempStart,blockThreeY=Math.abs(Math.sin((90+angleArc)*Math.PI/180)*(t-r-n))+yTempStart,e.lineTo(blockThreeX,h*blockThreeY),radiusArc3=a+r+n,m(xCenter,yCenter,radiusArc3,angleArc,90,s),blockOneX=xCenter+d*(l-n/2-r),blockOneY=yCenter+a+r+n,e.lineTo(blockOneX,h*blockOneY),radiusTempE=n/2,yTempStartE=yCenter+a+r+n/2,m(blockOneX,yTempStartE,radiusTempE,90,-90,iterArcMin),blockOneY=yCenter+a+r,e.lineTo(xCenter,h*blockOneY),radiusArc3=a+r,m(xCenter,yCenter,radiusArc3,90,angleArc,s),xTempStart=d*Math.cos(angleArc*Math.PI/180)*radiusArc3+xCenter,yTempStart=Math.sin(angleArc*Math.PI/180)*radiusArc3+yCenter,blockTwoX=d*Math.cos((90+angleArc)*Math.PI/180)*(t-r-n)-xTempStart,blockTwoY=Math.sin((90+angleArc)*Math.PI/180)*(t-r-n)-yTempStart,e.lineTo(blockTwoX,h*blockTwoY),blockOneX=xCenter+d*l,e.lineTo(blockOneX,h*blockOneY)):(0==hookSheets?(xCenter=0,yCenter=-(a+r+n*crimpDivider/2),blockOneY=yCenter+(a+2*r+n*crimpDivider),radiusArc=a+2*r+n*crimpDivider,radiusArcZ=r+n*crimpDivider/2,yZadd=r+n*crimpDivider/2,radiusTemp=n*crimpDivider/2+r):2==hookSheets&&(xCenter=0,yCenter=-(a+r/2),blockOneY=yCenter+(a+r),radiusArc=a+r,radiusArcZ=r/2,yZadd=r/2,radiusTemp=r/2),blockOneX=xCenter+d*l,angleArc=270-o,e.moveTo(blockOneX,h*blockOneY),0==t?m(xCenter,h*(yCenter+yZadd),radiusArcZ,90,270,s):(m(xCenter,yCenter,radiusArc,90,angleArc,s),xTempStart=d*Math.cos(angleArc*Math.PI/180)*radiusArc+xCenter,yTempStart=Math.sin(angleArc*Math.PI/180)*radiusArc+yCenter,blockTwoX=d*Math.cos((90+angleArc)*Math.PI/180)*t+xTempStart,blockTwoY=Math.sin((90+angleArc)*Math.PI/180)*t+yTempStart,e.lineTo(blockTwoX,h*blockTwoY),xTempStart=d*Math.abs(Math.cos(angleArc*Math.PI/180)*radiusTemp)+blockTwoX,yTempStart=Math.abs(Math.sin(angleArc*Math.PI/180)*radiusTemp)+blockTwoY,m(xTempStart,yTempStart,radiusTemp,angleArc,angleArc+180,iterArcMin),xTempStart=d*Math.abs(Math.cos(angleArc*Math.PI/180)*radiusTemp)*2+blockTwoX,yTempStart=2*Math.abs(Math.sin(angleArc*Math.PI/180)*radiusTemp)+blockTwoY,blockThreeX=-d*Math.abs(Math.cos((90+angleArc)*Math.PI/180)*t)+xTempStart,blockThreeY=Math.abs(Math.sin((90+angleArc)*Math.PI/180)*t)+yTempStart,e.lineTo(blockThreeX,h*blockThreeY),m(xCenter,yCenter,a,angleArc,90,s)),blockOneX=xCenter+d*l,blockOneY=yCenter+a,e.lineTo(blockOneX,h*blockOneY),0==hookSheets&&(e.lineTo(blockOneX,h*(blockOneY+r)),0==t?m(xCenter,yCenter+yZadd,radiusArcZ-r,270,90,s):(radiusArc2=a+r,m(xCenter,yCenter,radiusArc2,90,angleArc,s),xTempStart=d*Math.cos(angleArc*Math.PI/180)*radiusArc2+xCenter,yTempStart=Math.sin(angleArc*Math.PI/180)*radiusArc2+yCenter,blockTwoX=d*Math.cos((90+angleArc)*Math.PI/180)*t+xTempStart,blockTwoY=Math.sin((90+angleArc)*Math.PI/180)*t+yTempStart,e.lineTo(blockTwoX,h*blockTwoY),radiusTemp=n*crimpDivider/2,xTempStart=-d*Math.abs(Math.cos(angleArc*Math.PI/180)*radiusTemp)+blockTwoX,yTempStart=-Math.abs(Math.sin(angleArc*Math.PI/180)*radiusTemp)+blockTwoY,m(xTempStart,yTempStart,radiusTemp,angleArc+180,angleArc,iterArcMin),xTempStart=-d*Math.abs(Math.cos(angleArc*Math.PI/180)*radiusTemp)*2+blockTwoX,yTempStart=2*-Math.abs(Math.sin(angleArc*Math.PI/180)*radiusTemp)+blockTwoY,blockThreeX=-d*Math.abs(Math.cos((90+angleArc)*Math.PI/180)*t)+xTempStart,blockThreeY=Math.abs(Math.sin((90+angleArc)*Math.PI/180)*t)+yTempStart,e.lineTo(blockThreeX,h*blockThreeY),radiusArc3=a+r+n*crimpDivider,m(xCenter,yCenter,radiusArc3,angleArc,90,s)),blockOneX=xCenter+d*l,blockOneY=yCenter+a+r+n*crimpDivider,e.lineTo(blockOneX,h*blockOneY)),blockOneX=xCenter+d*l,e.lineTo(blockOneX,h*blockOneY))}function drawSeal(e,o,t,a){1==o?t<2||2==t&&a<=8?(e.moveTo(0,hookWire/2),e.lineTo(-16,hookWire/2),e.lineTo(-16,hookWire/2+2.5),e.lineTo(-11.5,hookWire/2+12),e.lineTo(0,hookWire/2+22.5),e.lineTo(16,hookWire/2+26),e.lineTo(5,hookWire/2+21),e.lineTo(-2.5,hookWire/2+12),e.lineTo(-7,hookWire/2+2.5),e.lineTo(0,hookWire/2+2.5),e.lineTo(3,hookWire/2),e.lineTo(3,-hookWire/2),e.lineTo(0,-hookWire/2-2.5),e.lineTo(-16,-hookWire/2-2.5),e.lineTo(-16,-hookWire/2),e.lineTo(0,-hookWire/2),e.lineTo(0,hookWire/2)):(e.moveTo(0,hookWire/2),e.lineTo(-33,hookWire/2),e.lineTo(-7,hookWire/2+30),e.lineTo(22,hookWire/2+40),e.lineTo(22,hookWire/2+38),e.lineTo(0,hookWire/2+26),e.lineTo(-15,hookWire/2+3),e.lineTo(3,hookWire/2+3),e.lineTo(3,-hookWire/2-3),e.lineTo(-25,-hookWire/2-3),e.lineTo(-25,-hookWire/2),e.lineTo(0,-hookWire/2),e.lineTo(0,hookWire/2)):2==o&&(t<=1.5?(e.moveTo(0,hookWire/2),e.lineTo(-23,hookWire/2),e.lineTo(-23,hookWire/2+3),e.lineTo(0,hookWire/2+3),e.lineTo(32,0),e.lineTo(0,-hookWire/2-3),e.lineTo(-23,-hookWire/2-3),e.lineTo(-23,-hookWire/2),e.lineTo(0,-hookWire/2),e.lineTo(0,hookWire/2)):(e.moveTo(0,hookWire/2),e.lineTo(-30,hookWire/2),e.lineTo(-30,hookWire/2+3),e.lineTo(0,hookWire/2+3),e.lineTo(35,0),e.lineTo(0,-hookWire/2-3),e.lineTo(-30,-hookWire/2-3),e.lineTo(-30,-hookWire/2),e.lineTo(0,-hookWire/2),e.lineTo(0,hookWire/2)))}function drawBlackStrip(e){yCorrection=6+wireDiameter/2,e.moveTo(-2,0+yCorrection),e.lineTo(-5,-1.5+yCorrection),e.lineTo(-5,-2+yCorrection),e.lineTo(-2,-2+yCorrection),e.lineTo(-2,-4+yCorrection),e.lineTo(-4,-4+yCorrection),e.lineTo(-4,-6+yCorrection),e.lineTo(4,-6+yCorrection),e.lineTo(4,-4+yCorrection),e.lineTo(2,-4+yCorrection),e.lineTo(2,-2+yCorrection),e.lineTo(5,-2+yCorrection),e.lineTo(5,-1.5+yCorrection),e.lineTo(2,0+yCorrection),e.lineTo(-2,0+yCorrection)}function drawWhiteStrip(e,o){yCorrection=4+wireDiameter/2,e.lineTo(-4,-4+yCorrection),e.lineTo(-4,-2+yCorrection),e.lineTo(-2,-2+yCorrection),e.moveTo(-2,0+yCorrection),e.lineTo(-7,0+yCorrection),e.lineTo(-6,-5+yCorrection),1==o?(e.lineTo(-8,-8+yCorrection),e.lineTo(-12,-11+yCorrection),e.lineTo(-15,-18+yCorrection),e.lineTo(-13,-18+yCorrection),e.lineTo(-9,-13+yCorrection),e.lineTo(0,-9+yCorrection),e.lineTo(9,-13+yCorrection),e.lineTo(13,-18+yCorrection),e.lineTo(15,-18+yCorrection),e.lineTo(12,-11+yCorrection),e.lineTo(8,-8+yCorrection)):(e.lineTo(-8,-9+yCorrection),e.lineTo(-7,-22+yCorrection),e.lineTo(-5,-22+yCorrection),e.lineTo(-5,-10+yCorrection),e.lineTo(5,-10+yCorrection),e.lineTo(5,-22+yCorrection),e.lineTo(7,-22+yCorrection),e.lineTo(8,-9+yCorrection)),e.lineTo(6,-5+yCorrection),e.lineTo(7,0+yCorrection),e.lineTo(2,0+yCorrection),e.lineTo(2,-2+yCorrection),e.lineTo(4,-2+yCorrection),e.lineTo(4,-4+yCorrection),e.lineTo(-4,-4+yCorrection)}function drawPuStrip(e){loadFI<=2?(puW=10,puH=8):loadFI<=2.5||loadFI<=4?(puW=20,puH=8):loadFI<=5.5?(puW=22,puH=10):(puW=24,puH=12),e.moveTo(-.3*puW,.5*puH),e.lineTo(-.5*puW,.3*puH),e.lineTo(-.5*puW,-.5*puH),e.lineTo(.5*puW,-.5*puH),e.lineTo(.5*puW,.3*puH),e.lineTo(.3*puW,.5*puH),e.lineTo(-.3*puW,.5*puH)}function drawEdgeStrip(e){loadFI<=2||loadFI<=2.5?(puWE=13,puHE=6):loadFI<=4||loadFI<=5.5?(puWE=10,puHE=8):(puWE=20,puHE=8),e.moveTo(-.3*puWE,.5*puHE),e.lineTo(-.5*puWE,.3*puHE),e.lineTo(-.5*puWE,-.5*puHE),e.lineTo(.5*puWE,-.5*puHE),e.lineTo(.5*puWE,.3*puHE),e.lineTo(.3*puWE,.5*puHE),e.lineTo(-.3*puWE,.5*puHE)}function drawSupportRubber(e,o){0==o?(e.moveTo(0,0),e.lineTo(-7.5,-2),e.lineTo(-13,-5),e.lineTo(-15,-15),e.lineTo(-8.5,-52),e.lineTo(-5,-52),e.lineTo(-5,-15),e.lineTo(5,-15),e.lineTo(5,-52),e.lineTo(8.5,-52),e.lineTo(15,-15),e.lineTo(13,-5),e.lineTo(7.5,-2),e.lineTo(0,0)):1==o?(e.moveTo(0,0),e.lineTo(-10,0),e.lineTo(-20,-10),e.lineTo(-20,-22),e.lineTo(-12,-32),e.lineTo(-2,-38),e.lineTo(-2,-30),e.lineTo(-12,-22),e.lineTo(-12,-15),e.lineTo(-7.5,-8),e.lineTo(7.5,-8),e.lineTo(12,-15),e.lineTo(12,-22),e.lineTo(2,-30),e.lineTo(2,-38),e.lineTo(12,-32),e.lineTo(20,-22),e.lineTo(20,-10),e.lineTo(10,0),e.lineTo(0,0)):2==o?(e.moveTo(0,0),e.lineTo(-20,0),e.lineTo(-30,-8),e.lineTo(-30,-20),e.lineTo(-8,-20),e.lineTo(-8,-16),e.lineTo(-20,-16),e.lineTo(-20,-12),e.lineTo(20,-12),e.lineTo(20,-16),e.lineTo(8,-16),e.lineTo(8,-20),e.lineTo(30,-20),e.lineTo(30,-8),e.lineTo(20,0),e.lineTo(0,0)):3==o&&(e.moveTo(0,0),e.lineTo(-11,-5),e.lineTo(-15,-15),e.lineTo(-11,-25),e.lineTo(-3.5,-29),e.lineTo(-5,-17),e.lineTo(5,-17),e.lineTo(3.5,-29),e.lineTo(11,-25),e.lineTo(15,-15),e.lineTo(11,-5),e.lineTo(0,0))}function makeTextSprite(e,o){void 0===o&&(o={});var t=o.hasOwnProperty("fontface")?o.fontface:"Arial",a=o.hasOwnProperty("fontsize")?o.fontsize:18,l=o.hasOwnProperty("borderThickness")?o.borderThickness:borderLabel,r=o.hasOwnProperty("borderColor")?o.borderColor:{r:0,g:0,b:0,a:0},i=o.hasOwnProperty("backgroundColor")?o.backgroundColor:{r:labelColorR,g:labelColorG,b:labelColorB,a:labelColorO},n=document.createElement("canvas"),d=n.getContext("2d");d.font="Bold "+a+"px "+t;var s=d.measureText(e).width;d.fillStyle="rgba("+i.r+","+i.g+","+i.b+","+i.a+")",d.strokeStyle="rgba("+r.r+","+r.g+","+r.b+","+r.a+")",d.lineWidth=l,roundRect(d,l/2,l/2,s+l,1.4*a+l,6),d.fillStyle="rgba("+textColorR+", "+textColorG+", "+textColorB+", "+labelColorO+")",d.fillText(e,l,a+l);var h=new THREE.Texture(n);h.needsUpdate=!0;var m=new THREE.SpriteMaterial({map:h,useScreenCoordinates:!1}),p=new THREE.Sprite(m);return p.scale.set(200,80,1),p}function roundRect(e,o,t,a,l,r){e.beginPath(),e.moveTo(o+r,t),e.lineTo(o+a-r,t),e.quadraticCurveTo(o+a,t,o+a,t+r),e.lineTo(o+a,t+l-r),e.quadraticCurveTo(o+a,t+l,o+a-r,t+l),e.lineTo(o+r,t+l),e.quadraticCurveTo(o,t+l,o,t+l-r),e.lineTo(o,t+r),e.quadraticCurveTo(o,t,o+r,t),e.closePath(),e.fill(),e.stroke()}var vertShader,fragShader;puW=0;var objectList=[],scene,camera,controls,renderer,mouse,raycaster,INTERSECTED,canvas,scene2,camera2,controls2,renderer2,mouse2,raycaster2,INTERSECTED2,canvas2,meshHookL,meshHookR,meshHookLH,meshHookRH,meshWire,meshWireCross,screenLength,screenWidth,wireDiameter,openingLength,openingWidth,hookAngle,hookWidth,hookRadius,hookEntryWidth,hookSheet,hookWire,hookAngleR,hookWidthR,hookRadiusR,hookEntryWidthR,hookSheetR,hookWireR,invY,invYR,meshEdge,meshEdgeR,strDownloadMime="image/octet-stream",mouseDX,mouseDY,hookOpacity=1,hookStoreOpacity=.5,hookOpacity12=.12,hookOpacity0=0,viewStatus=0,panelNumber=0,viewFrame=1,IterPos=[],IterRot=[],IterTar=[],decks,deckno,PRODUCER,MACHTYPE;editedScreen=!1,hollowSBOX=[],loadvar=0;var openingtable=[],hookarrayleft=[],hookbutton=[],hookbuttonR=[];blinkOn=0,noDims=0,scalePanel=1,dragged8=0,dragged3=0,pickedFI=0,pickedOL=0,cancelLOAD=0,standardDIA=0,redCheck=0,redCheckB=0,screenShotReady=0,screenListReady=0,clearDimSnap=0,tempSUPPORTS=[],tempBOLTS=[],Bmin=0,loadVIEW=0,ready2save=0,pixelRatioDivider=1,resizeAction=0,mouseDown=0,hidSummary=1,shootCount=!1,makeShoot=!1,flatScreen=0,rdimS=!1,rdimE=!1,pudimArray=[],zakresTPU=[];var strData2=!1,imageObject=!1,snapShotWidth=10,snapShotHeight=10;hookDrawn=1,checkRow=0;var shootArray=[];machineSelect=0,createNewBox=0,createNewScreen=0,editedDeck=0,weldOverlap=20,weldOverlapPlate=20,window.innerWidth-180<1010?(scaleMeta=(window.innerWidth-menuW)/1010,window.innerWidth<1030?scaleBottom=window.innerWidth/1030:scaleBottom=1):(scaleMeta=1,scaleBottom=1),CANVAS_WIDTH=document.getElementById("watermark").offsetWidth,CANVAS_HEIGHT=document.getElementById("watermark").offsetHeight,samplesWidth=(CANVAS_WIDTH-80)/totalScreentypes,CANVAS_HEIGHT<3*samplesWidth&&(samplesWidth=CANVAS_HEIGHT/3),CANVAS_WIDTH<705?scaleScreenMenu=CANVAS_WIDTH/705:scaleScreenMenu=1,CANVAS_HEIGHT<540+samplesWidth?scaleScreenMenuH=CANVAS_HEIGHT/(540+samplesWidth):scaleScreenMenuH=1,scaleScreenMenuH<scaleScreenMenu&&(scaleScreenMenu=scaleScreenMenuH),CANVAS_WIDTH<780?scaleHooksMenu=CANVAS_WIDTH/780:scaleHooksMenu=1,CANVAS_HEIGHT<839&&CANVAS_HEIGHT>CANVAS_WIDTH?scaleHooksMenuH=CANVAS_HEIGHT/839:CANVAS_HEIGHT<566?scaleHooksMenuH=CANVAS_HEIGHT/566:scaleHooksMenuH=1,scaleHooksMenuH<scaleHooksMenu&&(scaleHooksMenu=scaleHooksMenuH),document.getElementById("panel3").style.transform="scale("+scaleHooksMenu+")",document.getElementById("panel3").style.transformOrigin="0 100%",loader=document.getElementById("loader"),mouseTip=document.getElementById("mouseTip"),hookschartContent=document.getElementById("panelhookContent"),dm8=document.getElementById("panel8"),dm3=document.getElementById("panel3");var container=document.getElementById("canvas"),container2=document.getElementById("canvas2");function onWindowResize(e){1==mobile?(bannerH=0,document.getElementById("banner").style.display="none",document.getElementById("leftside").style.top="0px",document.getElementById("rightside").style.top="0px"):bannerH=document.getElementById("banner").offsetHeight,window.innerWidth-180<1010?(scaleMeta=(window.innerWidth-menuW)/1010,window.innerWidth<1030?scaleBottom=window.innerWidth/1030:scaleBottom=1):(scaleMeta=1,scaleBottom=1),CANVAS_WIDTH=document.getElementById("watermark").offsetWidth,CANVAS_HEIGHT=document.getElementById("watermark").offsetHeight,document.getElementById("tableOW").offsetWidth>CANVAS_WIDTH-60&&"block"==document.getElementById("tableOW").style.display?scaleOpeningTable=(CANVAS_WIDTH-60)/document.getElementById("tableOW").offsetWidth:scaleOpeningTable=1,document.getElementById("tableOL").offsetWidth>CANVAS_WIDTH-60&&"block"==document.getElementById("tableOL").style.display?scaleOpeningTable=(CANVAS_WIDTH-60)/document.getElementById("tableOL").offsetWidth:scaleOpeningTable=1,document.getElementById("tableFI").offsetWidth>CANVAS_WIDTH-60&&"block"==document.getElementById("tableFI").style.display?scaleOpeningTable=(CANVAS_WIDTH-60)/document.getElementById("tableFI").offsetWidth:scaleOpeningTable=1,CANVAS_WIDTH-60<500?scaleOpeningTitles=(CANVAS_WIDTH-60)/500:scaleOpeningTitles=1,CANVAS_WIDTH-60<540?scaleDimPanel=(CANVAS_WIDTH-60)/540:scaleDimPanel=1,CANVAS_WIDTH<1010?scaleSupPanel=(CANVAS_WIDTH-60)/950:scaleSupPanel=1,CANVAS_HEIGHT/2<248?scaleSupPanelH=CANVAS_HEIGHT/2/248:scaleSupPanelH=1,scaleSupPanel>scaleSupPanelH&&(scaleSupPanel=scaleSupPanelH),CANVAS_HEIGHT-20<456?scaleBolts=(CANVAS_HEIGHT-20)/456:scaleBolts=1,CANVAS_WIDTH<705?scaleScreenMenu=CANVAS_WIDTH/705:scaleScreenMenu=1,CANVAS_HEIGHT<540+samplesWidth?scaleScreenMenuH=CANVAS_HEIGHT/(540+samplesWidth):scaleScreenMenuH=1,scaleScreenMenuH<scaleScreenMenu&&(scaleScreenMenu=scaleScreenMenuH),CANVAS_WIDTH<780?scaleHooksMenu=CANVAS_WIDTH/780:scaleHooksMenu=1,CANVAS_HEIGHT<839&&CANVAS_HEIGHT>CANVAS_WIDTH?scaleHooksMenuH=CANVAS_HEIGHT/839:CANVAS_HEIGHT<566?scaleHooksMenuH=CANVAS_HEIGHT/566:scaleHooksMenuH=1,scaleHooksMenuH<scaleHooksMenu&&(scaleHooksMenu=scaleHooksMenuH),CANVAS_WIDTH/1.5-10<400?scaleEdgePanel=(CANVAS_WIDTH/1.5-10)/400:scaleEdgePanel=1,snapShotWidth=2*CANVAS_WIDTH,snapShotHeight=2*CANVAS_HEIGHT,samplesWidth=(CANVAS_WIDTH-80)/totalScreentypes,CANVAS_HEIGHT<3*samplesWidth&&(samplesWidth=CANVAS_HEIGHT/3),$("#screenName").css({"max-width":CANVAS_WIDTH-180+"px"}),$("#tableOW").css({transform:"scale("+scaleOpeningTable+")","max-height":CANVAS_HEIGHT-95+"px",top:85*scaleOpeningTitles+"px"}),$("#tableOL").css({transform:"scale("+scaleOpeningTable+")","max-height":CANVAS_HEIGHT-95+"px",top:85*scaleOpeningTitles+"px"}),$("#tableFI").css({transform:"scale("+scaleOpeningTable+")","max-height":CANVAS_HEIGHT-115+"px",top:105*scaleOpeningTitles+"px"}),$("#tableOV").css({"max-height":CANVAS_HEIGHT-95+"px"}),$("#panel9").css({top:CANVAS_HEIGHT-250-8+"px"}),$("#panel7").css({transform:"scale("+scaleDimPanel+")"}),$("#panel6").css({left:CANVAS_WIDTH/2-160+"px",height:CANVAS_HEIGHT/scaleBolts-20+"px",transform:"scale("+scaleBolts+")"}),$("#panel3").css({transform:"scale("+scaleHooksMenu+")"}),$("#loader").css({bottom:bottomH*scaleBottom+"px"}),$("#panelSups").css({transform:"scale("+scaleSupPanel+")"}),$("#openingTitle").css({transform:"scale("+scaleOpeningTitles+")"}),$("#diameterTitle").css({transform:"scale("+scaleOpeningTitles+")"}),"block"==document.getElementById("panel9").style.display&&(document.getElementById("panel9").style.transform="scale("+scaleEdgePanel+")"),"block"==document.getElementById("overlapTitle").style.display&&(document.getElementById("overlapTitle").style.transform="scale("+scaleEdgePanel+")",document.getElementById("tableOV").style.transform="scale("+scaleEdgePanel+")"),hookContent=document.getElementById("panelhookContent"),hookselect=document.getElementById("panelhookselect"),closeHook=document.getElementById("closePanelSel"),hookColCount<Math.floor((CANVAS_WIDTH-20-15-40)/216)?(totalWidth=216*hookColCount+10,hookselect.style.width=totalWidth+"px",hookContent.style.width=totalWidth-5+"px",Math.floor((CANVAS_HEIGHT-20-60)/135)<5?(hookselect.style.height=CANVAS_HEIGHT-20+"px",hookContent.style.maxHeight=CANVAS_HEIGHT-20-60-15+"px"):(hookselect.style.height="745px",hookContent.style.maxHeight="675px"),closeHook.style.left=totalWidth-35+"px"):(colCount=Math.floor((CANVAS_WIDTH-20-15-40)/216),colCount<1&&(colCount=1),totalWidth=216*colCount+10,hookselect.style.width=totalWidth+"px",hookselect.style.height=CANVAS_HEIGHT-20+"px",1==colCount?hookSelectScale=.5:hookSelectScale=1,document.getElementById("panelTitleHookSelect").style.width=(totalWidth-20)/hookSelectScale+"px",hookContent.style.top=65*hookSelectScale+"px",hookContent.style.maxHeight=CANVAS_HEIGHT-20-10-65*hookSelectScale+"px",document.getElementById("panelTitleHookSelect").style.transform="scale("+hookSelectScale+")",document.getElementById("panelTitleHookSelect").style.transformOrigin="0 0"),14==panelNumber&&(panel14Width=document.getElementById("panel14").offsetWidth,panel14Height=document.getElementById("panel14").offsetHeight,panel14Width>CANVAS_WIDTH-100?scaleSummary=(CANVAS_WIDTH-100)/panel14Width:scaleSummary=1,panel14Height>CANVAS_HEIGHT?scaleSummaryH=CANVAS_HEIGHT/panel14Height:scaleSummaryH=1,scaleSummaryH<scaleSummary&&(scaleSummary=scaleSummaryH),document.getElementById("panel14").style.left=CANVAS_WIDTH/2-panel14Width/2+"px",document.getElementById("panel14").style.top=CANVAS_HEIGHT/2-panel14Height/2+"px",document.getElementById("panel14").style.transform="scale("+scaleSummary+")",document.getElementById("panel14").style.transformOrigin="50% 50%"),1!==e&&(pickedOL=1,pickedFI=1,fovRatio=CANVAS_WIDTH/CANVAS_HEIGHT,saveLink.style.top=CANVAS_HEIGHT+bannerH-40+"px",saveLink.style.left=CANVAS_WIDTH+menuW*scaleMeta-40+"px",display.style.top=bannerH+12+"px",display.style.left=CANVAS_WIDTH+menuW*scaleMeta-40+"px",camera.updateProjectionMatrix(),renderer.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),camera2=new THREE.OrthographicCamera(CANVAS_WIDTH/-2,CANVAS_WIDTH/2,CANVAS_HEIGHT/2,CANVAS_HEIGHT/-2,1,1e4),renderer2.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),1==camera.isOrthographicCamera?(reloadScreen(),showView(panelNumber),viewFrame=31,camera=new THREE.OrthographicCamera(ortoWidth,-ortoWidth,-ortoHeight,ortoHeight,1,1e4)):(resizeAction=1,camera.aspect=CANVAS_WIDTH/CANVAS_HEIGHT,camera.updateProjectionMatrix(),0==machineSelect&&reloadScreen(),0==panelNumber?(angleCamX=10,angleCamY=20,camera.position.z=screenRealLeft/fovRatio/tangensCam+screenWidth/2,camera.position.x=-Math.sin(angleCamX*Math.PI/180)*camera.position.z,camera.position.y=Math.sin(angleCamY*Math.PI/180)*camera.position.z,controls.enableZoom=!0,controls.enableRotate=!0,controls.enablePan=!0,viewStatus=0,viewFrame=1):(viewFrame=31,showView(panelNumber))),camera2.aspect=CANVAS_WIDTH/CANVAS_HEIGHT,prepareSamples(),reloadOpening())}for(document.body.appendChild(container),document.body.appendChild(container2),j=0;j<hookschart.length;j++)hookNextRow[checkRow]==j&&(checkRow+=1),document.getElementById("panelhookContent"+checkRow).innerHTML+='<div id="hook'+j+'" style="cursor: pointer; width: 206px; height:125px; float: left; position: relative; margin: 5px; border-radius:4px; overflow:hidden;-moz-box-sizing: border-box; -webkit-box-sizing: border-box; border: 0px solid #446678; " onClick="setHookType('+hookschart[j][0]+')" class="canvasHook" TITLE="'+hookschart[j][1]+'" ><div style="height:25px; width:206px; background-color:black; color: white; font-family: Arial; font-size: 18px;">'+hookschart[j][1]+'</div><div style="height: 100px; width: 206px;"><canvas style="height: 100px; width: 206px;" data-processing-myvar="'+j+'" data-processing-sources="drawHookChart.pde" ></canvas></div></div>';function showLeftHookChart(){saveBackup2(),hookchart=1,showView(3),panelNumber=3,document.getElementById("hook"+HOOKR).style.backgroundColor="transparent",document.getElementById("hook"+HOOKL).style.backgroundColor="#446678",panel.style.display="none",document.getElementById("panelhookselect").style.display="block",document.getElementById("panelhookContent").style.display="block"}function showRightHookChart(){saveBackup2(),hookchart=2,showView(4),panelNumber=4,document.getElementById("hook"+HOOKL).style.backgroundColor="transparent",document.getElementById("hook"+HOOKR).style.backgroundColor="#446678",panel.style.display="none",document.getElementById("panelhookselect").style.display="block",document.getElementById("panelhookContent").style.display="block"}function changeDrawingMode(){0==drawingMode?drawingMode=1:drawingMode=0,materialLoad(drawingMode,1),prepareSamples(),window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(document.getElementById("actions").innerHTML=xmlhttp.responseText)},xmlhttp.open("GET","changeDrawingMode.php?drawingMode="+drawingMode,!0),xmlhttp.send()}function makeSampleScreen(e,o,t){if(4!=e&&5!=e&&6!=e&&8!=e&&9!=e||(t=0),1==e||3==e||7==e?(wireMaxCount=4,wireMinCount=2):(wireMaxCount=6,wireMinCount=4),scaleSample=1==o?scaleScreenMenu:1,5==e?(wireCount=5,OPfaza=OPow/Math.tan(22.5*Math.PI/180),OPheight=OPfaza/2,spf=Math.round(sampleDia*scaleSample*10/wireCount)/10,sfi=OPfi*spf/(OPheight+OPfi),sow=OPow*sfi/OPfi,sheight=spf-sfi,tempf=2*sheight):6==e?(wireCount=4,OPfaza=OPow/2*2*Math.sqrt(2),OPheight=OPow/2*Math.sqrt(2),spf=Math.round(sampleDia*scaleSample*10/wireCount)/10,sfi=OPfi*spf/(OPheight+OPfi),sow=OPow*sfi/OPfi,sheight=spf-sfi,tempf=sow/2*2*Math.sqrt(2)):8==e?(wireCount=5,OPfaza=OPow/Math.tan(22.5*Math.PI/180),OPheight=OPfaza/2,spf=Math.round(sampleDia*scaleSample*10/wireCount)/10,sfi=OPfi*spf/(OPheight+OPfi),sow=OPow*sfi/OPfi,sheight=spf-sfi,tempf=2*sheight):(2!=e&&4!=e&&9!=e||(OPol=OPow),OPow+OPfi>OPol+OPfi?(wireCount=wireMinCount,wireCountC=Math.round((OPow+OPfi)*wireCount/(OPol+OPfi)),wireCountC%2!=0&&(wireCountC+=1),wireCountC==wireCount&&(wireCount=wireMaxCount,wireCountC=wireMaxCount),sfi=sampleDia/(wireCount+1)*OPfi/(OPow+OPfi)):(wireCountC=wireMinCount,wireCount=Math.round((OPol+OPfi)*wireCountC/(OPow+OPfi)),wireCount%2!=0&&(wireCount+=1),wireCount==wireCountC&&(wireCount=wireMaxCount,wireCountC=wireMaxCount),sfi=sampleDia/(wireCountC+1)*OPfi/(OPol+OPfi)),spf=Math.round(sampleDia*scaleSample*10/(wireCount+1))/10,sow=spf-sfi,sy=sfi/2,spfC=Math.round(sampleDia*scaleSample*10/(wireCountC+1))/10,sol=spfC-sfi),sampleGroup=new THREE.Object3D,drawSamplePath=[],drawSamplePathC=[],1==e||2==e||7==e){for(i=-wireCountC/2;i<=wireCountC/2;i++)1==e||2==e?i%2==0?(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2+i*(sol+sfi),-sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2+sol+i*(sol+sfi),sy,0)):(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2+i*(sol+sfi),sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2+sol+i*(sol+sfi),-sy,0)):7==e&&(i%2==0?(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2-sfi/2+i*(sol+sfi),-sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2+i*(sol+sfi),-sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2+sfi/4+i*(sol+sfi),-sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2+3*sfi/4+i*(sol+sfi),sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(sol/2-sfi+i*(sol+sfi),sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(sol/2+i*(sol+sfi),sy,0)):(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sol/2+sfi+i*(sol+sfi),sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(sol/2-3*sfi/4+i*(sol+sfi),sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(sol/2-sfi/4+i*(sol+sfi),-sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(sol/2+i*(sol+sfi),-sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(sol/2+sfi/2+i*(sol+sfi),-sy,0)));for(i=-wireCount/2;i<=wireCount/2;i++)1==e||2==e?i%2==0?(drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2+i*(sow+sfi),-sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2+sow+i*(sow+sfi),sy,0)):(drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2+i*(sow+sfi),sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2+sow+i*(sow+sfi),-sy,0)):7==e&&(i%2==0?(drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2-sfi/2+i*(sow+sfi),-sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2+i*(sow+sfi),-sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2+sfi/4+i*(sow+sfi),-sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2+3*sfi/4+i*(sow+sfi),sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(sow/2-sfi+i*(sow+sfi),sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(sow/2+i*(sow+sfi),sy,0)):(drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sow/2+sfi+i*(sow+sfi),sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(sow/2-3*sfi/4+i*(sow+sfi),sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(sow/2-sfi/4+i*(sow+sfi),-sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(sow/2+i*(sow+sfi),-sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(sow/2+sfi/2+i*(sow+sfi),-sy,0)))}else if(3==e)drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sampleDia/2,sy,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(sampleDia/2,sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-sampleDia/2,-sy,0),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(sampleDia/2,-sy,0);else if(4==e||9==e)drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-sampleDia/2,0,0),drawSamplePath[drawSamplePath.length]=new THREE.Vector3(sampleDia/2,0,0);else if(5==e){for(i=-2;i<=3;i++)i%2==0?(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-tempf/2+i*(tempf/2),0,sheight/2),3==i&&(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(i*(tempf/2),0,-sheight/2))):(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-tempf/2+i*(tempf/2),0,-sheight/2),3==i&&(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(i*(tempf/2),0,sheight/2)));drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(-tempf/2-tempf/2*2,0,-sheight/2-sfi/2),drawSamplePathC[drawSamplePathC.length]=new THREE.Vector3(tempf/2*3,0,-sheight/2-sfi/2)}else if(8==e)for(i=-2;i<=3;i++)i%2==0?(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-tempf/2+i*(tempf/2),0,sheight/2),3==i&&(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(i*(tempf/2),0,-sheight/2))):(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-tempf/2+i*(tempf/2),0,-sheight/2),3==i&&(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(i*(tempf/2),0,sheight/2)));else if(6==e)for(i=-2;i<=3;i++)i%2==0?(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-tempf/2+i*(tempf/2),0,sheight/2),3==i&&(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(i*(tempf/2),0,-sheight/2))):(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(-tempf/2+i*(tempf/2),0,-sheight/2),3==i&&(drawSamplePath[drawSamplePath.length]=new THREE.Vector3(i*(tempf/2),0,sheight/2)));if(shapeWire=new THREE.Shape,drawWire(shapeWire,0,0,sfi/2,6),pathSample=new THREE.CatmullRomCurve3(drawSamplePath),5!=e&&6!=e&&8!=e||(pathSample.type="catmullrom",pathSample.tension=.4),geometrySample=new THREE.ExtrudeGeometry(shapeWire,{steps:60,extrudePath:pathSample}),1==o?0==drawingMode?meshSample=new THREE.Mesh(geometrySample,materialWire):meshSample=new THREE.Mesh(geometrySample,materialWireSample):0==drawingMode?(materialWireSample=new THREE.MeshStandardMaterial({wireframe:!1,color:4482680,emissive:1117710,roughness:.5,metalness:.5,shading:THREE.SmoothShading}),meshSample=new THREE.Mesh(geometrySample,materialWireSample)):(materialWireSample=new THREE.MeshStandardMaterial({wireframe:!1,color:16777215,emissive:1117710,roughness:.5,metalness:.5,shading:THREE.SmoothShading}),meshSample=new THREE.Mesh(geometrySample,materialWireSample)),meshSample.geometry.computeVertexNormals(),5==e){for(shapeWireC=new THREE.Shape,drawWire(shapeWireC,0,0,sfi/2,6),pathSampleC=new THREE.CatmullRomCurve3(drawSamplePathC),geometrySampleC=new THREE.ExtrudeGeometry(shapeWire,{steps:1,extrudePath:pathSampleC}),1==o&&0==drawingMode?meshSampleC=new THREE.Mesh(geometrySampleC,materialWire):meshSampleC=new THREE.Mesh(geometrySampleC,materialWireSample),meshSampleC.geometry.computeVertexNormals(),i=-wireCount/2+1;i<=wireCount/2;i++)meshSampleClone=meshSample.clone(),meshSampleClone.position.set(0,0,-(sheight+1.5*sfi)/2+i*(sheight+1.5*sfi)),sampleGroup.add(meshSampleClone),i!=wireCount/2&&(meshSampleClone=meshSampleC.clone(),meshSampleClone.position.set(0,0,(sheight+sfi)/2+i*(sheight+1.5*sfi)),sampleGroup.add(meshSampleClone));if(1==o){var a=sow/2-2,l=64,r=new THREE.LineBasicMaterial({color:65280});(n=new THREE.CircleGeometry(a,l)).vertices.shift(),d=new THREE.Object3D,openingCircle=new THREE.Line(n,r),line1g=new THREE.Geometry,line1g.vertices.push(new THREE.Vector3(0,a,0),new THREE.Vector3(-sampleDia*scaleSample/2-sfi,a,0)),line1g.computeLineDistances(),line1=new THREE.Line(line1g,lineSolidMaterial),line2g=new THREE.Geometry,line2g.vertices.push(new THREE.Vector3(0,-a,0),new THREE.Vector3(-sampleDia*scaleSample/2-sfi,-a,0)),line2g.computeLineDistances(),line2=new THREE.Line(line2g,lineSolidMaterial),d.add(openingCircle),d.add(line1),d.add(line2),d.rotation.x=Math.PI/2,d.translateZ(-sfi/2),d.translateY((sheight+1.5*sfi)/2-sow/2-sfi/2+1),sampleGroup.add(d)}}else if(8==e){for(i=-wireCount/2+1;i<=wireCount/2;i++)meshSampleClone=meshSample.clone(),meshSampleClone.position.set(0,0,-(sheight+1.5*sfi)/2+i*(sheight+1.5*sfi)),sampleGroup.add(meshSampleClone);if(1==o){a=(sow+sfi)/2-2,l=64,r=new THREE.LineBasicMaterial({color:65280});(n=new THREE.CircleGeometry(a,l)).vertices.shift(),d=new THREE.Object3D,openingCircle=new THREE.Line(n,r),line1g=new THREE.Geometry,line1g.vertices.push(new THREE.Vector3(0,a,0),new THREE.Vector3(-sampleDia*scaleSample/2-sfi,a,0)),line1g.computeLineDistances(),line1=new THREE.Line(line1g,lineSolidMaterial),line2g=new THREE.Geometry,line2g.vertices.push(new THREE.Vector3(0,-a,0),new THREE.Vector3(-sampleDia*scaleSample/2-sfi,-a,0)),line2g.computeLineDistances(),line2=new THREE.Line(line2g,lineSolidMaterial),d.add(openingCircle),d.add(line1),d.add(line2),d.rotation.x=Math.PI/2,d.translateZ(-sfi/2),d.translateY((sheight+1.5*sfi)/2-sow/2+1),sampleGroup.add(d)}}else if(6==e){for(i=-2;i<=1;i++)meshSampleClone=meshSample.clone(),i%2==0&&meshSampleClone.rotateX(Math.PI),meshSampleClone.position.set(0,0,(sheight+sfi/Math.sqrt(2))/2+i*(sheight+sfi/Math.sqrt(2))),sampleGroup.add(meshSampleClone);if(1==o){var n;a=.9*sow/2-2,l=64,r=new THREE.LineBasicMaterial({color:65280});(n=new THREE.CircleGeometry(a,l)).vertices.shift(),d=new THREE.Object3D,openingCircle=new THREE.Line(n,r),line1g=new THREE.Geometry,line1g.vertices.push(new THREE.Vector3(0,a,0),new THREE.Vector3(-sampleDia*scaleSample/2-sfi,a,0)),line1g.computeLineDistances(),line1=new THREE.Line(line1g,lineSolidMaterial),line2g=new THREE.Geometry,line2g.vertices.push(new THREE.Vector3(0,-a,0),new THREE.Vector3(-sampleDia*scaleSample/2-sfi,-a,0)),line2g.computeLineDistances(),line2=new THREE.Line(line2g,lineSolidMaterial),d.add(openingCircle),d.add(line1),d.add(line2),d.rotation.x=Math.PI/2,d.translateZ(-sfi/2),sampleGroup.add(d)}}else{for(i=-wireCount/2+1;i<=wireCount/2;i++)meshSampleClone=meshSample.clone(),meshSampleClone.position.set(0,0,-(sow+sfi)/2+i*(sow+sfi)),i%2==0&&(meshSampleClone.rotation.y=Math.PI),sampleGroup.add(meshSampleClone);if(1==o){a=sow/2;sol2=2==e?sow*(wireCountC+1-4)+(wireCountC-4)*sfi:sol,l=64,r=new THREE.LineBasicMaterial({color:65280}),d=new THREE.Object3D,line1g=new THREE.Geometry,line2g=new THREE.Geometry,4==e?(line1g.vertices.push(new THREE.Vector3(0,a,0),new THREE.Vector3(-sampleDia*scaleSample/2-4*sfi,a,0)),line2g.vertices.push(new THREE.Vector3(0,-a,0),new THREE.Vector3(-sampleDia*scaleSample/2-4*sfi,-a,0)),(n=new THREE.CircleGeometry(a,l)).vertices.shift(),d=new THREE.Object3D,openingCircle=new THREE.Line(n,r),d.add(openingCircle)):(line1g.vertices.push(new THREE.Vector3(sol2/2,a,0),new THREE.Vector3(-sampleDia*scaleSample/2-sfi,a,0)),line2g.vertices.push(new THREE.Vector3(sol2/2,-a,0),new THREE.Vector3(-sampleDia*scaleSample/2-sfi,-a,0))),line1g.computeLineDistances(),line1=new THREE.Line(line1g,lineSolidMaterial),line2g.computeLineDistances(),line2=new THREE.Line(line2g,lineSolidMaterial),d.add(line1),d.add(line2),d.rotation.x=Math.PI/2,d.translateZ(-sfi),sampleGroup.add(d)}}if(4!==e&&5!==e&&6!==e&&8!==e&&9!==e){for(shapeWireC=new THREE.Shape,drawWire(shapeWireC,0,0,sfi/2,6),pathSampleC=new THREE.CatmullRomCurve3(drawSamplePathC),geometrySampleC=new THREE.ExtrudeGeometry(shapeWireC,{steps:40,extrudePath:pathSampleC}),1==o&&0==drawingMode?meshSampleC=new THREE.Mesh(geometrySampleC,materialWire):meshSampleC=new THREE.Mesh(geometrySampleC,materialWireSample),meshSampleC.geometry.computeVertexNormals(),i=-wireCountC/2+1;i<=wireCountC/2;i++)(2!==e||i<=-wireCountC/2+2||i>=wireCountC/2-1)&&(meshSampleClone=meshSampleC.clone(),meshSampleClone.rotation.y=-Math.PI/2,i%2==0&&(meshSampleClone.rotation.y=Math.PI/2),meshSampleClone.position.set((sol+sfi)/2-i*(sol+sfi),0,0),sampleGroup.add(meshSampleClone));if(1==o){2==e&&(sol=sow*(wireCountC+1-4)+(wireCountC-4)*sfi);a=sol/2,l=64,r=new THREE.LineBasicMaterial({color:65280});var d=new THREE.Object3D;line1g=new THREE.Geometry,line2g=new THREE.Geometry,0==t?(line1g.vertices.push(new THREE.Vector3(a,-sow/2,0),new THREE.Vector3(a,sampleDia*scaleSample/2+sfi,0)),line2g.vertices.push(new THREE.Vector3(-a,-sow/2,0),new THREE.Vector3(-a,sampleDia*scaleSample/2+sfi,0))):(line1g.vertices.push(new THREE.Vector3(a,sow/2,0),new THREE.Vector3(a,-sampleDia*scaleSample/2-sfi,0)),line2g.vertices.push(new THREE.Vector3(-a,sow/2,0),new THREE.Vector3(-a,-sampleDia*scaleSample/2-sfi,0))),line1g.computeLineDistances(),line1=new THREE.Line(line1g,lineSolidMaterial),line2g.computeLineDistances(),line2=new THREE.Line(line2g,lineSolidMaterial),d.add(line1),d.add(line2),d.rotation.x=Math.PI/2,d.translateZ(-sfi),sampleGroup.add(d)}}1==t&&sampleGroup.rotateZ(Math.PI/2)}function prepareSamples(){for(scene2.remove(selSampleGroup),scene2.remove(sampleOpening),selSampleGroup=new THREE.Object3D,sampleOpening=new THREE.Object3D,sampleDia=.75*samplesWidth,sampleDist=.25*samplesWidth,sampleY=600,sampleZ=1200,cylinderSample=[],sampleArray=[],totalScreentypes>=8?(OPow=20,OPol=20,OPfi=6,makeSampleScreen(1,0,0),sampleArray[1]=sampleGroup,OPow=8,OPol=8,OPfi=3,makeSampleScreen(2,0,0),sampleArray[2]=sampleGroup,OPow=40,OPol=40,OPfi=16,makeSampleScreen(3,0,0),sampleArray[3]=sampleGroup,OPow=3,OPol=3,OPfi=1,makeSampleScreen(4,0,0),sampleArray[4]=sampleGroup,OPow=20,OPol=20,OPfi=6,makeSampleScreen(5,0,0),sampleArray[5]=sampleGroup,makeSampleScreen(6,0,0),sampleArray[6]=sampleGroup,makeSampleScreen(7,0,0),sampleArray[7]=sampleGroup,makeSampleScreen(8,0,0),sampleArray[8]=sampleGroup,makeSampleScreen(9,0,0),sampleArray[9]=sampleGroup):(OPow=20,OPol=20,OPfi=6,makeSampleScreen(1,0,0),sampleArray[1]=sampleGroup,OPow=8,OPol=8,OPfi=3,makeSampleScreen(2,0,0),sampleArray[2]=sampleGroup,OPow=40,OPol=40,OPfi=16,makeSampleScreen(3,0,0),sampleArray[3]=sampleGroup,OPow=3,OPol=3,OPfi=1,makeSampleScreen(4,0,0),sampleArray[4]=sampleGroup,OPow=20,OPol=20,OPfi=6,makeSampleScreen(5,0,0),sampleArray[5]=sampleGroup,makeSampleScreen(6,0,0),sampleArray[6]=sampleGroup,makeSampleScreen(7,0,0),sampleArray[7]=sampleGroup),totalScreentypes%2==0?leftCorrection=sampleDia/2+sampleDist/2:leftCorrection=sampleDia+sampleDist,j=-3;j<totalScreentypes-3;j++)totalScreentypes>=8?3==j?is=4:4==j?is=3:is=j:is=j,7==totalScreentypes?mnoznik=is+1:mnoznik=is,button=document.getElementById("screenButton"+(j+4)),button.style.width=sampleDia+"px",button.style.height=sampleDia+"px",button.style.marginTop=sampleDist+"px",button.style.marginLeft=CANVAS_WIDTH/2+mnoznik*(sampleDia+sampleDist)-sampleDia/2-leftCorrection+"px",button=document.getElementById("screenHollow"+(j+4)),button.style.width=sampleDia+"px",button.style.height=sampleDia+"px",button.style.marginTop=sampleDist+"px",button.style.marginLeft=CANVAS_WIDTH/2+mnoznik*(sampleDia+sampleDist)-sampleDia/2-leftCorrection+"px",sample=sampleArray[j+4].clone(),sample.position.set(mnoznik*(sampleDia+sampleDist)-leftCorrection,0,0),sampleX=(sampleDia+sampleDist)/2+is*(sampleDia+sampleDist),sample.rotateX(Math.atan(sampleY/sampleZ)),sample.rotateZ(Math.atan(sampleX/sampleZ)),selSampleGroup.add(sample);selSampleGroup.translateZ(-500),selSampleGroup.translateY(CANVAS_HEIGHT/2-sampleDia/2-sampleDist),selSampleGroup.rotateX(Math.PI/2),scene2.add(selSampleGroup),scene2.add(sampleOpening)}function startShooting(){makeShoot=!1,screenNumber=shootCount-1,shootCount-=1,reloadDataSheet(screenNumber),setTimeout((function(){document.getElementById("canvas").style.display="none",renderer.setClearColor(16777215,1),renderer.setSize(snapShotWidth,snapShotHeight),screenListReady=1}),5)}function reloadDataSheet(e){loadDataArray(e),5==loadSCREENTYPE||6==loadSCREENTYPE?flatScreen=1:flatScreen=0,dataCheck(),screenData(),scene.remove(screenMeshGroup),screenMesh(),setOrtoScreen()}function outputDataSheet(){renderer.setClearColor(16777215,0),renderer.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),loader.style.zIndex=0,loader.style.display="none",document.getElementById("canvas").style.display="block",createPDFsheet()}function saveBackup(){backLS=loadLS,backWS=loadWS,backSCREENTYPE=loadSCREENTYPE,backPERPAR=loadPERPAR,backOW=loadOW,backOL=loadOL,backFI=loadFI,backWIREMATERIAL=loadWIREMATERIAL,backHOOKSHEETS=loadHOOKSHEETS,backHOOKSMATERIAL=loadHOOKSMATERIAL,backHOOKTYPE=loadHOOKTYPE,backHOOKTYPER=loadHOOKTYPER,backSTRIPS=loadSTRIPS,backB=loadB,backBTHREAD=loadBTHREAD,backBWIDTH=loadBWIDTH,backFLIPY=loadFLIPY,backMOUNTTYPE=loadMOUNTTYPE,backFEED=loadFEED,backDOUBLEFOLD=loadDOUBLEFOLD,backDOUBLEFOLDR=loadDOUBLEFOLDR,backN=loadN,backSUPPORTS=[],backSUPPORTS=backSUPPORTS.concat(loadSUPPORTS),backsupSymetry=supSymetry,backsupBase=supBase,backBOLTS=[],backBOLTS=backBOLTS.concat(loadBOLTS),backOVERLAP1=loadOVERLAP1,backOVERLAP2=loadOVERLAP2,backSPISPA=loadSPISPA}function saveBackup2(){back2LS=loadLS,back2WS=loadWS,back2SCREENTYPE=loadSCREENTYPE,back2PERPAR=loadPERPAR,back2OW=loadOW,back2OL=loadOL,back2FI=loadFI,back2WIREMATERIAL=loadWIREMATERIAL,back2HOOKSHEETS=loadHOOKSHEETS,back2HOOKSMATERIAL=loadHOOKSMATERIAL,back2HOOKTYPE=loadHOOKTYPE,back2HOOKTYPER=loadHOOKTYPER,back2STRIPS=loadSTRIPS,back2B=loadB,back2BTHREAD=loadBTHREAD,back2BWIDTH=loadBWIDTH,back2FLIPY=loadFLIPY,back2MOUNTTYPE=loadMOUNTTYPE,back2FEED=loadFEED,back2DOUBLEFOLD=loadDOUBLEFOLD,back2DOUBLEFOLDR=loadDOUBLEFOLDR,back2N=loadN,back2SUPPORTS=[],back2SUPPORTS=back2SUPPORTS.concat(loadSUPPORTS),back2supSymetry=supSymetry,back2supBase=supBase,back2BOLTS=[],back2BOLTS=back2BOLTS.concat(loadBOLTS),back2OVERLAP1=loadOVERLAP1,back2OVERLAP2=loadOVERLAP2,back2SPISPA=loadSPISPA}function loadBackup(){pickedOL=1,pickedFI=1,loadLS=backLS,loadWS=backWS,loadSCREENTYPE=backSCREENTYPE,loadPERPAR=backPERPAR,loadOW=backOW,loadOL=backOL,loadFI=backFI,loadWIREMATERIAL=backWIREMATERIAL,loadHOOKSHEETS=backHOOKSHEETS,loadHOOKSMATERIAL=backHOOKSMATERIAL,loadHOOKTYPE=backHOOKTYPE,loadHOOKTYPER=backHOOKTYPER,loadSTRIPS=backSTRIPS,loadB=backB,loadBTHREAD=backBTHREAD,loadBWIDTH=backBWIDTH,loadFLIPY=backFLIPY,loadMOUNTTYPE=backMOUNTTYPE,loadFEED=backFEED,loadDOUBLEFOLD=backDOUBLEFOLD,loadDOUBLEFOLDR=backDOUBLEFOLDR,loadN=backN,loadSUPPORTS=[],loadSUPPORTS=loadSUPPORTS.concat(backSUPPORTS),supSymetry=backsupSymetry,supBase=backsupBase,loadBOLTS=[],loadBOLTS=loadBOLTS.concat(backBOLTS),loadOVERLAP1=backOVERLAP1,loadOVERLAP2=backOVERLAP2,loadSPISPA=backSPISPA,reloadScreen()}function loadBackup2(){pickedOL=1,pickedFI=1,loadLS=back2LS,loadWS=back2WS,loadSCREENTYPE=back2SCREENTYPE,loadPERPAR=back2PERPAR,loadOW=back2OW,loadOL=back2OL,loadFI=back2FI,loadWIREMATERIAL=back2WIREMATERIAL,loadHOOKSHEETS=back2HOOKSHEETS,loadHOOKSMATERIAL=back2HOOKSMATERIAL,loadHOOKTYPE=back2HOOKTYPE,loadHOOKTYPER=back2HOOKTYPER,loadSTRIPS=back2STRIPS,loadB=back2B,loadBTHREAD=back2BTHREAD,loadBWIDTH=back2BWIDTH,loadFLIPY=back2FLIPY,loadMOUNTTYPE=back2MOUNTTYPE,loadFEED=back2FEED,loadDOUBLEFOLD=back2DOUBLEFOLD,loadDOUBLEFOLDR=back2DOUBLEFOLDR,loadN=back2N,loadSUPPORTS=[],loadSUPPORTS=loadSUPPORTS.concat(back2SUPPORTS),supSymetry=back2supSymetry,supBase=back2supBase,loadBOLTS=[],loadBOLTS=loadBOLTS.concat(back2BOLTS),loadOVERLAP1=back2OVERLAP1,loadOVERLAP2=back2OVERLAP2,loadSPISPA=back2SPISPA,reloadScreen()}function reloadScreen(){0==cancelLOAD?loadNEW=0:loadNEW=1,loader.style.zIndex=150,loader.style.display="block",setTimeout((function(){dataCheck(),screenData(),scene.remove(screenMeshGroup),screenMesh(),loader.style.zIndex=0,loader.style.display="none",reloadOpening(),1==loadVIEW&&showView(8),rememberScreen()}),10),cancelLOAD=0}function resizePanel(){0==scalePanel?(panel.style.transformOrigin="bottom left",panel.style.transform="scale(0.7)",scalePanel=1):(panel.style.transformOrigin="bottom left",panel.style.transform="scale(1)",scalePanel=0)}function tableSelect(){if(1==loadSCREENTYPE)openingtable=openingtable1.slice();else if(2==loadSCREENTYPE)for(openingtable=[],i=0;i<openingtable1.length;i++)openingtable1[i][0]<=40&&(openingtable[openingtable.length]=openingtable1[i]);else 3==loadSCREENTYPE?openingtable=openingtable3.slice():4==loadSCREENTYPE?openingtable=openingtable4.slice():5==loadSCREENTYPE?openingtable=openingtable5.slice():6==loadSCREENTYPE?openingtable=openingtable6.slice():7==loadSCREENTYPE?openingtable=openingtable7.slice():8==loadSCREENTYPE?openingtable=openingtable8.slice():9==loadSCREENTYPE&&(openingtable=openingtable4.slice())}function CHECKLIMITS(){loadFI<=4||loadFI,lengthmaximum=7500,0==loadHOOKTYPE&&0==loadHOOKTYPER?lengthminimum=150:lengthminimum=300,limitarray=[],limitarray[0]=[lengthminimum,lengthmaximum,150,2e3],limitarray[1]=[lengthminimum,lengthmaximum,150,2e3],limitarray[2]=[lengthminimum,lengthmaximum,150,2e3],limitarray[3]=[lengthminimum,5900,150,2e3],limitarray[4]=[1300,3100,150,2e3],limitarray[5]=[lengthminimum,lengthmaximum,150,2e3],limitarray[6]=[lengthminimum,lengthmaximum,150,2e3],limitarray[7]=[lengthminimum,lengthmaximum,150,2e3],limitarray[8]=[lengthminimum,lengthmaximum,150,2e3],limitarray[9]=[lengthminimum,lengthmaximum,150,2e3],L2=limitarray[loadSCREENTYPE][1],L1=limitarray[loadSCREENTYPE][0],W2=limitarray[loadSCREENTYPE][3],W1=limitarray[loadSCREENTYPE][2]}function OW(){for(CHANGE=0,match=0,minval=0,i=0;i<openingtable.length;i++)openingtable[i][0]==loadOW?match=1:0==minval&&openingtable[i][0]>standardSetOW&&(minval=openingtable[i][0]);0==match&&(loadOW=minval,CHANGE=1)}function FI(){if(CHANGE=0,fiALLOWED=[],minval=0,match=0,alertin=0,standardDIA=0,loadSCREENTYPE<=4||9==loadSCREENTYPE){for(4==loadSCREENTYPE||9==loadSCREENTYPE?check=3:check=1,fiEXTENDED=[],i=0;i<openingtable.length;i++)if(loadOW==openingtable[i][0]){for(j=0;j<wiretable.length;j++)if(1==wiretable[j][check]&&wiretable[j][0]<=openingtable[i][2]&&wiretable[j][0]>=openingtable[i][1]){if(fiALLOWED[fiALLOWED.length]=wiretable[j][0],1==loadSCREENTYPE||2==loadSCREENTYPE)for(fiEXTENDED[fiEXTENDED.length]=1,tempAr=fi_set[openingtable[i][3]].split("x"),z=0;z<tempAr.length;z++)wiretable[j][0]==tempAr[z]&&(fiEXTENDED[fiEXTENDED.length-1]=0);wiretable[j][0]!=loadFI||1!=loadNEW&&1!=pickedFI?(0==minval&&(minval=wiretable[j][0]),wiretable[j][0]==openingtable[i][4]&&(minval=wiretable[j][0],standardDIA=minval)):(match=1,pickedFI=0)}0==match&&(loadFI=minval,CHANGE=1)}}else if(loadSCREENTYPE<=8){for(i=0;i<openingtable.length;i++)if(loadOW==openingtable[i][0])for(tempAr=fi_set[openingtable[i][3]].split("x"),j=0;j<tempAr.length;j++)for(fiALLOWED[fiALLOWED.length]=Number(tempAr[j]),0==minval&&(openingtable[i][4]>0?(minval=openingtable[i][4],standardDIA=minval):minval=Number(tempAr[j])),z=0;z<wiretable.length;z++)1!=wiretable[z][1]||wiretable[z][0]!=tempAr[j]||wiretable[z][0]!=loadFI||1!=loadNEW&&1!=pickedFI||(match=1,pickedFI=0);0==match&&(loadFI=minval,CHANGE=1)}}function WIREMATERIAL(){for(CHANGE=0,4==loadSCREENTYPE||9==loadSCREENTYPE?check=3:check=1,match=0,i=0;i<wiretable.length;i++)1==wiretable[i][check]&&wiretable[i][0]==loadFI&&1==wiretable[i][2]&&(match=1);0==match?(1==loadWIREMATERIAL&&(loadWIREMATERIAL=0),CHANGE=1,wirematerialALLOWED=[1,0]):wirematerialALLOWED=[1,1],0==loadWIREMATERIAL?materialWire.color.setHex(wireColor):materialWire.color.setHex(wireColorS)}function OL(){if(CHANGE=0,match=0,minval=0,olALLOWED=[],olEXTENDED=[],1==loadSCREENTYPE||3==loadSCREENTYPE||7==loadSCREENTYPE){for(i=0;i<openingtable.length;i++)if(openingtable[i][1]<=loadFI&&openingtable[i][2]>=loadFI){if(7==loadSCREENTYPE)for(tempAr=fi_set[openingtable[i][3]].split("x"),z=0;z<tempAr.length;z++)loadFI==tempAr[z]&&(olALLOWED[olALLOWED.length]=openingtable[i][0],0==minval&&(minval=openingtable[i][0]),openingtable[i][0]==loadOL&&(match=1));else olALLOWED[olALLOWED.length]=openingtable[i][0];if(1==loadSCREENTYPE)for(olEXTENDED[olEXTENDED.length]=1,tempAr=fi_set[openingtable[i][3]].split("x"),z=0;z<tempAr.length;z++)loadFI==tempAr[z]&&(olEXTENDED[olEXTENDED.length-1]=0);7!==loadSCREENTYPE&&(openingtable[i][0]==loadOL&&(match=1),0==minval&&openingtable[i][0]>standardSetOW&&(minval=openingtable[i][0]),loadFI==openingtable[i][4]&&(minval=openingtable[i][0]))}0==match&&0==loadSQUARE?(loadOL=minval,CHANGE=1):1==loadSQUARE&&(loadOL=loadOW)}}function HOOKSHEETS(){CHANGE=0,hooksheetsALLOWED=[1,1,1],5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE||4==loadSCREENTYPE?(hooksheetsALLOWED=[1,0,0],loadHOOKSHEETS=0):3==loadSCREENTYPE||9==loadSCREENTYPE?(9==loadSCREENTYPE?(hooksheetsALLOWED=[0,0,1],loadHOOKSHEETS=2):loadFI<5?hooksheetsALLOWED=[1,0,0]:loadFI<8?hooksheetsALLOWED=[1,1,1]:loadFI>12&&(hooksheetsALLOWED=[0,1,1]),0==hooksheetsALLOWED[loadHOOKSHEETS]&&loadFI>12?(loadHOOKSHEETS=2,CHANGE=1):0==hooksheetsALLOWED[loadHOOKSHEETS]&&loadFI<=12&&(loadHOOKSHEETS=0,CHANGE=1)):1==loadSCREENTYPE||2==loadSCREENTYPE?(loadFI<5?hooksheetsALLOWED=[1,0,0]:loadFI<8?hooksheetsALLOWED=[1,1,1]:loadFI>12&&(hooksheetsALLOWED=[0,1,1]),0==hooksheetsALLOWED[loadHOOKSHEETS]&&loadFI>12?(loadHOOKSHEETS=1,CHANGE=1):0==hooksheetsALLOWED[loadHOOKSHEETS]&&loadFI<=12&&(loadHOOKSHEETS=0,CHANGE=1)):7==loadSCREENTYPE&&(loadFI<5?hooksheetsALLOWED=[1,0,0]:(loadFI<8||loadFI>=10)&&(hooksheetsALLOWED=[1,1,1]),0==hooksheetsALLOWED[loadHOOKSHEETS]&&loadFI>=10?(loadHOOKSHEETS=2,CHANGE=1):0==hooksheetsALLOWED[loadHOOKSHEETS]&&loadFI<10&&(loadHOOKSHEETS=0,CHANGE=1))}function HOOKSMATERIAL(){CHANGE=0,0!=loadHOOKSHEETS?hooksmatALLOWED=[1,0]:hooksmatALLOWED=[1,1],0==hooksmatALLOWED[loadHOOKSMATERIAL]&&(loadHOOKSMATERIAL=0,CHANGE=1)}function HOOKTYPE(){for(matchL=0,matchR=0,HOOKL=0,HOOKR=0,hookALLOWED=[],radiusAdd=0,i=0;i<hookschart.length;i++)SCR4allowed=1,1==hookschart[i][0]&&(UD=i),2!=hookschart[i][10]?(w=hookschart[i][4],w>0?(r=hookschart[i][2],r<=1?(h=hookschart[i][5],0==h?(a=hookschart[i][3],a>0?(rmax=hookschart[i][8],!1!==editedScreen&&0==createNewBox?0!=rmax&&loadFI>rmax&&0==loadHOOKSHEETS&&(fiMAX=rmax):0!=rmax&&loadFI>rmax&&0==loadHOOKSHEETS?hookALLOWED[i]=[0]:hookALLOWED[i]=[1]):(number=hookschart[i][0],5==number?(rmax=hookschart[i][8],loadFI>rmax||0!=loadHOOKSHEETS||4==loadSCREENTYPE?hookALLOWED[i]=[0]:hookALLOWED[i]=[1]):(rmax=hookschart[i][8],loadFI>rmax&&0==loadHOOKSHEETS||1==loadHOOKSHEETS||loadWS<=200?hookALLOWED[i]=[0]:hookALLOWED[i]=[1]))):(rmax=hookschart[i][8],0!=rmax&&loadFI>rmax&&0==loadHOOKSHEETS?hookALLOWED[i]=[0]:hookALLOWED[i]=[1])):(rmax=hookschart[i][8],0!=rmax&&loadFI>rmax&&0==loadHOOKSHEETS?hookALLOWED[i]=[0]:hookALLOWED[i]=[1])):(number=hookschart[i][0],0==number?4==loadSCREENTYPE||5==loadSCREENTYPE||6==loadSCREENTYPE?hookALLOWED[i]=[0]:hookALLOWED[i]=[1]:4==loadSCREENTYPE||1==loadHOOKSHEETS?hookALLOWED[i]=[0]:hookALLOWED[i]=[1])):hookALLOWED[i]=[0],number=hookschart[i][0],loadHOOKTYPE==number&&1==hookALLOWED[i]&&(matchL=1,HOOKL=i),loadHOOKTYPER==number&&1==hookALLOWED[i]&&(matchR=1,HOOKR=i),1==hookALLOWED[i]?(temphook=document.getElementById("hook"+i),temphook.style.pointerEvents="auto",temphook.style.opacity=1,temphook.style.backgroundColor="transparent"):(temphook=document.getElementById("hook"+i),temphook.style.pointerEvents="none",temphook.style.opacity=.2,temphook.style.backgroundColor="transparent");0==matchL&&(HOOKL=0,loadHOOKTYPE=1),0==matchR&&(HOOKR=0,loadHOOKTYPER=1),1==hookchart?document.getElementById("hook"+HOOKL).style.backgroundColor="#446678":2==hookchart&&(document.getElementById("hook"+HOOKR).style.backgroundColor="#446678"),hookHeight=hookschart[HOOKL][5],1==(hookRadius=hookschart[HOOKL][2])?(hookRadius=hookSheet,hookEntryWidth=hookHeight>0?2==loadHOOKSHEETS?9==loadSCREENTYPE?25:80:55:2==loadHOOKSHEETS?9==loadSCREENTYPE?45:100:35):2==loadHOOKSHEETS?(hookEntryWidth=0==hookRadius?120:80,9==loadSCREENTYPE&&(hookEntryWidth-=55)):hookEntryWidth=55,hookAngle=hookschart[HOOKL][3],hookWidth=hookschart[HOOKL][4],hookWidthInner=hookschart[HOOKL][7],hookRadius2=hookschart[HOOKL][6],loadFI<=1&&(hookHeight>0||hookAngle>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE||5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE)?(loadDOUBLEFOLD=1,doubleSwitch=0):loadFI<=2&&(hookHeight>0||hookAngle>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE||5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE)?doubleSwitch=1:(loadDOUBLEFOLD=0,doubleSwitch=0),hookHeightR=hookschart[HOOKR][5],1==(hookRadiusR=hookschart[HOOKR][2])?(hookRadiusR=hookSheetR,hookEntryWidthR=hookHeightR>0?2==loadHOOKSHEETS?9==loadSCREENTYPE?25:80:55:2==loadHOOKSHEETS?9==loadSCREENTYPE?45:100:35):2==loadHOOKSHEETS?(hookEntryWidthR=0==hookRadiusR?120:80,9==loadSCREENTYPE&&(hookEntryWidthR-=55)):hookEntryWidthR=55,hookAngleR=hookschart[HOOKR][3],hookWidthR=hookschart[HOOKR][4],hookWidthInnerR=hookschart[HOOKR][7],hookRadius2R=hookschart[HOOKR][6],loadFI<=1&&(hookHeightR>0||hookAngleR>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE||5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE)?(loadDOUBLEFOLDR=1,doubleSwitchR=0):loadFI<=2&&(hookHeightR>0||hookAngleR>0)&&(1==loadSCREENTYPE||2==loadSCREENTYPE||5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE)?doubleSwitchR=1:(loadDOUBLEFOLDR=0,doubleSwitchR=0),dfPanel=document.getElementById("doublefold"),dfPanelR=document.getElementById("doublefoldR"),dfCheck=document.getElementById("dfCheck"),dfCheckR=document.getElementById("dfCheckR"),1==doubleSwitch?(dfPanel.style.display="block",dfCheck.innerHTML='<img src="ICO/check'+loadDOUBLEFOLD+'.svg" width="30px" height="30px;"/>'):dfPanel.style.display="none",1==doubleSwitchR?(dfPanelR.style.display="block",dfCheckR.innerHTML='<img src="ICO/check'+loadDOUBLEFOLDR+'.svg" width="30px" height="30px;"/>'):dfPanelR.style.display="none"}function N(){CHANGE=0,nALLOWED=10,(2==loadSCREENTYPE&&0==loadPERPAR||4==loadSCREENTYPE||5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE||9==loadSCREENTYPE)&&(nALLOWED=Math.floor(loadLS/SUPPORTMINIMUM)-1,nALLOWED>10&&(nALLOWED=10),loadN>nALLOWED&&(loadN=nALLOWED,CHANGE=1))}function LSWS(){CHANGE=0,loadLS>L2?(loadLS=L2,CHANGE=1):loadLS<L1&&(loadLS=L1,CHANGE=1),CHANGE=0,loadWS>W2?(loadWS=W2,CHANGE=1):loadWS<W1&&(loadWS=W1,CHANGE=1)}function B(){6!=loadHOOKTYPE&&6!=loadHOOKTYPER||(loadBWIDTH<100?loadBWIDTH=100:loadBWIDTH>200?loadBWIDTH=200:loadBWIDTH=Math.round(loadBWIDTH),CHANGE=0,Bmax=1+Math.floor((loadWS-2*boltEdgeMin)/boltSpaceMin),Bmin=1+Math.ceil((loadWS-2*boltEdgeMax)/boltSpaceMax),Bmin<2&&(6==loadHOOKTYPE&&(loadHOOKTYPE=1),6==loadHOOKTYPER&&(loadHOOKTYPER=1),reLoad=1),loadB<Bmin?(loadB=Bmin,CHANGE=1):loadB>Bmax&&(loadB=Bmax,CHANGE=1))}function STRIPS(){CHANGE=0,4==loadSCREENTYPE&&(loadSTRIPS>1&&(loadSTRIPS=0),CHANGE=1)}function SUPPORTS(){for(sumLoadSup=0,(5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE)&&loadFI<3?SUPPORTMINIMUM2=70:SUPPORTMINIMUM2=SUPPORTMINIMUM,i=0;i<=loadN;i++)sumLoadSup+=loadSUPPORTS[i],loadSUPPORTS[i]<SUPPORTMINIMUM2&&(sumLoadSup+=1);if(sumLoadSup!=loadLS||loadSUPPORTS.length!=loadN+1){if(loadTPU=[],loadSUPPORTS=[],sumLoadSupN=0,0==loadN)loadSUPPORTS[0]=loadLS;else{for(i=0;i<loadN;i++)loadSUPPORTS[i]=Math.round(10*loadLS/(loadN+1))/10,sumLoadSupN+=loadSUPPORTS[i];loadSUPPORTS[loadN]=loadLS-sumLoadSupN}document.getElementById("closePanelSelSup").style.pointerEvents="auto"}for(supBase<=1?supLock=loadN:supLock=0,i=0;i<=loadN;i++)i==supLock&&0==redCheck?(document.getElementById("supval"+i).style.pointerEvents="none",document.getElementById("supval"+i).style.backgroundColor="#AAAAAA"):(document.getElementById("supval"+i).style.pointerEvents="auto",document.getElementById("supval"+i).style.backgroundColor="#FFFFFF")}function BOLTS(){for(sumLoadB=0,i=0;i<=loadB;i++)sumLoadB+=loadBOLTS[i];if(sumLoadB!=loadWS||loadBOLTS.length!=loadB+1){for(loadBOLTS=[],sumLoadBN=0,loadB<2&&(loadB=2),loadBOLTS[0]=boltEdgeMin,sumLoadBN=boltEdgeMin,i=1;i<loadB-1;i++)loadBOLTS[i]=Math.round(10*(loadWS-2*boltEdgeMin)/(loadB-1))/10,sumLoadBN+=loadBOLTS[i];loadBOLTS[loadB-1]=loadWS-sumLoadBN-boltEdgeMin,loadBOLTS[loadB]=boltEdgeMin}for(valBinnerHeight=(CANVAS_HEIGHT-20*scaleBolts-100*scaleBolts)/scaleBolts,labelHeight=(valBinnerHeight-4-20)/(loadB+1)-12,labelHeight>40&&(labelHeight=40),factor=labelHeight/40,Bfont=22*factor,Bline=28*factor,document.getElementById("boltValuesTable").innerHTML="",document.getElementById("boltValuesTable").style.height=valBinnerHeight+"px",marginBoltX=(valBinnerHeight-4-10)/(loadB+1)-labelHeight,marginBoltX+=marginBoltX/(loadB+1),marginBoltTemp=10,j=0;j<=loadB;j++)0==j?marginBoltTemp=10:marginBoltTemp+=marginBoltX+labelHeight,document.getElementById("boltValuesTable").innerHTML+='<input type="number" step=".1" id="bolt'+j+'" onkeypress="return isNumberKey(event)" onchange="boltChange(this.value,'+j+')"style="position: absolute; top: '+marginBoltTemp+"px; left: 10px; height: "+labelHeight+"px; width: 120px; background-color: transparent; color: #FFFFFF;border-radius: 3px 3px 3px 3px; border-color: black; border: 3px solid #FFFFFF; overflow: hidden; box-sizing: border-box;line-height:"+Bline+"px; font-weight: bold; font-family: Arial; font-weight: bold; font-size: "+Bfont+'px; text-align: center;" value="'+loadBOLTS[j]+'">';for(boltLock=loadB-1,i=0;i<=loadB;i++)i==boltLock&&0==redCheckB?(document.getElementById("bolt"+i).style.pointerEvents="none",document.getElementById("bolt"+i).style.backgroundColor="#000000"):(document.getElementById("bolt"+i).style.pointerEvents="auto",document.getElementById("bolt"+i).style.backgroundColor="transparent")}function OVERLAP(){4==loadSCREENTYPE||9==loadSCREENTYPE?(loadOVERLAP1=0,loadOVERLAP2=0,overlapALLOWED=[0,0]):3==loadSCREENTYPE||loadFI>5?(loadOVERLAP1<5&&(loadOVERLAP1=0),loadOVERLAP2<5&&(loadOVERLAP2=0),overlapALLOWED=[1,0]):(loadFI>2.5||loadFI,0==loadFEED?(2==loadOVERLAP1&&(loadOVERLAP1=1),2==loadOVERLAP2&&(loadOVERLAP2=1),overlapALLOWED=[1,1]):(1==loadOVERLAP1&&(loadOVERLAP1=2),1==loadOVERLAP2&&(loadOVERLAP2=2),overlapALLOWED=[1,1]))}function OL2(){if(2==loadSCREENTYPE){if(olALLOWED=[],CHANGE=0,match=0,minval=0,1==loadPERPAR)minpodp=300,Math.floor(loadWS/minpodp)<=2&&(minpodp=Math.floor(loadWS/3));else{for(minpodp=300,i=0;i<loadSUPPORTS.length;i++)loadSUPPORTS[i]<minpodp&&(minpodp=loadSUPPORTS[i]);Math.floor((loadLS-150)/minpodp)<=2&&(minpodp=Math.floor((loadLS-150)/3))}for(ERROROL=0,loadFI<1.5?pf=4+loadFI:loadFI<=2?pf=6+loadFI:pf=loadOW+loadFI,loadOW<=4?olmax=150:loadOW<=9?olmax=180:loadOW<=15?olmax=220:loadOW<=25?olmax=250:olmax=300,olmax2=olmax,minpodp<olmax-2*pf&&(olmax=minpodp-2*pf),nf=olmax/pf,nf2=olmax2/pf,K=Math.round(nf),K%2==0?Math.abs(nf-(K+1))>Math.abs(nf-(K-1))?K-=1:K+=1:K=K,nf=Math.abs(K),m=0,olzakres=[],y=3;y<=nf;y+=2)oltemp=y*pf-loadFI,oltemp>loadOW&&(olzakres[m]=oltemp,olALLOWED[olALLOWED.length]=oltemp,m+=1);for(sel=0,i=0;i<olzakres.length;i++)loadOL==olzakres[i]&&(sel=1);if(0==sel){for(tempol=olzakres[0],i=0;i<olzakres.length;i++)i<olzakres.length-1&&loadOL>olzakres[i]?tempol=olzakres[i+1]:i==olzakres.length-1&&loadOL>olzakres[i]&&(tempol=olzakres[olzakres.length-1]);1==loadNEW||1==pickedOL?(loadOL=tempol,pickedOL=0):loadOL=olzakres[olzakres.length-1]}}}function PERPAR(){1!=loadSCREENTYPE&&3!=loadSCREENTYPE&&7!=loadSCREENTYPE&&9!=loadSCREENTYPE||1!=loadPERPAR||(tempOW=loadOW,loadOW=loadOL,loadOL=tempOW,loadPERPAR=0)}function SPISPA(){loadSPISPA<=1?forceSPISPA=loadSPISPA:forceSPISPA=99,1==forceSPISPA?(0==hookWidth||0==hookHeight&&0==hookRadius?SpL=0:SpL=1,0==hookWidthR||0==hookHeightR&&0==hookRadiusR?SpR=0:SpR=1):0==forceSPISPA?SpL=SpR=0:(0==hookHeight&&hookRadius>hookSheet?SpL=1:0==hookHeight&&hookRadius==hookSheet&&hookAngle>0?SpL=0:hookHeight>0?SpL=1:SpL=0,0==hookHeightR&&hookRadiusR>hookSheetR?SpR=1:0==hookHeightR&&hookRadiusR==hookSheetR&&hookAngleR>0?SpR=0:hookHeightR>0?SpR=1:SpR=0)}function WIREDETAILS(){0==drawingMode?pencilWeight=0:1==machineSelect?pencilWeight=4:pencilWeight=1,qualityLevel=1e6,0==mobile?qualityFactor=Math.round(1315888e6):qualityFactor=1315888e6/6,facesNumber=qualityFactor/(CANVAS_HEIGHT*CANVAS_WIDTH),iterWire=3,0==drawingMode?computeWire=1:computeWire=0,detailsRender=0,4==loadSCREENTYPE?hookwireSteps=60:hookwireSteps=30,scaleOpening=0,1==loadSCREENTYPE?(LIMIT=(loadWS*loadLS*(80/1485*loadOW+2850/1485)+loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2)*(80/1485*loadOL+2850/1485))/((loadOL+loadFI)*(loadOW+loadFI)),LIMIT<facesNumber/9?(iterWire=6,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/8?(iterWire=5,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/7?(iterWire=4,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/6?(iterWire=3,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):(scaleOpening=1,iterWire=3,LIMIT=facesNumber/6,CONST=(loadOW+loadFI)/(loadOL+loadFI),CON=loadOL/loadFI,a=LIMIT*CONST*(CON+1)/CON,b=-80/1485*loadWS*loadLS*(CONST*CON+CONST+1)/CON-loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2)*(80/1485),c=-2850/1485*loadLS*(2*loadWS+loadOVERLAP1+loadOVERLAP2),delta=b*b-4*a*c,ol1=(-b+Math.sqrt(delta))/(2*a),ow1=CONST*(ol1+loadFI)-loadFI,fi1=ol1/CON,ol1=Math.round(.83*ol1),ow1=Math.round(.83*ow1),fi1=Math.round(.92*fi1))):2==loadSCREENTYPE?(loadFI<1.5?OW2=4:loadFI<=2?OW2=6:OW2=loadOW,0==loadPERPAR?(LIMIT=(loadWS*loadLS*(80/1485*loadOW+2850/1485)+loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2)*(80/1485*OW2+2850/1485))/((OW2+loadFI)*(loadOW+loadFI)),LIMIT<facesNumber/9?(iterWire=6,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/8?(iterWire=5,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/7?(iterWire=4,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/6?(iterWire=3,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):(scaleOpening=1,iterWire=3,LIMIT=facesNumber/6,CONST=(loadOW+loadFI)/(OW2+loadFI),CON=OW2/loadFI,CONOL=loadOW/loadOL,a=LIMIT*CONST*(CON+1)/CON,b=-80/1485*loadWS*loadLS*(CONST*CON+CONST+1)/CON-loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2)*(80/1485),c=-2850/1485*loadLS*(2*loadWS+loadOVERLAP1+loadOVERLAP2),delta=b*b-4*a*c,OW2=(-b+Math.sqrt(delta))/(2*a),fi1=OW2/CON,ow1=CONST*(OW2+fi1)-fi1,OW2=Math.round(OW2),ow1=Math.round(ow1),fi1=Math.round(fi1),ol1=Math.round(loadOL))):(LIMIT=(loadWS*loadLS*(80/1485*OW2+2850/1485)+loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2)*(80/1485*loadOW+2850/1485))/((OW2+loadFI)*(loadOW+loadFI)),LIMIT<facesNumber/9?(iterWire=6,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/8?(iterWire=5,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/7?(iterWire=4,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/6?(iterWire=3,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):(scaleOpening=1,iterWire=3,LIMIT=facesNumber/6,CONST=(loadOW+loadFI)/(OW2+loadFI),CON=loadOW/loadFI,CONOL=loadOW/loadOL,ow1=Math.abs((loadLS*(2850/1485*(loadWS+loadOVERLAP1+loadOVERLAP2)+loadWS*(80/1485*OW2+2850/1485))+loadFI*(OW2+loadFI))/(LIMIT*(OW2+loadFI)-loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2))),fi1=Math.abs(ow1/CON),OW2=Math.round((Math.abs(ow1)+fi1)/CONST-fi1),ow1=Math.round(ow1),OW2=Math.round(OW2),fi1=Math.round(fi1),ol1=Math.round(loadOL)))):4==loadSCREENTYPE?(LIMIT=loadWS/(loadOW+loadFI)*(2*hookwireSteps+1),LIMIT<facesNumber/6?(iterWire=6,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=loadOL):LIMIT<facesNumber/5?(iterWire=5,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=loadOL):LIMIT<facesNumber/4?(iterWire=4,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=loadOL):LIMIT<facesNumber/3?(iterWire=3,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=loadOL):(scaleOpening=1,iterWire=3,LIMIT=facesNumber/iterWire,CON=loadOW/loadFI,ow1=(loadWS*(2*hookwireSteps+1)-LIMIT*loadFI)/LIMIT,fi1=ow1/CON,ol1=loadOL,ow1=Math.round(ow1),fi1=Math.round(fi1))):3==loadSCREENTYPE||0==loadSCREENTYPE?(LIMIT=(loadWS+loadOVERLAP1+loadOVERLAP2)/(loadOW+loadFI)*(2*hookwireSteps+1)+loadLS/(loadOL+loadFI),LIMIT<facesNumber/6?(iterWire=6,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/5?(iterWire=5,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/4?(iterWire=4,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/3?(iterWire=3,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):(scaleOpening=1,iterWire=3,LIMIT=facesNumber/iterWire,CONST=(loadOW+loadFI)/(loadOL+loadFI),CON=loadOW/loadFI,ow1=((loadOW+loadFI)/CONST-loadFI+loadFI)*(loadWS+loadOVERLAP1+loadOVERLAP2)*(2*hookwireSteps+1)/(LIMIT*((loadOW+loadFI)/CONST-loadFI+loadFI)-loadLS)-loadFI,fi1=ow1/CON,ow1=Math.round(ow1),fi1=Math.round(fi1),ol1=(ow1+fi1)/CONST-fi1)):5==loadSCREENTYPE||8==loadSCREENTYPE?(TH=loadOW/.82842712+3*loadFI,TW=loadOW/.41421356,TP=.947*loadOW+3.4849,LIMIT=loadLS/TW*TP*(loadWS+loadOVERLAP1+loadOVERLAP2)/TH+loadWS/TH*(2*hookwireSteps+1),LIMIT<facesNumber/9?(iterWire=6,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/8?(iterWire=5,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/7?(iterWire=4,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/6?(iterWire=3,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):(scaleOpening=1,iterWire=3,CON=loadOW/loadFI,LIMIT=facesNumber/6,a=LIMIT/.34314574657574715+3*LIMIT/(.41421356*CON),b=loadWS*(2*hookwireSteps+1)/.41421356-.947*loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2),c=3.4849*-loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2),delta=b*b-4*a*c,ow1=Math.abs(Math.round((-b+Math.sqrt(delta))/(2*a))),fi1=Math.round(ow1/CON),ol1=Math.round(loadOL))):6==loadSCREENTYPE?(TP=7/37*loadOW+164/37,TW=loadOW*Math.sqrt(2)+loadFI,TH=loadOW/2*Math.sqrt(2)+loadFI,LIMIT=loadLS*TP/TW*(loadWS+loadOVERLAP1+loadOVERLAP2)/TH,LIMIT<facesNumber/9?(iterWire=6,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/8?(iterWire=5,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/7?(iterWire=4,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/6?(iterWire=3,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):(scaleOpening=1,iterWire=3,LIMIT=facesNumber/6,CON=loadOW/loadFI,a=(CON*LIMIT*(2*CON+3*Math.sqrt(2))+2*LIMIT)/(2*CON*CON),b=-7/37*loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2),c=-164/37*loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2),delta=b*b-4*a*c,ow1=Math.abs(Math.round((-b+Math.sqrt(delta))/(2*a))),fi1=Math.round(ow1/CON),ol1=Math.round(loadOL))):7==loadSCREENTYPE&&(LIMIT=(loadWS*loadLS*(80/1485*loadOW+2850/1485)+loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2)*(80/1485*loadOL+2850/1485))/((loadOL+loadFI)*(loadOW+loadFI)),LIMIT<facesNumber/9?(iterWire=6,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/8?(iterWire=5,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/7?(iterWire=4,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):LIMIT<facesNumber/6?(iterWire=3,fi1=Math.round(loadFI),ow1=Math.round(loadOW),ol1=Math.round(loadOL)):(scaleOpening=1,iterWire=3,LIMIT=facesNumber/6,CONST=(loadOW+loadFI)/(loadOL+loadFI),CON=loadOL/loadFI,a=LIMIT*CONST*(CON+1)/CON,b=-80/1485*loadWS*loadLS*(CONST*CON+CONST+1)/CON-loadLS*(loadWS+loadOVERLAP1+loadOVERLAP2)*(80/1485),c=-2850/1485*loadLS*(2*loadWS+loadOVERLAP1+loadOVERLAP2),delta=b*b-4*a*c,ol1=(-b+Math.sqrt(delta))/(2*a),ow1=CONST*(ol1+loadFI)-loadFI,fi1=ol1/CON,ol1=Math.round(.83*ol1),ow1=Math.round(.83*ow1),fi1=Math.round(.92*fi1))),1==loadSCREENTYPE?(trianglePointsL=80/1485*ol1+2850/1485,trianglePointsW=80/1485*ow1+2850/1485,detailsLS=Math.round(1e3/(ol1+fi1)*trianglePointsL),detailsWS=Math.round(1e3/(ow1+fi1)*trianglePointsW)):2==loadSCREENTYPE?(trianglePointsL=.053872*OW2+1.9192,trianglePointsW=.053872*ow1+1.9192,0==loadPERPAR?(detailsLS=Math.round(1e3/(OW2+fi1)*trianglePointsL),detailsWS=Math.round(1e3/(ow1+fi1)*trianglePointsW)):(detailsWS=Math.round(1e3/(OW2+fi1)*trianglePointsL),detailsLS=Math.round(1e3/(ow1+fi1)*trianglePointsW))):6==loadSCREENTYPE?(trianglePoints=7/37*ow1+164/37,triangleLength=ow1*Math.sqrt(2)+loadFI,detailsLS=Math.round(1e3/triangleLength*trianglePoints),detailsWS=1):5==loadSCREENTYPE||8==loadSCREENTYPE?(trianglePoints=.947*ow1+3.4849,triangleLength=ow1/2/.41421356*2,detailsLS=Math.round(1e3/triangleLength*trianglePoints),detailsWS=1):4==loadSCREENTYPE||3==loadSCREENTYPE||0==loadSCREENTYPE?(detailsLS=300,detailsWS=1):7==loadSCREENTYPE&&(trianglePointsL=80/1485*ol1+2850/1485,trianglePointsW=80/1485*ow1+2850/1485,detailsLS=Math.round(1e3/(ol1+fi1)*trianglePointsL),detailsWS=Math.round(1e3/(ow1+fi1)*trianglePointsW)),detailsLS=Math.abs(Math.round(detailsLS)),detailsWS=Math.abs(Math.round(detailsWS)),wireDetails=Math.round(detailsLS*(loadLS/1e3)),wireDetailsStraight=Math.round(detailsLS*(loadLS/1e3)),wireDetailsCross=Math.round(detailsWS*((loadWS+loadOVERLAP1+loadOVERLAP2)/1e3))}function dataCheck(){if(0==loadFLIPY&&(loadFLIPY=1),reLoad=0,tableSelect(),OW(),FI(),CHECKLIMITS(),LSWS(),N(),STRIPS(),WIREMATERIAL(),OL(),PERPAR(),HOOKSHEETS(),HOOKSMATERIAL(),4==loadSCREENTYPE?(RhookSheet=hookSheet=1.2,RhookSheetR=hookSheetR=1.2):(3==loadSCREENTYPE||loadSCREENTYPE,2==loadHOOKSHEETS?(hookSheet=6,hookSheetR=6,RhookSheet=4,RhookSheetR=4):(hookSheet=3,hookSheetR=3,RhookSheet=1.5,RhookSheetR=1.5)),HOOKTYPE(),B(),SPISPA(),1==reLoad)reloadScreen();else{for(BOLTS(),SUPPORTS(),OL2(),OVERLAP(),WIREDETAILS(),document.getElementById("valB").value=loadB,document.getElementById("valBWIDTH").value=loadBWIDTH,document.getElementById("valM16").style.backgroundColor="transparent",document.getElementById("valM16").style.color="#FFFFFF",document.getElementById("valM14").style.backgroundColor="transparent",document.getElementById("valM14").style.color="#FFFFFF",document.getElementById("valM12").style.backgroundColor="transparent",document.getElementById("valM12").style.color="#FFFFFF",0==loadBTHREAD&&(loadBTHREAD=16),document.getElementById("valM"+loadBTHREAD).style.backgroundColor="#FFFFFF",document.getElementById("valM"+loadBTHREAD).style.color="#000000",document.getElementById("strips").style.backgroundImage="url('images/strip"+loadSTRIPS+".png')",document.getElementById("OWselect").innerHTML=loadOW+" mm",2==loadSCREENTYPE?document.getElementById("OLselect").innerHTML=5*Math.ceil(loadOL/5)+" mm":document.getElementById("OLselect").innerHTML=loadOL+" mm",i=1;i<=totalScreentypes;i++)document.getElementById("screenButton"+i).style.borderColor="#000000",document.getElementById("screenButton"+i).style.borderWidth="1px",document.getElementById("screenButton"+i).style.backgroundColor="rgba(30, 30, 35, 0.25)";for(0!==loadSCREENTYPE&&(document.getElementById("screenButton"+loadSCREENTYPE).style.borderColor="#FFFFFF",document.getElementById("screenButton"+loadSCREENTYPE).style.borderWidth="3px",document.getElementById("screenButton"+loadSCREENTYPE).style.backgroundColor="rgba(256, 256, 256, 0.25)"),j=0;j<3;j++)supBase==j?(document.getElementById("datum"+j).style.backgroundColor="#FFFFFF",document.getElementById("datum"+j).style.color="#000000",document.getElementById("datum"+j).style.pointerEvents="none"):(document.getElementById("datum"+j).style.backgroundColor="transparent",document.getElementById("datum"+j).style.color="#FFFFFF",document.getElementById("datum"+j).style.pointerEvents="auto")}}function screenData(){for(screentype=loadSCREENTYPE,hookType=loadHOOKTYPE,hookTypeR=loadHOOKTYPER,hookSheets=loadHOOKSHEETS,mountType=loadMOUNTTYPE,flipY=loadFLIPY,hooksMaterial=loadHOOKSMATERIAL,feedDirection=loadFEED,inLS=loadLS,inWS=loadWS,overLap1=loadOVERLAP1,overLap2=loadOVERLAP2,rwireDiameter=Math.round(loadFI),ropeningLength=Math.round(loadOL),ropeningWidth=Math.round(loadOW),wireDiameter=fi1,openingLength=ol1,openingWidth=ow1,perPar=loadPERPAR,wireMaterial=loadWIREMATERIAL,supportCount=loadN,stripShape=loadSTRIPS,rubberType=loadSTRIPS,boltCount=loadB,boltThread=loadBTHREAD,boltWidth=loadBWIDTH,supportArray=[],i=0;i<=loadN;i++)supportArray[i]=loadSUPPORTS[i];for(boltArray=[],i=0;i<=loadB;i++)boltArray[i]=loadBOLTS[i];spispaCheck=loadSPISPA,ignoreSpA="A",ignoreNUM=2,0!=SpL||5!=hookType&&6!=hookType&&9!=hookType&&0!=hookType||(ignoreSpA="",ignoreNUM=0),0!=SpR||5!=hookTypeR&&6!=hookTypeR&&9!=hookTypeR&&0!=hookTypeR||(ignoreSpA="",ignoreNUM=0),SpL+SpR==1?(SPname="SPI"+ignoreSpA,loadSPISPA=2+ignoreNUM):SpL+SpR==0?(SPname="SPA",loadSPISPA=3):(SPname="SPI",loadSPISPA=2),forceSPISPA<10&&(loadSPISPA=forceSPISPA),document.getElementById("labelLS").innerHTML=SPname+" [mm] :",2==hookType||4==hookType||7==hookType||5==hookType||6==hookType||12==hookType?upDownL=-1*flipY:upDownL=1*flipY,2==mountType?upDownR=-1*upDownL:upDownR=upDownL,screentype<=2||7==screentype?(hookWire=2*wireDiameter,hookWireR=2*wireDiameter,wireDiameter>fiMaxInHooks&&wireDiameter<=10?crimpDivider=-1/14*wireDiameter+17/14:crimpDivider=wireDiameter>=10?.5:1,hookWireThin=wireDiameter*crimpDivider,RhookWire=2*loadFI,RhookWireR=2*loadFI,loadFI>fiMaxInHooks&&loadFI<=10?RcrimpDivider=-1/14*loadFI+17/14:loadFI>=10?RcrimpDivider=.5:RcrimpDivider=1,RhookWireThin=loadFI*RcrimpDivider):(hookWireThin=wireDiameter,hookWire=wireDiameter,hookWireR=wireDiameter,crimpDivider=1,RhookWireThin=loadFI,RhookWire=loadFI,RhookWireR=loadFI,RcrimpDivider=1),screenWidth=inWS,invY=upDownL,invYR=upDownR,0==hookType?radiusCancel=0:radiusCancel=1,0==hookTypeR?radiusCancelR=0:radiusCancelR=1,0==hookSheets?(4==loadSCREENTYPE?(leftVal=5*hookSheet+2*hookWire+.02+10*pencilWeight,rightVal=5*hookSheetR+2*hookWireR+.02+10*pencilWeight,screenLength=inLS+SpL*leftVal+SpR*rightVal,RleftVal=5*RhookSheet+2*RhookWire+.02,RrightVal=5*RhookSheetR+2*RhookWireR+.02,RscreenLength=inLS+SpL*RleftVal+SpR*RrightVal,screenRealLeft=screenLength/2-SpL*leftVal,screenRealRight=screenLength/2-SpR*rightVal,RscreenRealLeft=RscreenLength/2-SpL*RleftVal,RscreenRealRight=RscreenLength/2-SpR*RrightVal):(0==hookType?(leftVal=0,RleftVal=0):0==hookWidth?(leftVal=hookSheet+hookWire*crimpDivider/2+2*pencilWeight,RleftVal=RhookSheet+RhookWire*RcrimpDivider/2):(leftVal=2*hookSheet+hookWire*crimpDivider+4*pencilWeight,RleftVal=2*RhookSheet+RhookWire*RcrimpDivider),0==hookTypeR?(rightVal=0,RrightVal=0):0==hookWidthR?(rightVal=hookSheetR+hookWireR*crimpDivider/2+2*pencilWeight,RrightVal=RhookSheetR+RhookWireR*RcrimpDivider/2):(rightVal=2*hookSheetR+hookWireR*crimpDivider+4*pencilWeight,RrightVal=2*RhookSheetR+RhookWireR*RcrimpDivider),screenLength=inLS+SpL*leftVal+SpR*rightVal,RscreenLength=inLS+SpL*RleftVal+SpR*RrightVal,screenRealLeft=screenLength/2-SpL*leftVal,screenRealRight=screenLength/2-SpR*rightVal,RscreenRealLeft=RscreenLength/2-SpL*RleftVal,RscreenRealRight=RscreenLength/2-SpR*RrightVal),0==SpL?(meshEdge=screenRealLeft-(leftVal+hookRadius*radiusCancel),RmeshEdge=RscreenRealLeft-(RleftVal+hookRadius*radiusCancel)):(meshEdge=screenRealLeft-hookRadius*radiusCancel,RmeshEdge=RscreenRealLeft-hookRadius*radiusCancel),0==SpR?(meshEdgeR=screenRealRight-(rightVal+hookRadiusR)*radiusCancelR,RmeshEdgeR=RscreenRealRight-(RrightVal+hookRadiusR)*radiusCancelR):(meshEdgeR=screenRealRight-hookRadiusR*radiusCancelR,RmeshEdgeR=RscreenRealRight-hookRadiusR*radiusCancelR)):1==hookSheets?(screenLength=inLS+SpL*hookWire*radiusCancel+SpR*hookWireR*radiusCancelR,RscreenLength=inLS+SpL*RhookWire*radiusCancel+SpR*RhookWireR*radiusCancelR,screenRealLeft=screenLength/2-SpL*hookWire*radiusCancel,screenRealRight=screenLength/2-SpR*hookWireR*radiusCancelR,RscreenRealLeft=RscreenLength/2-SpL*RhookWire*radiusCancel,RscreenRealRight=RscreenLength/2-SpR*RhookWireR*radiusCancelR,meshEdge=screenLength/2-(hookRadius+hookWire)*radiusCancel,meshEdgeR=screenLength/2-(hookRadiusR+hookWireR)*radiusCancelR,RmeshEdge=RscreenLength/2-(hookRadius+RhookWire)*radiusCancel,RmeshEdgeR=RscreenLength/2-(hookRadiusR+RhookWireR)*radiusCancelR):2==hookSheets&&(screenLength=inLS+SpL*hookSheet*radiusCancel+SpR*hookSheetR*radiusCancelR,RscreenLength=inLS+SpL*RhookSheet*radiusCancel+SpR*RhookSheetR*radiusCancelR,screenRealLeft=screenLength/2-SpL*hookSheet*radiusCancel,screenRealRight=screenLength/2-SpR*hookSheetR*radiusCancelR,RscreenRealLeft=RscreenLength/2-SpL*RhookSheet*radiusCancel,RscreenRealRight=RscreenLength/2-SpR*RhookSheetR*radiusCancelR,meshEdge=screenLength/2-(hookRadius+hookSheet)*radiusCancel,meshEdgeR=screenLength/2-(hookRadiusR+hookSheetR)*radiusCancelR,RmeshEdge=RscreenLength/2-(hookRadius+RhookSheet)*radiusCancel,RmeshEdgeR=RscreenLength/2-(hookRadiusR+RhookSheetR)*radiusCancelR),forceSPISPA<2?(document.getElementById("convertSPISPA").style.display="block",0==forceSPISPA?document.getElementById("convertSPISPA").innerHTML="PRZELICZ SPA->SPI":document.getElementById("convertSPISPA").innerHTML="PRZELICZ SPI->SPA"):document.getElementById("convertSPISPA").style.display="none",screenName(),0==panelNumber&&(document.getElementById("screenName").style.display="block",!1===editedScreen&&(document.getElementById("addCartIcon").style.display="block")),redrawL=1,redrawR=1}function screenMesh(){screenMeshGroup=new THREE.Object3D,calculateRealDims(),0==flatScreen&&hooksMeshes(),screentypeMesh(),supportMesh(),0!=screentype&&overlapMesh(),boltMesh(),0==noDims&&dimsLines(),0==productSheets&&hollowScreen(),0==productSheets&&interArrayCreate(),screenMeshGroup.position.set(0,150,0),scene.add(screenMeshGroup)}function screenMeshTemplate(e,o,t,a,l,r,i,n){1==createNewBox&&(loadSCREENTYPE=0,loadHOOKSHEETS=0,0==o?(loadSCREENTYPE=1,loadOW=80,loadOL=80):(loadSCREENTYPE=1,loadOW=40,loadOL=40),loadDOUBLEFOLD=0,loadDOUBLEFOLDR=0,loadOVERLAP1=0,loadOVERLAP2=0),dataCheck(),screenData(),screenMeshGroup=new THREE.Object3D,calculateRealDims(),0==flatScreen&&hooksMeshes(),screentypeMesh(),supportMesh(),0!=screentype&&overlapMesh(),boltMesh(),0==productSheets&&hollowScreen();var d=new THREE.BoxGeometry(loadLS+100,100,loadWS+100),s=new THREE.MeshBasicMaterial({color:65280,side:THREE.BackSide,transparent:!0,opacity:0,depthWrite:!1});hollowSBOX[e]=new THREE.Mesh(d,s),0==loadFEED?xtempx=loadLS:(xtempx=loadWS,screenMeshGroup.rotateY(Math.PI/2),hollowSBOX[e].rotateY(Math.PI/2)),pos=1==i&&1==n?r+a+xtempx/2:r+xtempx/2,screenMeshGroup.position.set(pos+.5*o*SBOXheight-.5*(l-1)*SBOXheight/2,-((o-1)*SBOXheight-(l-1)*SBOXheight/2+SBOXheight),0),hollowSBOX[e].position.set(pos+.5*o*SBOXheight-.5*(l-1)*SBOXheight/2,-((o-1)*SBOXheight-(l-1)*SBOXheight/2+SBOXheight),0),screenboxGroup.add(screenMeshGroup),screenboxGroup.add(hollowSBOX[e]),1==createNewBox?(document.getElementById("screenName").style.display="none",document.getElementById("addCartIcon").style.display="none",document.getElementById("newSBOXmenu").style.display="block"):(document.getElementById("screenName").style.display="block",document.getElementById("addCartIcon").style.display="block",document.getElementById("newSBOXmenu").style.display="none")}function saveAsImage(e){loader.style.zIndex=150,loader.style.display="block",setTimeout((function(){1==clearDimSnap&&0==panelNumber&&(screenMeshGroup.remove(dimsGroup),noDims=1),document.getElementById("canvas").style.display="none",renderer.setClearColor(16777215,1),renderer.setSize(snapShotWidth,snapShotHeight),screenListReady=1}),5)}function saveImage(){screenShotReady=0;try{strMime="image/jpeg",imgData=renderer.domElement.toDataURL(strMime),saveFile(imgData.replace(strMime,strDownloadMime),"screen.jpg")}catch(e){return void console.log(e)}}function saveNotCroppedImage(){screenListReady=0,(imageObject=new Image).crossOrigin="Anonymous",strMime="image/jpeg",strData2=renderer.domElement.toDataURL(strMime),imageObject.src=strData2,screenListReady=2}function saveCroppedImage(){screenListReady=0;try{imgWidth=imageObject.width,imgHeight=imageObject.height,canvasI=document.createElement("canvas"),canvasI.setAttribute("width",imgWidth),canvasI.setAttribute("height",imgHeight),context=canvasI.getContext("2d"),context.drawImage(imageObject,0,0),imageData=context.getImageData(0,0,imgWidth,imgHeight),data=imageData.data,cropTop=!1;for(var e=0;e<imgHeight&&0==cropTop;e+=1)for(var o=0;o<imgWidth&&0==cropTop;o++)offset=imgWidth*e+o,red=data[4*offset],green=data[4*offset+1],blue=data[4*offset+2],opacity=data[4*offset+3],(red<=200||green<=200||blue<=200)&&(cropTop=e);cropBottom=!1;for(e=imgHeight-1;e>-1&&0==cropBottom;e-=1)for(o=0;o<imgWidth&&0==cropBottom;o++)offset=imgWidth*e+o,red=data[4*offset],green=data[4*offset+1],blue=data[4*offset+2],opacity=data[4*offset+3],(red<=200||green<=200||blue<=200)&&(cropBottom=e);cropLeft=!1;for(o=0;o<imgWidth&&0==cropLeft;o+=1)for(e=0;e<imgHeight&&0==cropLeft;e++)offset=imgWidth*e+o,red=data[4*offset],green=data[4*offset+1],blue=data[4*offset+2],opacity=data[4*offset+3],(red<=200||green<=200||blue<=200)&&(cropLeft=o);cropRight=!1;for(o=imgWidth-1;o>-1&&0==cropRight;o-=1)for(e=0;e<imgHeight&&0==cropRight;e++)offset=imgWidth*e+o,red=data[4*offset],green=data[4*offset+1],blue=data[4*offset+2],opacity=data[4*offset+3],(red<=200||green<=200||blue<=200)&&(cropRight=o);cropWidth=cropRight-cropLeft+10,cropHeight=cropBottom-cropTop+10,canvasI.setAttribute("width",cropWidth),canvasI.setAttribute("height",cropHeight),canvasI.getContext("2d").drawImage(imageObject,cropLeft,cropTop,cropWidth,cropHeight,0,0,cropWidth,cropHeight),imgData=canvasI.toDataURL(strMime),strData=imgData.replace(strMime,strDownloadMime),filename="screen.jpg",link=document.createElement("a"),"string"==typeof link.download?0==productSheets?(document.body.appendChild(link),link.download=filename,link.href=strData,link.click(),document.body.removeChild(link),1==noDims&&0==panelNumber&&(dimsLines(),interArrayCreate(),noDims=0),renderer.setClearColor(16777215,0),renderer.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),loader.style.zIndex=0,loader.style.display="none",document.getElementById("canvas").style.display="block"):(shootArray[shootArray.length]=[imgData,cropHeight,cropWidth],makeShoot=!0):(1==noDims&&0==panelNumber&&(dimsLines(),interArrayCreate(),noDims=0),renderer.setClearColor(16777215,0),renderer.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),loader.style.zIndex=0,loader.style.display="none",document.getElementById("canvas").style.display="block",location.replace(uri)),imageObject=!1}catch(e){return imageObject=!1,1==noDims&&0==panelNumber&&(dimsLines(),interArrayCreate(),noDims=0),renderer.setClearColor(16777215,0),renderer.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),loader.style.zIndex=0,loader.style.display="none",document.getElementById("canvas").style.display="block",void console.log(e)}}var saveFile=function(e,o){var t=document.createElement("a");document.createElement("img");"string"==typeof t.download?(document.body.appendChild(t),t.download=o,t.href=e,t.click(),document.body.removeChild(t),1==noDims&&0==panelNumber&&(dimsLines(),interArrayCreate(),noDims=0),renderer.setClearColor(16777215,0),renderer.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),document.getElementById("canvas").style.display="block"):(1==noDims&&0==panelNumber&&(dimsLines(),interArrayCreate(),noDims=0),renderer.setClearColor(16777215,0),renderer.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),document.getElementById("canvas").style.display="block",location.replace(uri))};function setOrtoScreen(){xDist=0,yDist=0,lengthMargin2=70,1!=flatScreen||5!=screentype&&6!=screentype&&8!=screentype&&2!=screentype?lengthVisible=inLS:lengthVisible=rdimE-rdimS,tangensCamS=Math.tan(fovAngle/2*Math.PI/180),px=-xDist,py=-invY*(wireDiameter+hookSheet+hookRadius)+150+yDist,pz=(lengthVisible+lengthMargin2+2*loadBWIDTH)/2/fovRatio/tangensCamS+screenWidth/2,rx=0,ry=0,rz=0,tx=px+xDist,ty=py-yDist,tz=-300,nextPos=[],nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],faceDistance=nextPos[2]-screenWidth/2,ortoWidth=2*Math.tan(fovAngle)*faceDistance*fovRatio,ortoHeight=2*Math.tan(fovAngle)*faceDistance,frontZoom=-2*ortoWidth/(lengthVisible+lengthMargin2+2*loadBWIDTH),(camera=new THREE.OrthographicCamera(ortoWidth,-ortoWidth,-ortoHeight,ortoHeight,1,1e4)).zoom=frontZoom,(controls=new THREE.OrbitControls(camera,container)).enableZoom=!1,controls.enableRotate=!1,controls.enablePan=!1,controls.target.set(nextPos[6],nextPos[7],nextPos[8]),camera.rotation.set(nextPos[3],nextPos[4],nextPos[5]),camera.position.set(nextPos[0],nextPos[1],nextPos[2]),projector=new THREE.Projector(mouse,camera),controls.update(),camera.updateProjectionMatrix()}function init(){saveLink=document.createElement("div"),saveLink.style.position="absolute",saveLink.style.zIndex=300,saveLink.style.top=CANVAS_HEIGHT+bannerH-40+"px",saveLink.style.left=CANVAS_WIDTH+menuW*scaleMeta-40+"px",saveLink.style.width="30px",saveLink.style.height="30px",saveLink.style.background="transparent",saveLink.style.textAlign="center",saveLink.innerHTML='<a href="#" id="saveLink"><img TITLE="SCREENSHOT" src="ICO/camera.svg" style="width: 30px; height: 30px;"/></a>',0!=browser&&1!=consulAlert||(saveLink.style.display="none"),document.body.appendChild(saveLink),document.getElementById("saveLink").addEventListener("click",saveAsImage),display=document.createElement("div"),display.style.position="absolute",display.style.zIndex=300,display.style.top=bannerH+12+"px",display.style.left=CANVAS_WIDTH+menuW*scaleMeta-40+"px",display.style.width="30px",display.style.height="30px",display.style.background="transparent",display.style.textAlign="center",display.style.cursor="pointer",display.innerHTML='<div id="display" onClick="changeDrawingMode()"><img TITLE="REALISTIC/DRAWING VIEW" src="ICO/display.svg" style="width: 30px; height: 30px;"/></div>',document.body.appendChild(display),fovAngle=75,nearVar=1,farVar=1e4,fovRatio=CANVAS_WIDTH/CANVAS_HEIGHT,(renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:!0})).setClearColor(16777215,0),renderer.setSize(CANVAS_WIDTH,CANVAS_HEIGHT),0==productSheets?(camera=new THREE.PerspectiveCamera(fovAngle,fovRatio,nearVar,farVar),tangensCam=Math.tan(fovAngle/2*Math.PI/180),angleCamX=10,angleCamY=20,camera.position.z=screenRealLeft/fovRatio/tangensCam+screenWidth/2,camera.position.x=-Math.sin(angleCamX*Math.PI/180)*camera.position.z,camera.position.y=Math.sin(angleCamY*Math.PI/180)*camera.position.z,controls=new THREE.OrbitControls(camera,container)):setOrtoScreen(),scene=new THREE.Scene,1==detailsRender&&(renderer.shadowMapEnabled=!0,renderer.shadowMapType=THREE.PCFSoftShadowMap,scene.fog=new THREE.Fog(0,.015,7e3)),raycaster=new THREE.Raycaster,mouse=new THREE.Vector2,projector=new THREE.Projector(mouse,camera),window.addEventListener("resize",onWindowResize,!1),strMime="image/jpeg",imgData=renderer.domElement.toDataURL(strMime),scene2=new THREE.Scene,camera2=new THREE.OrthographicCamera(CANVAS_WIDTH/-2,CANVAS_WIDTH/2,CANVAS_HEIGHT/2,CANVAS_HEIGHT/-2,1,1e4),(renderer2=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setSize(CANVAS_WIDTH,CANVAS_HEIGHT),raycaster2=new THREE.Raycaster,mouse2=new THREE.Vector2,projector2=new THREE.Projector(mouse2,camera2),container2.appendChild(renderer2.domElement),pointLight22=new THREE.PointLight(16772846),pointLight22.position.set(0,0,0),scene2.add(pointLight22),container.appendChild(renderer.domElement),selSampleGroup=new THREE.Object3D,sampleOpening=new THREE.Object3D,scene2.add(selSampleGroup),scene2.add(sampleOpening)}function animate(){requestAnimationFrame(animate),1==makeShoot&&shootCount>0?startShooting():1==makeShoot&&shootCount<=0?(makeShoot=!1,outputDataSheet()):1==screenListReady?saveNotCroppedImage():2==screenListReady&&!1!==imageObject&&imageObject.height>0&&imageObject.width>0&&renderer.getSize().width==snapShotWidth&&renderer.getSize().height==snapShotHeight&&saveCroppedImage(),0==viewStatus||1==viewStatus?controls.update():2==viewStatus?(meshFeed.material.opacity=1,viewFrame<=30?(camera.position.x+=IterPos[0],camera.position.y+=IterPos[1],camera.position.z+=IterPos[2],camera.rotation.x+=IterPos[3],camera.rotation.y+=IterPos[4],camera.rotation.z+=IterPos[5],controls.target.x+=IterPos[6],controls.target.y+=IterPos[7],controls.target.z+=IterPos[8],viewFrame+=1):viewFrame>30&&(camera.position.set(mainPos[0],mainPos[1],mainPos[2]),camera.rotation.set(mainPos[3],mainPos[4],mainPos[5]),controls.target.set(mainPos[6],mainPos[7],mainPos[8]),controls.enableZoom=!0,controls.enableRotate=!0,controls.enablePan=!0,viewStatus=0,viewFrame=1)):(camera.isOrthographicCamera&&0==camType&&((camera=new THREE.PerspectiveCamera(fovAngle,fovRatio,nearVar,farVar)).position.set(prevPos[0],prevPos[1],prevPos[2]),camera.rotation.set(prevPos[3],prevPos[4],prevPos[5]),(controls=new THREE.OrbitControls(camera,container)).enableZoom=!1,controls.enableRotate=!1,controls.enablePan=!1,controls.update(),controls.target.set(prevPos[6],prevPos[7],prevPos[8]),projector=new THREE.Projector(mouse,camera),controls.update()),viewFrame<=30?(camera.position.x+=IterPos[0],camera.position.y+=IterPos[1],camera.position.z+=IterPos[2],controls.target.x+=IterPos[6],controls.target.y+=IterPos[7],controls.target.z+=IterPos[8],camera.rotation.x+=IterPos[3],camera.rotation.y+=IterPos[4],camera.rotation.z+=IterPos[5],camera.isOrthographicCamera&&1==camType?(camera.zoom+=IterZoom,camera.updateProjectionMatrix()):camera.updateProjectionMatrix(),viewFrame+=1):viewFrame>30&&(camera.isPerspectiveCamera&&1==camType&&((camera=new THREE.OrthographicCamera(ortoWidth,-ortoWidth,-ortoHeight,ortoHeight,1,1e4)).zoom=frontZoom,meshFeed.material.opacity=0),1==camType&&(camera.zoom=frontZoom),(controls=new THREE.OrbitControls(camera,container)).enableZoom=!1,controls.enableRotate=!1,controls.enablePan=!1,controls.target.set(nextPos[6],nextPos[7],nextPos[8]),camera.rotation.set(nextPos[3],nextPos[4],nextPos[5]),camera.position.set(nextPos[0],nextPos[1],nextPos[2]),projector=new THREE.Projector(mouse,camera),controls.update(),camera.updateProjectionMatrix(),3!=panelNumber&&4!=panelNumber&&8!=panelNumber&&showPanel(viewStatus),viewStatus=1,viewFrame=1,loadVIEW=0))}function render(){requestAnimationFrame(render),renderer.render(scene,camera),renderer2.render(scene2,camera2)}function lightSettle(){var e,o,t;e=new THREE.DirectionalLight(16777215,.7),scene.add(e),(o=new THREE.PointLight(16772846)).position.set(-meshEdge,screenWidth/2-(hookRadius+hookSheet+hookWire/2),-screenWidth/2+600),scene.add(o),(t=new THREE.HemisphereLight(16711680,3487061,.6)).position.set(300,-600,2),scene.add(t)}function showView(e){2==e?(prevPos=[camera.position.x,camera.position.y,camera.position.z,camera.rotation.x,camera.rotation.y,camera.rotation.z,controls.target.x,controls.target.y,controls.target.z],IterPos=[(mainPos[0]-prevPos[0])/30,(mainPos[1]-prevPos[1])/30,(mainPos[2]-prevPos[2])/30,(mainPos[3]-prevPos[3])/30,(mainPos[4]-prevPos[4])/30,(mainPos[5]-prevPos[5])/30,(mainPos[6]-prevPos[6])/30,(mainPos[7]-prevPos[7])/30,(mainPos[8]-prevPos[8])/30],camera.isOrthographicCamera&&((camera=new THREE.PerspectiveCamera(fovAngle,fovRatio,nearVar,farVar)).position.set(prevPos[0],prevPos[1],prevPos[2]),camera.rotation.set(prevPos[3],prevPos[4],prevPos[5]),(controls=new THREE.OrbitControls(camera,container)).enableZoom=!1,controls.enableRotate=!1,controls.enablePan=!1,controls.update(),controls.target.set(prevPos[6],prevPos[7],prevPos[8]),projector=new THREE.Projector(mouse,camera),controls.update()),viewStatus=2):(document.getElementById("machineIcon").style.display="none",0==panelNumber&&(mainPos=[camera.position.x,camera.position.y,camera.position.z,camera.rotation.x,camera.rotation.y,camera.rotation.z,controls.target.x,controls.target.y,controls.target.z]),prevPos=[camera.position.x,camera.position.y,camera.position.z,camera.rotation.x,camera.rotation.y,camera.rotation.z,controls.target.x,controls.target.y,controls.target.z],3==e?hookchart>0?(xd=0,yd=150,zd=165,xSpacing=zd*(CANVAS_WIDTH/2)/(screenWidth/2+zd),px=-(meshEdge-hookEntryWidth/2+(wireDiameter+2*hookSheet+hookRadius))-xd-xSpacing,py=-invY*(wireDiameter+hookSheet+hookRadius)+150+yd,pz=screenWidth/2+zd,rx=-Math.atan(yd/zd),ry=-Math.atan(xd/zd),rz=-Math.atan(xd/yd),tx=px,ty=py-yd,tz=pz-zd,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=0):(px=-(meshEdge-hookEntryWidth/2+(wireDiameter+2*hookSheet+hookRadius)),py=-invY*(wireDiameter+hookSheet+hookRadius)+150,pz=screenWidth/2+165,rx=0,ry=0,rz=0,tx=px,ty=py,tz=-300,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=1,faceDistance=nextPos[2]-screenWidth/2,ortoWidth=2*Math.tan(fovAngle)*faceDistance*fovRatio,ortoHeight=2*Math.tan(fovAngle)*faceDistance,frontZoom=1):4==e?hookchart>0?(xd=0,yd=150,zd=165,xSpacing=zd*(CANVAS_WIDTH/1.5)/(screenWidth/2+zd),px=meshEdgeR-hookEntryWidthR/2+(wireDiameter+2*hookSheet+hookRadiusR)+xd-xSpacing,py=-invYR*(wireDiameter+hookSheet+hookRadiusR)+150+yd,pz=screenWidth/2+zd,rx=-Math.atan(yd/zd),ry=-Math.atan(xd/zd),rz=-Math.atan(xd/yd),tx=px,ty=py-yd,tz=pz-zd,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=0):(px=meshEdgeR-hookEntryWidthR/2+(wireDiameter+2*hookSheet+hookRadiusR),py=-invYR*(wireDiameter+hookSheet+hookRadiusR)+150,pz=screenWidth/2+165,rx=0,ry=0,rz=0,tx=px,ty=py,tz=-300,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=1,faceDistance=nextPos[2]-screenWidth/2,ortoWidth=2*Math.tan(fovAngle)*faceDistance*fovRatio,ortoHeight=2*Math.tan(fovAngle)*faceDistance,frontZoom=1):5==e||13==e?(tangensCamS=Math.tan(fovAngle/2*Math.PI/180),px=0,py=-invY*(wireDiameter+hookSheet+hookRadius)+150,pz=(inLS+lengthMargin)/2/fovRatio/tangensCamS+screenWidth/2,rx=0,ry=0,rz=0,tx=px,ty=py,tz=-300,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=1,camera.isPerspectiveCamera?(faceDistance=nextPos[2]-screenWidth/2,ortoWidth=2*Math.tan(fovAngle)*faceDistance*fovRatio,ortoHeight=2*Math.tan(fovAngle)*faceDistance,frontZoom=-2*ortoWidth/(inLS+lengthMargin)):(ortoWidth=2*Math.tan(fovAngle)*faceDistance*fovRatio,ortoHeight=2*Math.tan(fovAngle)*faceDistance,frontZoom=-2*ortoWidth/(inLS+lengthMargin))):6==e?(tangensCamS=Math.tan(fovAngle/2*Math.PI/180),CANVAS_WIDTH/CANVAS_HEIGHT>(inLS+400)/inWS?xTemp=(inWS/2+150)/tangensCam:xTemp=((inLS+400+60)/2+150)/tangensCam/fovRatio,px=0,py=xTemp,pz=0,rx=-Math.PI/2,ry=0,rz=0,tx=0,ty=0,tz=0,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=1,faceDistance=nextPos[2]-screenWidth/2,ortoWidth=2*Math.tan(fovAngle)*faceDistance*fovRatio,ortoHeight=2*Math.tan(fovAngle)*faceDistance,ortoWidth/ortoHeight>(inLS+300)/inWS?frontZoom=ortoHeight*(-2/(inWS+60)):frontZoom=ortoWidth*(-2/(inLS+60+400))):8==e?(xd=0,yd=150,zd=screenWidth/2,xSpacing=zd*(CANVAS_WIDTH/2)/(screenWidth/2+zd),px=-meshEdge-xd,py=-invY*(wireDiameter+hookSheet+hookRadius)+150+yd,pz=-screenWidth/2+zd,rx=-Math.atan(yd/zd),ry=-Math.atan(xd/zd),rz=-Math.atan(xd/yd),tx=px,ty=py-yd,tz=pz-zd,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=0):9==e?(yCamPos=100,xCamPos=100,px=-meshEdge-xCamPos,py=150+yCamPos,pz=-screenWidth/2,ry=-Math.PI/2,rx=Math.PI/4,rz=Math.PI/4,tx=px+xCamPos,ty=py-yCamPos,tz=pz,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=0):10==e?(yCamPos=100,xCamPos=100,px=meshEdgeR+xCamPos,py=150+yCamPos,pz=screenWidth/2,ry=Math.PI/2,rx=Math.PI/4,rz=-Math.PI/4,tx=px-xCamPos,ty=py-yCamPos,tz=pz,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=0):7==e&&(tangensCamS=Math.tan(fovAngle/2*Math.PI/180),CANVAS_WIDTH/CANVAS_HEIGHT>(loadLS+400)/loadWS?xTemp=(loadWS/1.5+150)/tangensCam:xTemp=((loadLS+400+60)/1.5+150)/tangensCam/fovRatio,px=0,py=xTemp,pz=0,rx=-Math.PI/2,ry=0,rz=0,tx=0,ty=0,tz=0,nextPos=[px,py,pz,rx,ry,rz,tx,ty,tz],camType=0),camera.isOrthographicCamera&&1==camType&&(IterZoom=-(camera.zoom-frontZoom)/30),IterPos=[(nextPos[0]-prevPos[0])/30,(nextPos[1]-prevPos[1])/30,(nextPos[2]-prevPos[2])/30,(nextPos[3]-prevPos[3])/30,(nextPos[4]-prevPos[4])/30,(nextPos[5]-prevPos[5])/30,(nextPos[6]-prevPos[6])/30,(nextPos[7]-prevPos[7])/30,(nextPos[8]-prevPos[8])/30],controls.enableZoom=!1,controls.enableRotate=!1,controls.enablePan=!1,controls.update(),viewStatus=e)}function interArrayCreate(){interArray=labelSUP.concat([meshHookArrayL[0],meshHookArrayR[0],meshHolScreen,meshOV1Screen,meshOV2Screen,labelSPISPA,labelWidth,meshFeed]),interArray=interArray.concat(labelBolt),interArray=interArray.concat(meshHolSup),interArray=interArray.concat(meshHolB),interArray2=[]}function sboxArrayCreate(){for(interArray=[],z=0;z<hollowSBOX.length;z++)interArray=interArray.concat(hollowSBOX[z])}function onDocumentMouseOver(e){if(e.preventDefault(),mouse2.set((e.offsetX-renderer2.domElement.offsetLeft)/renderer2.domElement.clientWidth*2-1,-(e.offsetY-renderer2.domElement.offsetTop)/renderer2.domElement.clientHeight*2+1,.5),raycaster2.setFromCamera(mouse2,camera2),intersects2=raycaster2.intersectObjects(interArray2),mouse.set((e.offsetX-renderer.domElement.offsetLeft)/renderer.domElement.clientWidth*2-1,-(e.offsetY-renderer.domElement.offsetTop)/renderer.domElement.clientHeight*2+1,.5),raycaster.setFromCamera(mouse,camera),intersects=raycaster.intersectObjects(interArray),boxCheck=-1,0==mouseDown)if(intersects.length>0)if(0==panelNumber&&0==mouseDown&&0==machineSelect){if(container.style.cursor="pointer",mouseTip.style.top=e.offsetY-renderer.domElement.offsetTop+"px",mouseTip.style.left=e.offsetX+50+"px",0==drawingMode){for(supCheck=0,i=0;i<meshHolSup.length;i++)intersects[0].object==meshHolSup[i]&&(supCheck=1);for(1==supCheck?(meshHolSupTemp.material.opacity=.12,mouseTip.innerHTML="SUPPORTS"):meshHolSupTemp.material.opacity=0,boltCheck=0,i=0;i<meshHolB.length;i++)intersects[0].object==meshHolB[i]&&(boltCheck=1);1==boltCheck?(meshHolBTemp.material.opacity=.12,mouseTip.innerHTML="HOOK BOLTS"):meshHolBTemp.material.opacity=0,intersects[0].object==meshHolScreen&&1!==createNewBox&&0==editedScreen?(meshHolScreen.material.opacity=.12,mouseTip.innerHTML="MESH TYPE & OPENING"):meshHolScreen.material.opacity=0,intersects[0].object==meshOV1Screen&&1!==createNewBox&&0==editedScreen?(1!=overLap1&&2!=overLap1?meshOV1Screen.material.opacity=.12:meshOV1Screen.material.opacity=1,mouseTip.innerHTML="SCREEN EDGE"):1!=overLap1&&2!=overLap1?meshOV1Screen.material.opacity=0:meshOV1Screen.material.opacity=.6,intersects[0].object==meshOV2Screen&&1!==createNewBox&&0==editedScreen?(1!=overLap2&&2!=overLap2?meshOV2Screen.material.opacity=.12:meshOV2Screen.material.opacity=1,mouseTip.innerHTML="SCREEN EDGE"):1!=overLap2&&2!=overLap2?meshOV2Screen.material.opacity=0:meshOV2Screen.material.opacity=.6,intersects[0].object==meshFeed?(meshFeed.material.color.setHex(16776960),mouseTip.innerHTML="FEED DIRECTION"):meshFeed.material.color.setHex(65280)}else{for(supCheck=0,i=0;i<meshHolSup.length;i++)intersects[0].object==meshHolSup[i]&&(supCheck=1);for(1==supCheck&&(mouseTip.innerHTML="SUPPORTS"),boltCheck=0,i=0;i<meshHolB.length;i++)intersects[0].object==meshHolB[i]&&(boltCheck=1);1==boltCheck&&(mouseTip.innerHTML="HOOK BOLTS"),intersects[0].object==meshHolScreen&&1!==createNewBox&&0==editedScreen&&(mouseTip.innerHTML="MESH TYPE & OPENING"),intersects[0].object==meshOV1Screen&&1!==createNewBox&&0==editedScreen&&(mouseTip.innerHTML="SCREEN EDGE"),intersects[0].object==meshOV2Screen&&1!==createNewBox&&0==editedScreen&&(mouseTip.innerHTML="SCREEN EDGE"),intersects[0].object==meshFeed&&(mouseTip.innerHTML="FEED DIRECTION")}for(intersects[0].object==meshHookArrayL[0]||intersects[0].object==meshHookArrayR[0]?(1==hookSheets&&0==drawingMode?meshHookArrayL[0].material.opacity=hookOpacity12:(meshHookArrayL[0].material.color.setHex(hookOverColor),meshHookArrayR[0].material.color.setHex(hookOverColor)),mouseTip.innerHTML="HOOKS"):1==hookSheets&&0==drawingMode?meshHookArrayL[0].material.opacity=hookOpacity0:(meshHookArrayL[0].material.color.setHex(hookColor),meshHookArrayR[0].material.color.setHex(hookColor)),intersects[0].object!=labelSPISPA&&intersects[0].object!=labelWidth||(mouseTip.innerHTML="SCREEN DIMENSIONS"),i=0;i<labelSUP.length;i++)intersects[0].object==labelSUP[i]&&(mouseTip.innerHTML="SUPPORTS");for(i=0;i<labelBolt.length;i++)intersects[0].object==labelBolt[i]&&(mouseTip.innerHTML="HOOK BOLTS");mouseTip.style.display="block"}else if(1==machineSelect)for(container.style.cursor="pointer",mouseTip.style.top=e.offsetY-renderer.domElement.offsetTop+"px",mouseTip.style.left=e.offsetX+50+"px",i=0;i<hollowSBOX.length;i++)intersects[0].object==hollowSBOX[i]?(hollowSBOX[i].material.opacity=.6,boxCheck=i):hollowSBOX[i].material.opacity=0;else mouseTip.style.display="none";else{if(1==machineSelect)for(i=0;i<hollowSBOX.length;i++)boxCheck!=i&&(hollowSBOX[i].material.opacity=0);mouseTip.style.display="none",0==drawingMode&&(meshHolSupTemp.material.opacity=0,meshHolBTemp.material.opacity=0,meshHolScreen.material.opacity=0,1!=overLap1&&2!=overLap1?meshOV1Screen.material.opacity=0:meshOV1Screen.material.opacity=.6,1!=overLap2&&2!=overLap2?meshOV2Screen.material.opacity=0:meshOV2Screen.material.opacity=.6,meshFeed.material.color.setHex(65280)),1==hookSheets&&0==drawingMode?meshHookArrayL[0].material.opacity=hookOpacity0:(meshHookArrayL[0].material.color.setHex(hookColor),meshHookArrayR[0].material.color.setHex(hookColor)),container.style.cursor="move"}}function onDocumentMouseDown(e){mouseDown=1,mouseTip.style.display="none";var o=raycaster.intersectObjects(interArray);if(o.length>0&&(mouseDX=mouse.x,mouseDY=mouse.y,0==drawingMode)){for(supCheck=0,i=0;i<meshHolSup.length;i++)o[0].object==meshHolSup[i]&&(supCheck=1);for(1==supCheck&&(meshHolSupTemp.material.opacity=.12),boltCheck=0,i=0;i<meshHolB.length;i++)o[0].object==meshHolB[i]&&(boltCheck=1);1==boltCheck&&(meshHolBTemp.material.opacity=0,mouseTip.innerHTML="HOOK BOLTS"),o[0].object==meshHolScreen&&(meshHolScreen.material.opacity=0),o[0].object==meshOV1Screen&&1!=overLap1&&2!=overLap1&&(meshOV1Screen.material.opacity=0),o[0].object==meshOV2Screen&&1!=overLap2&&2!=overLap2&&(meshOV2Screen.material.opacity=0)}}function defineSBOXscreen(e){editedScreen=e,loadSCREEN4BOX(e),loadSCREENTYPE=0,loadHOOKSHEETS=0,loadDOUBLEFOLD=0,loadDOUBLEFOLDR=0,loadOVERLAP1=0,loadOVERLAP2=0,document.getElementById("addCartIcon").style.display="none",document.getElementById("screenName").style.pointerEvents="none",document.getElementById("machineIcon2").style.display="none",reloadScene(-1)}function saveSBOXscreen(){for(document.getElementById("addCartIcon").style.display="block",document.getElementById("screenName").style.pointerEvents="auto",document.getElementById("savescrIcon").style.display="none",supSTRING="",i=0;i<loadSUPPORTS.length;i++)i!=loadSUPPORTS.length-1?supSTRING+=loadSUPPORTS[i]+"^":supSTRING+=loadSUPPORTS[i];for(boltSTRING="",i=0;i<loadBOLTS.length;i++)i!=loadBOLTS.length-1?boltSTRING+=loadBOLTS[i]+"^":boltSTRING+=loadBOLTS[i];if(0==loadTPU.length)tpuSTRING="null";else for(tpuSTRING="",i=0;i<loadTPU.length;i++)i!=loadTPU.length-1?tpuSTRING+=loadTPU[i]+"^":tpuSTRING+=loadTPU[i];number=editedScreen,window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){for(xmlDoc=xmlhttp.responseXML,x=xmlDoc.getElementsByTagName("SCREEN"),dloadSCREENTYPE=[],dloadLS=[],dloadWS=[],dloadPERPAR=[],dloadOW=[],dloadOL=[],dloadFI=[],dloadSQUARE=[],dloadWIREMATERIAL=[],dloadHOOKSHEETS=[],dloadHOOKSMATERIAL=[],dloadHOOKTYPE=[],dloadHOOKTYPER=[],dloadSTRIPS=[],dloadB=[],dloadBTHREAD=[],dloadBWIDTH=[],dloadFLIPY=[],dloadMOUNTTYPE=[],dloadFEED=[],dloadDOUBLEFOLD=[],dloadDOUBLEFOLDR=[],dloadN=[],dloadSUPPORTS=[],dsupSymetry=[],dsupBase=[],dloadBOLTS=[],dloadOVERLAP1=[],dloadOVERLAP2=[],dloadSPISPA=[],i=0;i<x.length;i++)dloadSUPPORTS[i]=xmlDoc.getElementsByTagName("support")[i].childNodes[0].nodeValue,dloadSCREENTYPE[i]=parseInt(xmlDoc.getElementsByTagName("screentype")[i].childNodes[0].nodeValue),dloadLS[i]=parseInt(xmlDoc.getElementsByTagName("Ls")[i].childNodes[0].nodeValue),dloadWS[i]=parseInt(xmlDoc.getElementsByTagName("Ws")[i].childNodes[0].nodeValue),dloadPERPAR[i]=parseInt(xmlDoc.getElementsByTagName("PERPAR")[i].childNodes[0].nodeValue),dloadOW[i]=parseFloat(xmlDoc.getElementsByTagName("ow")[i].childNodes[0].nodeValue),dloadOL[i]=parseFloat(xmlDoc.getElementsByTagName("ol")[i].childNodes[0].nodeValue),dloadFI[i]=parseFloat(xmlDoc.getElementsByTagName("fi")[i].childNodes[0].nodeValue),dloadSQUARE[i]=parseInt(xmlDoc.getElementsByTagName("SQROPN")[i].childNodes[0].nodeValue),dloadWIREMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("wiremat")[i].childNodes[0].nodeValue),dloadHOOKSHEETS[i]=parseInt(xmlDoc.getElementsByTagName("hooksheets")[i].childNodes[0].nodeValue),dloadHOOKSMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("hooksmaterial")[i].childNodes[0].nodeValue),dloadHOOKTYPE[i]=parseInt(xmlDoc.getElementsByTagName("hooktype")[i].childNodes[0].nodeValue),dloadHOOKTYPER[i]=parseInt(xmlDoc.getElementsByTagName("hooktypeR")[i].childNodes[0].nodeValue),dloadSTRIPS[i]=parseInt(xmlDoc.getElementsByTagName("strips")[i].childNodes[0].nodeValue),dloadB[i]=parseInt(xmlDoc.getElementsByTagName("B")[i].childNodes[0].nodeValue),dloadBTHREAD[i]=parseInt(xmlDoc.getElementsByTagName("BTHREAD")[i].childNodes[0].nodeValue),dloadBWIDTH[i]=parseInt(xmlDoc.getElementsByTagName("BWIDTH")[i].childNodes[0].nodeValue),dloadFLIPY[i]=parseInt(xmlDoc.getElementsByTagName("flipy")[i].childNodes[0].nodeValue),dloadMOUNTTYPE[i]=parseInt(xmlDoc.getElementsByTagName("mounttype")[i].childNodes[0].nodeValue),dloadFEED[i]=parseInt(xmlDoc.getElementsByTagName("feed")[i].childNodes[0].nodeValue),dloadDOUBLEFOLD[i]=parseInt(xmlDoc.getElementsByTagName("doublefold")[i].childNodes[0].nodeValue),dloadDOUBLEFOLDR[i]=parseInt(xmlDoc.getElementsByTagName("doublefoldR")[i].childNodes[0].nodeValue),dloadN[i]=parseInt(xmlDoc.getElementsByTagName("N")[i].childNodes[0].nodeValue),dsupSymetry[i]=parseInt(xmlDoc.getElementsByTagName("symetry")[i].childNodes[0].nodeValue),dsupBase[i]=parseInt(xmlDoc.getElementsByTagName("basex")[i].childNodes[0].nodeValue),dloadBOLTS[i]=xmlDoc.getElementsByTagName("bolt")[i].childNodes[0].nodeValue,dloadOVERLAP1[i]=parseInt(xmlDoc.getElementsByTagName("overlap1")[i].childNodes[0].nodeValue),dloadOVERLAP2[i]=parseInt(xmlDoc.getElementsByTagName("overlap2")[i].childNodes[0].nodeValue),dloadSPISPA[i]=parseInt(xmlDoc.getElementsByTagName("SPISPA")[i].childNodes[0].nodeValue);for(deckno=[],x=xmlDoc.getElementsByTagName("dex"),i=0;i<x.length;i++)deckno[i]=parseInt(xmlDoc.getElementsByTagName("dex")[i].childNodes[0].nodeValue);decks=parseInt(x.length),editedScreen=!1,machineSelect=1,reloadScene(1)}},xmlhttp.open("GET","xmlSBOX.php?LS="+loadLS+"&WS="+loadWS+"&SCREENTYPE="+loadSCREENTYPE+"&PERPAR="+loadPERPAR+"&OW="+loadOW+"&OL="+loadOL+"&FI="+loadFI+"&SQUARE="+loadSQUARE+"&WIREMAT="+loadWIREMATERIAL+"&HOOKSHEETS="+loadHOOKSHEETS+"&HOOKSMAT="+loadHOOKSMATERIAL+"&HOOKTYPE="+loadHOOKTYPE+"&HOOKTYPER="+loadHOOKTYPER+"&STRIPS="+loadSTRIPS+"&B="+loadB+"&BTHREAD="+loadBTHREAD+"&BWIDTH="+loadBWIDTH+"&FLIPY="+loadFLIPY+"&MOUNTTYPE="+loadMOUNTTYPE+"&FEED="+loadFEED+"&DFOLD="+loadDOUBLEFOLD+"&DFOLDR="+loadDOUBLEFOLDR+"&N="+loadN+"&SYM="+supSymetry+"&BASE="+supBase+"&OV1="+loadOVERLAP1+"&OV2="+loadOVERLAP2+"&SPISPA="+loadSPISPA+"&BOLTS="+boltSTRING+"&SUPPORTS="+supSTRING+"&TPU="+tpuSTRING+"&action=4&number="+number,!0),xmlhttp.send()}function onDocumentMouseUp(e){if(mouseDown=0,e.preventDefault(),intersectsU=raycaster.intersectObjects(interArray),intersectsU.length>0)if(mouse.x==mouseDX&&mouse.y==mouseDY&&1==machineSelect){for(i=0;i<hollowSBOX.length;i++)if(intersects[0].object==hollowSBOX[i]){machineSelect=0,defineSBOXscreen(i);break}}else if(mouse.x==mouseDX&&mouse.y==mouseDY&&2!=viewStatus)if(1==viewStatus&&0==panelNumber)intersectsU[0].object!=meshHookArrayL[0]&&intersectsU[0].object!=meshHookArrayR[0]||1==hookSheets||(intersectsU[0].object.material.color.setHex(hookColor),0==drawingMode&&(intersectsU[0].object.material.opacity=.5)),showView(2);else if(0==viewStatus&&0==panelNumber){for(intersectsU[0].object!=meshHookArrayL[0]&&intersectsU[0].object!=meshHookArrayR[0]||1==hookSheets||intersectsU[0].object.material.color.setHex(hookColor),i=0;i<labelSUP.length;i++)if(intersectsU[0].object==labelSUP[i]){showView(5),saveBackup();break}for(i=0;i<meshHolSup.length;i++)if(intersectsU[0].object==meshHolSup[i]){showView(5),saveBackup();break}for(i=0;i<labelBolt.length;i++)if(intersectsU[0].object==labelBolt[i]){showView(6),saveBackup();break}for(i=0;i<meshHolB.length;i++)if(intersectsU[0].object==meshHolB[i]){showView(6),saveBackup();break}intersectsU[0].object==meshHookArrayL[0]?(showView(3),saveBackup()):intersectsU[0].object==meshHookArrayR[0]?(showView(4),saveBackup()):intersectsU[0].object==meshHolScreen&&1!==createNewBox&&0==editedScreen?(screenMeshGroup.remove(dimsGroup),noDims=1,showView(8),saveBackup()):intersectsU[0].object==meshOV1Screen&&1!==createNewBox&&0==editedScreen?(0==drawingMode&&(meshHookArrayL[0].material.opacity=.3),screenMeshGroup.remove(dimsGroup),noDims=1,showView(9),saveBackup()):intersectsU[0].object==meshOV2Screen&&1!==createNewBox&&0==editedScreen?(0==drawingMode&&(meshHookArrayL[0].material.opacity=.3),screenMeshGroup.remove(dimsGroup),noDims=1,showView(10),saveBackup()):intersectsU[0].object==labelSPISPA||intersectsU[0].object==labelWidth?(showView(7),saveBackup()):intersectsU[0].object==meshFeed&&switchFeed()}}function setSPISPAbuttons(){document.getElementById("forceAUTO").style.backgroundColor="transparent",document.getElementById("forceSPI").style.backgroundColor="transparent",document.getElementById("forceSPA").style.backgroundColor="transparent",document.getElementById("forceAUTO").style.color="#FFFFFF",document.getElementById("forceSPI").style.color="#FFFFFF",document.getElementById("forceSPA").style.color="#FFFFFF",0==loadSPISPA?(document.getElementById("forceSPA").style.backgroundColor="#FFFFFF",document.getElementById("forceSPA").style.color="#000000"):1==loadSPISPA?(document.getElementById("forceSPI").style.backgroundColor="#FFFFFF",document.getElementById("forceSPI").style.color="#000000"):(document.getElementById("forceAUTO").style.backgroundColor="#FFFFFF",document.getElementById("forceAUTO").style.color="#000000")}function showPanel(e){if(0!=e&&(document.getElementById("screenName").style.display="none",document.getElementById("addCartIcon").style.display="none",document.getElementById("machineIcon").style.display="none"),panelNumber=e,3==e||4==e){if(screenMeshGroup.remove(dimsGroup),noDims=1,panel=document.getElementById("panel3"),hookShow=document.getElementById("hookshow"),hookShowR=document.getElementById("hookshowR"),CtypeBut=document.getElementById("Cchange"),StypeBut=document.getElementById("Schange"),FlipYBut=document.getElementById("FlipY"),1==loadMOUNTTYPE?(CtypeBut.style.color="#000000",CtypeBut.style.backgroundColor="#FFFFFF",StypeBut.style.color="#FFFFFF",StypeBut.style.backgroundColor="transparent"):(StypeBut.style.color="#000000",StypeBut.style.backgroundColor="#FFFFFF",CtypeBut.style.color="#FFFFFF",CtypeBut.style.backgroundColor="transparent"),-1==loadFLIPY?(FlipYBut.style.color="#000000",FlipYBut.style.backgroundColor="#FFFFFF"):(FlipYBut.style.color="#FFFFFF",FlipYBut.style.backgroundColor="transparent"),standH=document.getElementById("Standard"),stainH=document.getElementById("Stainless"),standH.style.display="block",stainH.style.display="block",0==loadHOOKSHEETS?0==loadHOOKSMATERIAL?(standH.style.color="#000000",standH.style.backgroundColor="#FFFFFF",1==hooksmatALLOWED[1]?(stainH.style.color="#FFFFFF",stainH.style.backgroundColor="transparent"):(stainH.style.color="#999999",stainH.style.backgroundColor="transparent")):(stainH.style.color="#000000",stainH.style.backgroundColor="#FFFFFF",standH.style.color="#FFFFFF",standH.style.backgroundColor="transparent"):(stainH.style.color="#999999",stainH.style.backgroundColor="transparent",standH.style.color="#999999",standH.style.backgroundColor="transparent"),sheets=[],1==createNewBox&&!1!==editedScreen){for(e=0;e<3;e++)document.getElementById("sheet"+e).style.display="none";standH.style.display="none",stainH.style.display="none"}else for(e=0;e<3;e++)sheets[e]=document.getElementById("sheet"+e),sheets[e].style.display="block",loadHOOKSHEETS==e&&1==hooksheetsALLOWED[e]?(sheets[e].style.color="#000000",sheets[e].style.backgroundColor="#FFFFFF"):1==hooksheetsALLOWED[e]?(sheets[e].style.color="#FFFFFF",sheets[e].style.backgroundColor="transparent",sheets[e].style.pointerEvents="auto"):(sheets[e].style.color="#999999",sheets[e].style.backgroundColor="transparent",sheets[e].style.pointerEvents="none");panel.style.display="block"}else if(5==e||13==e)if(tempSUPPORTS=[],document.getElementById("valuesN").innerHTML="",4!=loadSCREENTYPE)for(document.getElementById("strips").style.display="none",document.getElementById("labelMEASURE").style.display="block",document.getElementById("datum1").style.display="block",document.getElementById("datum2").style.display="block",document.getElementById("datum0").style.display="block",j=0;j<=10;j++)j>=loadN+1?(document.getElementById("supval"+j).style.display="none",document.getElementById("tpu"+j).style.display="none"):(document.getElementById("supval"+j).style.display="block",5==loadSCREENTYPE||6==loadSCREENTYPE||8==loadSCREENTYPE?document.getElementById("tpu"+j).style.display="block":document.getElementById("tpu"+j).style.display="none"),j<=nALLOWED&&(j==loadN?document.getElementById("valuesN").innerHTML+='<div id="pickNvalue" style="background-color: #FFFFFF; color: #000000;">'+j+"</div>":document.getElementById("valuesN").innerHTML+='<div id="pickNvalue" onClick="pickN('+j+');">'+j+"</div>"),10==j&&(document.getElementById("panel5").style.display="block");else for(document.getElementById("labelMEASURE").style.display="none",document.getElementById("datum1").style.display="none",document.getElementById("datum2").style.display="none",document.getElementById("datum0").style.display="none",document.getElementById("strips").style.display="block",document.getElementById("strips").style.backgroundImage="url('images/strip"+loadSTRIPS+".png')",j=0;j<=10;j++)document.getElementById("supval"+j).style.display="none",j<=nALLOWED&&(j==loadN?document.getElementById("valuesN").innerHTML+='<div id="pickNvalue" style="background-color: #FFFFFF; color: #000000;">'+j+"</div>":document.getElementById("valuesN").innerHTML+='<div id="pickNvalue" onClick="pickN('+j+');">'+j+"</div>"),10==j&&(document.getElementById("panel5").style.display="block");else 6==e||11==e?document.getElementById("panel6").style.display="block":7==e?(document.getElementById("dimLS").value=loadLS,document.getElementById("dimWS").value=loadWS,document.getElementById("panel7").style.display="block",setSPISPAbuttons()):8==e?showScreenPanel(1):9==e||10==e?(document.getElementById("overlapTable").style.display="none",document.getElementById("edgeNone").style.pointerEvents="auto",document.getElementById("edgeNone").style.backgroundColor="transparent",document.getElementById("edgeNone").style.borderColor="#FFFFFF",document.getElementById("edgeNone").style.color="#FFFFFF",1==overlapALLOWED[0]&&(9==e&&loadOVERLAP2+loadWS+20<=W2+50||10==e&&loadOVERLAP1+loadWS+20<=W2+50)?(document.getElementById("edgeOverlap").style.pointerEvents="auto",document.getElementById("edgeOverlap").style.backgroundColor="transparent",document.getElementById("edgeOverlap").style.borderColor="#FFFFFF",document.getElementById("edgeOverlap").style.color="#FFFFFF"):(document.getElementById("edgeOverlap").style.pointerEvents="none",document.getElementById("edgeOverlap").style.backgroundColor="transparent",document.getElementById("edgeOverlap").style.borderColor="#999999",document.getElementById("edgeOverlap").style.color="#999999"),1==overlapALLOWED[1]?(document.getElementById("edgeSeal").style.pointerEvents="auto",document.getElementById("edgeSeal").style.backgroundColor="transparent",document.getElementById("edgeSeal").style.borderColor="#FFFFFF",document.getElementById("edgeSeal").style.color="#FFFFFF"):(document.getElementById("edgeSeal").style.pointerEvents="none",document.getElementById("edgeSeal").style.backgroundColor="transparent",document.getElementById("edgeSeal").style.borderColor="#999999",document.getElementById("edgeSeal").style.color="#999999"),0==loadOVERLAP1&&9==e||0==loadOVERLAP2&&10==e?(document.getElementById("edgeNone").style.pointerEvents="none",document.getElementById("edgeNone").style.backgroundColor="#FFFFFF",document.getElementById("edgeNone").style.borderColor="#FFFFFF",document.getElementById("edgeNone").style.color="#000000"):loadOVERLAP1<=2&&9==e||loadOVERLAP2<=2&&10==e?(document.getElementById("edgeSeal").style.pointerEvents="none",document.getElementById("edgeSeal").style.backgroundColor="#FFFFFF",document.getElementById("edgeSeal").style.borderColor="#FFFFFF",document.getElementById("edgeSeal").style.color="#000000"):(loadOVERLAP1>=5&&9==e||loadOVERLAP2>=5&&10==e)&&(document.getElementById("edgeOverlap").style.pointerEvents="none",document.getElementById("edgeOverlap").style.backgroundColor="#FFFFFF",document.getElementById("edgeOverlap").style.borderColor="#FFFFFF",document.getElementById("edgeOverlap").style.color="#000000",document.getElementById("overlapTable").style.display="block",9==e?(document.getElementById("overlapTable").innerHTML=loadOVERLAP1+" mm",overlapButton=1,document.getElementById("overlapTable").style.pointerEvents="auto"):(document.getElementById("overlapTable").innerHTML=loadOVERLAP2+" mm",overlapButton=2,document.getElementById("overlapTable").style.pointerEvents="auto")),document.getElementById("panel9").style.display="block",document.getElementById("panel9").style.transform="scale("+scaleEdgePanel+")",document.getElementById("panel9").style.transformOrigin="0 100%"):14==e?screenName2():(document.getElementById("panel14").style.display="none",document.getElementById("panel9").style.display="none",document.getElementById("panel3").style.display="none",document.getElementById("panel5").style.display="none",document.getElementById("panel7").style.display="none",document.getElementById("panel6").style.display="none",document.getElementById("overlapTitle").style.display="none",document.getElementById("tableOV").style.display="none",0==drawingMode&&(meshHookArrayL[0].material.opacity=1),document.getElementById("screenName").style.display="inline-block",!1===editedScreen?document.getElementById("addCartIcon").style.display="block":document.getElementById("machineIcon").style.display="none",1==viewStatus&&(showView(2),panelNumber=0))}function saveSCREENBOX(){window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(createNewBox=0,machineSelect=0,document.getElementById("machineIcon2").style.display="none",reloadScene(0))},xmlhttp.open("GET","xmlSBOX.php?action=9",!0),xmlhttp.send()}function machSelect(e){0==machineSelect?(machineSelect=1,document.getElementById("machineIcon").style.display="none"):(machineSelect=0,document.getElementById("machineIcon2").style.display="none"),window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){for(xmlDoc=xmlhttp.responseXML,x=xmlDoc.getElementsByTagName("SCREEN"),dloadSCREENTYPE=[],dloadLS=[],dloadWS=[],dloadPERPAR=[],dloadOW=[],dloadOL=[],dloadFI=[],dloadSQUARE=[],dloadWIREMATERIAL=[],dloadHOOKSHEETS=[],dloadHOOKSMATERIAL=[],dloadHOOKTYPE=[],dloadHOOKTYPER=[],dloadSTRIPS=[],dloadB=[],dloadBTHREAD=[],dloadBWIDTH=[],dloadFLIPY=[],dloadMOUNTTYPE=[],dloadFEED=[],dloadDOUBLEFOLD=[],dloadDOUBLEFOLDR=[],dloadN=[],dloadSUPPORTS=[],dsupSymetry=[],dsupBase=[],dloadBOLTS=[],dloadOVERLAP1=[],dloadOVERLAP2=[],dloadSPISPA=[],i=0;i<x.length;i++)dloadSUPPORTS[i]=xmlDoc.getElementsByTagName("support")[i].childNodes[0].nodeValue,dloadSCREENTYPE[i]=parseInt(xmlDoc.getElementsByTagName("screentype")[i].childNodes[0].nodeValue),dloadLS[i]=parseInt(xmlDoc.getElementsByTagName("Ls")[i].childNodes[0].nodeValue),dloadWS[i]=parseInt(xmlDoc.getElementsByTagName("Ws")[i].childNodes[0].nodeValue),dloadPERPAR[i]=parseInt(xmlDoc.getElementsByTagName("PERPAR")[i].childNodes[0].nodeValue),dloadOW[i]=parseFloat(xmlDoc.getElementsByTagName("ow")[i].childNodes[0].nodeValue),dloadOL[i]=parseFloat(xmlDoc.getElementsByTagName("ol")[i].childNodes[0].nodeValue),dloadFI[i]=parseFloat(xmlDoc.getElementsByTagName("fi")[i].childNodes[0].nodeValue),dloadSQUARE[i]=parseInt(xmlDoc.getElementsByTagName("SQROPN")[i].childNodes[0].nodeValue),dloadWIREMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("wiremat")[i].childNodes[0].nodeValue),dloadHOOKSHEETS[i]=parseInt(xmlDoc.getElementsByTagName("hooksheets")[i].childNodes[0].nodeValue),dloadHOOKSMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("hooksmaterial")[i].childNodes[0].nodeValue),dloadHOOKTYPE[i]=parseInt(xmlDoc.getElementsByTagName("hooktype")[i].childNodes[0].nodeValue),dloadHOOKTYPER[i]=parseInt(xmlDoc.getElementsByTagName("hooktypeR")[i].childNodes[0].nodeValue),dloadSTRIPS[i]=parseInt(xmlDoc.getElementsByTagName("strips")[i].childNodes[0].nodeValue),dloadB[i]=parseInt(xmlDoc.getElementsByTagName("B")[i].childNodes[0].nodeValue),dloadBTHREAD[i]=parseInt(xmlDoc.getElementsByTagName("BTHREAD")[i].childNodes[0].nodeValue),dloadBWIDTH[i]=parseInt(xmlDoc.getElementsByTagName("BWIDTH")[i].childNodes[0].nodeValue),dloadFLIPY[i]=parseInt(xmlDoc.getElementsByTagName("flipy")[i].childNodes[0].nodeValue),dloadMOUNTTYPE[i]=parseInt(xmlDoc.getElementsByTagName("mounttype")[i].childNodes[0].nodeValue),dloadFEED[i]=parseInt(xmlDoc.getElementsByTagName("feed")[i].childNodes[0].nodeValue),dloadDOUBLEFOLD[i]=parseInt(xmlDoc.getElementsByTagName("doublefold")[i].childNodes[0].nodeValue),dloadDOUBLEFOLDR[i]=parseInt(xmlDoc.getElementsByTagName("doublefoldR")[i].childNodes[0].nodeValue),dloadN[i]=parseInt(xmlDoc.getElementsByTagName("N")[i].childNodes[0].nodeValue),dsupSymetry[i]=parseInt(xmlDoc.getElementsByTagName("symetry")[i].childNodes[0].nodeValue),dsupBase[i]=parseInt(xmlDoc.getElementsByTagName("basex")[i].childNodes[0].nodeValue),dloadBOLTS[i]=xmlDoc.getElementsByTagName("bolt")[i].childNodes[0].nodeValue,dloadOVERLAP1[i]=parseInt(xmlDoc.getElementsByTagName("overlap1")[i].childNodes[0].nodeValue),dloadOVERLAP2[i]=parseInt(xmlDoc.getElementsByTagName("overlap2")[i].childNodes[0].nodeValue),dloadSPISPA[i]=parseInt(xmlDoc.getElementsByTagName("SPISPA")[i].childNodes[0].nodeValue);for(deckno=[],x=xmlDoc.getElementsByTagName("dex"),i=0;i<x.length;i++)deckno[i]=parseInt(xmlDoc.getElementsByTagName("dex")[i].childNodes[0].nodeValue);PRODUCER=xmlDoc.getElementsByTagName("PRODUCER")[0].childNodes[0].nodeValue,MACHTYPE=xmlDoc.getElementsByTagName("MACHTYPE")[0].childNodes[0].nodeValue,decks=parseInt(x.length),reloadScene(e)}},xmlhttp.open("GET","xmlSBOX.php",!0),xmlhttp.send()}function sboxpanel(e,o){2!=e&&3!=e||(o=o.replace(/[^\w\s]/gi,"")),2==e?""!=o?PRODUCER=o.toUpperCase():o=PRODUCER:3==e&&(""!=o?MACHTYPE=o.toUpperCase():o=MACHTYPE),document.getElementById("newSBOXmenu").style.display="none",window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(document.getElementById("newSBOXmenu").innerHTML=xmlhttp.responseText,reloadScene(4))},xmlhttp.open("GET","sboxpanel.php?panel="+e+"&number="+o,!0),xmlhttp.send(),document.getElementById("newSBOXmenu").style.display="block"}function reloadScene(e){if(0==machineSelect){for(0==createNewBox&&0!=e&&loadBackup();scene.children.length>0;)scene.remove(scene.children[0]);document.getElementById("newSBOXmenu").style.display="none",onWindowResize(1),materialLoad(drawingMode,0),-1!==e&&(loadData(),createNewBox=0),dataCheck(),screenData(),scene.rotation.y=0,scene.position.set(0,0,0),controls.target.set(0,0,0),tangensCam=Math.tan(fovAngle/2*Math.PI/180),angleCamX=-10,angleCamY=20,camera.position.z=screenRealLeft/fovRatio/tangensCam+screenWidth/2,camera.position.x=-Math.sin(angleCamX*Math.PI/180)*camera.position.z,camera.position.y=Math.sin(angleCamY*Math.PI/180)*camera.position.z,prepareSamples(),screenMesh(),loader.style.zIndex=0,loader.style.display="none",lightSettle()}else{for(0==createNewBox&&rememberScreen(),createNewBox=1,4!=e&&sboxpanel(1,1),scrncnt=dloadSCREENTYPE.length;scene.children.length>0;)scene.remove(scene.children[0]);for(onWindowResize(1),materialLoad(drawingMode,0),screenboxGroup=new THREE.Object3D,SBOXname=MACHTYPE,deckspacingcount=[],deckspacingvalue=[],decklength=[],decklengthmax=0,deckspacingcntmax=0,SBOXwidthmax=0,SBOXheight=400,scr=0,d=0;d<decks;d++){for(1==deckno[d]?deckspacingcount[d]=2:deckspacingcount[d]=deckno[d]-1,decklength[d]=0,sc=deckno[d];sc>0;)0==dloadFEED[scr]?(decklength[d]=decklength[d]+dloadLS[scr],dloadWS[scr]>SBOXwidthmax&&(SBOXwidthmax=dloadWS[scr])):(decklength[d]=decklength[d]+dloadWS[scr],dloadLS[scr]>SBOXwidthmax&&(SBOXwidthmax=dloadLS[scr])),scr+=1,sc-=1;deckspacingvalue[d]=100,decklength[d]=decklength[d]+100*deckspacingcount[d]}for(d=0;d<decks;d++)decklengthmax<decklength[d]&&(decklengthmax=decklength[d]);for(d=0;d<decks;d++)decklengthmax>decklength[d]&&(deckspacingvalue[d]=deckspacingvalue[d]+(decklengthmax-decklength[d])/deckspacingcount[d],tempD=decklength[d]+(decklengthmax-decklength[d]),decklength[d]=tempD);for(tempdeck=0,tempscr=1,templength=-decklengthmax/2,lastone=!1,firstone=!0,d=0;d<scrncnt;d++)loadSCREEN4BOX(d),deckno[tempdeck]==tempscr?lastone=!0:lastone=!1,spacing=deckspacingvalue[tempdeck],screenMeshTemplate(d,tempdeck,tempscr,spacing,decks,templength,lastone,firstone),deckno[tempdeck]==tempscr?(tempdeck+=1,tempscr=1,firstone=!0,decklength.length>tempdeck&&(templength=-decklengthmax/2)):(tempscr+=1,0==dloadFEED[d]?xtemp=dloadLS[d]:xtemp=dloadWS[d],templength=templength+xtemp+deckspacingvalue[tempdeck],firstone=!1);var o;1==drawingMode?Tmaterial=new THREE.MultiMaterial([new THREE.MeshBasicMaterial({color:0}),new THREE.MeshBasicMaterial({color:16777215})]):Tmaterial=new THREE.MultiMaterial([new THREE.MeshPhongMaterial({color:16777215,shading:THREE.FlatShading}),new THREE.MeshPhongMaterial({color:4482680,shading:THREE.SmoothShading})]),(new THREE.FontLoader).load("THREEJS/examples/fonts/helvetiker_regular.typeface.json",(function(e){o=e,function(){if(curveSegments=6,bevelEnabled=!0,size=Math.round(decklengthmax/20),height=Math.round(size/10),bevelThickness=height,bevelSize=Math.round(height/2),textGeo=new THREE.TextGeometry(SBOXname+"   » » »",{font:o,size:size,height:height,curveSegments:curveSegments,bevelThickness:bevelThickness,bevelSize:bevelSize,bevelEnabled:bevelEnabled,material:0,extrudeMaterial:1}),textGeo.computeBoundingBox(),textGeo.computeVertexNormals(),!bevelEnabled)for(var e=height*size*.1,t=0;t<textGeo.faces.length;t++){var a=textGeo.faces[t];if(1==a.materialIndex){for(var l=0;l<a.vertexNormals.length;l++)a.vertexNormals[l].z=0,a.vertexNormals[l].normalize();var r=textGeo.vertices[a.a],i=textGeo.vertices[a.b],n=textGeo.vertices[a.c];if(THREE.GeometryUtils.triangleArea(r,i,n)>e)for(l=0;l<a.vertexNormals.length;l++)a.vertexNormals[l].copy(a.normal)}}textMesh1=new THREE.Mesh(textGeo,Tmaterial),textMesh1.position.x=-decklengthmax/2-.5*(decks-1)*SBOXheight/2,textMesh1.position.y=(decks-1)*SBOXheight/2+80,textMesh1.position.z=-SBOXwidthmax/2-100,textMesh1.rotation.x=0,textMesh1.rotation.y=2*Math.PI,scene.add(textMesh1)}()})),1==drawingMode?(materialSIDE=new THREE.MeshBasicMaterial({wireframe:!1,color:12303291}),materialSIDEC=new THREE.MeshBasicMaterial({wireframe:!1,color:0,side:THREE.BackSide}),fontSIZE=Math.round(decklengthmax/20),shapeSIDE=new THREE.Shape,shapeSIDE.moveTo(0,0),shapeSIDE.lineTo((decks-1+.25*decks)*SBOXheight/2,-(decks-1+.25*decks)*SBOXheight),shapeSIDE.lineTo((decks-1+.25*decks)*SBOXheight/2+decklengthmax+160,-(decks-1+.25*decks)*SBOXheight),shapeSIDE.lineTo(decklengthmax+160,0),shapeSIDE.lineTo(decklengthmax+160,160+fontSIZE),shapeSIDE.lineTo(0,160+fontSIZE),sideTHICK=fontSIZE/10,geometrySIDE=new THREE.ExtrudeGeometry(shapeSIDE,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,0),new THREE.Vector3(0,sideTHICK,0)])}),shapeSIDEC=new THREE.Shape,shapeSIDEC.moveTo(4*-pencilWeight+0,0),shapeSIDEC.lineTo((decks-1+.25*decks)*SBOXheight/2+4*pencilWeight,-(decks-1+.25*decks)*SBOXheight-4*pencilWeight),shapeSIDEC.lineTo((decks-1+.25*decks)*SBOXheight/2+decklengthmax+160+4*pencilWeight,-(decks-1+.25*decks)*SBOXheight-4*pencilWeight),shapeSIDEC.lineTo(decklengthmax+160+4*pencilWeight,0),shapeSIDEC.lineTo(decklengthmax+160+4*pencilWeight,160+fontSIZE+4*pencilWeight),shapeSIDEC.lineTo(4*-pencilWeight+0,160+fontSIZE+4*pencilWeight),sideTHICK=fontSIZE/10,geometrySIDEC=new THREE.ExtrudeGeometry(shapeSIDEC,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,4*-pencilWeight,0),new THREE.Vector3(0,sideTHICK+4*pencilWeight,0)])}),meshSIDE=new THREE.Mesh(geometrySIDE,materialSIDE),meshSIDEC=new THREE.Mesh(geometrySIDEC,materialSIDEC),meshSIDE.geometry.computeVertexNormals(),meshSIDE.rotation.y=-Math.PI/2,meshSIDEC.rotation.y=-Math.PI/2,meshSIDE.rotation.x=Math.PI/2,meshSIDEC.rotation.x=Math.PI/2,meshSIDE.position.set(-0-decklengthmax/2-decks*SBOXheight/4,(decks-1)*SBOXheight/2,-SBOXwidthmax/2-100-fontSIZE/10),meshSIDEC.position.set(-0-decklengthmax/2-decks*SBOXheight/4,(decks-1)*SBOXheight/2,-SBOXwidthmax/2-100-fontSIZE/10),scene.add(meshSIDE),scene.add(meshSIDEC)):(materialSIDE=new THREE.MeshStandardMaterial({wireframe:!1,color:65280,emissive:1117710,roughness:1,metalness:.7,transparent:!0,opacity:1,shading:THREE.SmoothShading}),fontSIZE=Math.round(decklengthmax/20),shapeSIDE=new THREE.Shape,shapeSIDE.moveTo(0,0),shapeSIDE.lineTo((decks-1+.25*decks)*SBOXheight/2,-(decks-1+.25*decks)*SBOXheight),shapeSIDE.lineTo((decks-1+.25*decks)*SBOXheight/2+decklengthmax+160,-(decks-1+.25*decks)*SBOXheight),shapeSIDE.lineTo(decklengthmax+160,0),shapeSIDE.lineTo(decklengthmax+160,160+fontSIZE),shapeSIDE.lineTo(0,160+fontSIZE),sideTHICK=fontSIZE/10,geometrySIDE=new THREE.ExtrudeGeometry(shapeSIDE,{steps:1,extrudePath:new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,0),new THREE.Vector3(0,sideTHICK,0)])}),meshSIDE=new THREE.Mesh(geometrySIDE,materialSIDE),meshSIDE.geometry.computeVertexNormals(),meshSIDE.rotation.y=-Math.PI/2,meshSIDE.rotation.x=Math.PI/2,meshSIDE.position.set(-0-decklengthmax/2-decks*SBOXheight/4,(decks-1)*SBOXheight/2,-SBOXwidthmax/2-100-fontSIZE/10),scene.add(meshSIDE)),angleCamY=20,scene.rotation.y=-15*Math.PI/180,scene.position.set(0,0,0),tangensCam=Math.tan(fovAngle/2*Math.PI/180),camera.position.z=1.2*decklengthmax/2/fovRatio/tangensCam+SBOXwidthmax/2,camera.position.x=0,camera.position.y=Math.sin(angleCamY*Math.PI/180)*camera.position.z,controls.target.set(0,0,0),scene.add(screenboxGroup),sboxArrayCreate(),loader.style.zIndex=0,loader.style.display="none",lightSettle()}}function saveSCREEN4BOX(e){dloadSCREENTYPE[e]=loadSCREENTYPE,dloadLS[e]=loadLS,dloadWS[e]=loadWS,dloadPERPAR[e]=loadPERPAR,dloadOW[e]=loadOW,dloadOL[e]=loadOL,dloadFI[e]=loadFI,dloadSQUARE[e]=loadSQUARE,dloadWIREMATERIAL[e]=loadWIREMATERIAL,dloadHOOKSHEETS[e]=loadHOOKSHEETS,dloadHOOKSMATERIAL[e]=loadHOOKSMATERIAL,dloadHOOKTYPE[e]=loadHOOKTYPE,dloadHOOKTYPER[e]=loadHOOKTYPER,dloadSTRIPS[e]=loadSTRIPS,dloadB[e]=loadB,dloadBTHREAD[e]=loadBTHREAD,dloadBWIDTH[e]=loadBWIDTH,dloadFLIPY[e]=loadFLIPY,dloadMOUNTTYPE[e]=loadMOUNTTYPE,dloadFEED[e]=loadFEED,dloadDOUBLEFOLD[e]=loadDOUBLEFOLD,dloadDOUBLEFOLDR[e]=loadDOUBLEFOLDR,dloadN[e]=loadN,dloadSUPPORTS[e]=loadSUPPORTS,dsupSymetry[e]=supSymetry,dsupBase[e]=supBase,dloadBOLTS[e]=loadBOLTS,dloadOVERLAP1[e]=loadOVERLAP1,dloadOVERLAP2[e]=loadOVERLAP2,dloadSPISPA[e]=loadSPISPA}function loadSCREEN4BOX(e){loadSCREENTYPE=dloadSCREENTYPE[e],loadLS=dloadLS[e],loadWS=dloadWS[e],loadPERPAR=dloadPERPAR[e],loadOW=dloadOW[e],loadOL=dloadOL[e],loadFI=dloadFI[e],loadSQUARE=dloadSQUARE[e],loadWIREMATERIAL=dloadWIREMATERIAL[e],loadHOOKSHEETS=dloadHOOKSHEETS[e],loadHOOKSMATERIAL=dloadHOOKSMATERIAL[e],loadHOOKTYPE=dloadHOOKTYPE[e],loadHOOKTYPER=dloadHOOKTYPER[e],loadSTRIPS=dloadSTRIPS[e],loadB=dloadB[e],loadBTHREAD=dloadBTHREAD[e],loadBWIDTH=dloadBWIDTH[e],loadFLIPY=dloadFLIPY[e],loadMOUNTTYPE=dloadMOUNTTYPE[e],loadFEED=dloadFEED[e],loadDOUBLEFOLD=dloadDOUBLEFOLD[e],loadDOUBLEFOLDR=dloadDOUBLEFOLDR[e],loadN=dloadN[e],loadSUPPORTS=dloadSUPPORTS[e],supSymetry=dsupSymetry[e],supBase=dsupBase[e],loadBOLTS=dloadBOLTS[e],loadOVERLAP1=dloadOVERLAP1[e],loadOVERLAP2=dloadOVERLAP2[e],loadSPISPA=dloadSPISPA[e]}function delscreenSCREENBOX(e){window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){for(xmlDoc=xmlhttp.responseXML,x=xmlDoc.getElementsByTagName("SCREEN"),dloadSCREENTYPE=[],dloadLS=[],dloadWS=[],dloadPERPAR=[],dloadOW=[],dloadOL=[],dloadFI=[],dloadSQUARE=[],dloadWIREMATERIAL=[],dloadHOOKSHEETS=[],dloadHOOKSMATERIAL=[],dloadHOOKTYPE=[],dloadHOOKTYPER=[],dloadSTRIPS=[],dloadB=[],dloadBTHREAD=[],dloadBWIDTH=[],dloadFLIPY=[],dloadMOUNTTYPE=[],dloadFEED=[],dloadDOUBLEFOLD=[],dloadDOUBLEFOLDR=[],dloadN=[],dloadSUPPORTS=[],dsupSymetry=[],dsupBase=[],dloadBOLTS=[],dloadOVERLAP1=[],dloadOVERLAP2=[],dloadSPISPA=[],i=0;i<x.length;i++)dloadSUPPORTS[i]=xmlDoc.getElementsByTagName("support")[i].childNodes[0].nodeValue,dloadSCREENTYPE[i]=parseInt(xmlDoc.getElementsByTagName("screentype")[i].childNodes[0].nodeValue),dloadLS[i]=parseInt(xmlDoc.getElementsByTagName("Ls")[i].childNodes[0].nodeValue),dloadWS[i]=parseInt(xmlDoc.getElementsByTagName("Ws")[i].childNodes[0].nodeValue),dloadPERPAR[i]=parseInt(xmlDoc.getElementsByTagName("PERPAR")[i].childNodes[0].nodeValue),dloadOW[i]=parseFloat(xmlDoc.getElementsByTagName("ow")[i].childNodes[0].nodeValue),dloadOL[i]=parseFloat(xmlDoc.getElementsByTagName("ol")[i].childNodes[0].nodeValue),dloadFI[i]=parseFloat(xmlDoc.getElementsByTagName("fi")[i].childNodes[0].nodeValue),dloadSQUARE[i]=parseInt(xmlDoc.getElementsByTagName("SQROPN")[i].childNodes[0].nodeValue),dloadWIREMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("wiremat")[i].childNodes[0].nodeValue),dloadHOOKSHEETS[i]=parseInt(xmlDoc.getElementsByTagName("hooksheets")[i].childNodes[0].nodeValue),dloadHOOKSMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("hooksmaterial")[i].childNodes[0].nodeValue),dloadHOOKTYPE[i]=parseInt(xmlDoc.getElementsByTagName("hooktype")[i].childNodes[0].nodeValue),dloadHOOKTYPER[i]=parseInt(xmlDoc.getElementsByTagName("hooktypeR")[i].childNodes[0].nodeValue),dloadSTRIPS[i]=parseInt(xmlDoc.getElementsByTagName("strips")[i].childNodes[0].nodeValue),dloadB[i]=parseInt(xmlDoc.getElementsByTagName("B")[i].childNodes[0].nodeValue),dloadBTHREAD[i]=parseInt(xmlDoc.getElementsByTagName("BTHREAD")[i].childNodes[0].nodeValue),dloadBWIDTH[i]=parseInt(xmlDoc.getElementsByTagName("BWIDTH")[i].childNodes[0].nodeValue),dloadFLIPY[i]=parseInt(xmlDoc.getElementsByTagName("flipy")[i].childNodes[0].nodeValue),dloadMOUNTTYPE[i]=parseInt(xmlDoc.getElementsByTagName("mounttype")[i].childNodes[0].nodeValue),dloadFEED[i]=parseInt(xmlDoc.getElementsByTagName("feed")[i].childNodes[0].nodeValue),dloadDOUBLEFOLD[i]=parseInt(xmlDoc.getElementsByTagName("doublefold")[i].childNodes[0].nodeValue),dloadDOUBLEFOLDR[i]=parseInt(xmlDoc.getElementsByTagName("doublefoldR")[i].childNodes[0].nodeValue),dloadN[i]=parseInt(xmlDoc.getElementsByTagName("N")[i].childNodes[0].nodeValue),dsupSymetry[i]=parseInt(xmlDoc.getElementsByTagName("symetry")[i].childNodes[0].nodeValue),dsupBase[i]=parseInt(xmlDoc.getElementsByTagName("basex")[i].childNodes[0].nodeValue),dloadBOLTS[i]=xmlDoc.getElementsByTagName("bolt")[i].childNodes[0].nodeValue,dloadOVERLAP1[i]=parseInt(xmlDoc.getElementsByTagName("overlap1")[i].childNodes[0].nodeValue),dloadOVERLAP2[i]=parseInt(xmlDoc.getElementsByTagName("overlap2")[i].childNodes[0].nodeValue),dloadSPISPA[i]=parseInt(xmlDoc.getElementsByTagName("SPISPA")[i].childNodes[0].nodeValue);for(deckno=[],x=xmlDoc.getElementsByTagName("dex"),i=0;i<x.length;i++)deckno[i]=parseInt(xmlDoc.getElementsByTagName("dex")[i].childNodes[0].nodeValue);decks=parseInt(x.length),reloadScene(0)}},xmlhttp.open("GET","xmlSBOX.php?action=2",!0),xmlhttp.send()}function addscreenSCREENBOX(e){window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){for(xmlDoc=xmlhttp.responseXML,x=xmlDoc.getElementsByTagName("SCREEN"),dloadSCREENTYPE=[],dloadLS=[],dloadWS=[],dloadPERPAR=[],dloadOW=[],dloadOL=[],dloadFI=[],dloadSQUARE=[],dloadWIREMATERIAL=[],dloadHOOKSHEETS=[],dloadHOOKSMATERIAL=[],dloadHOOKTYPE=[],dloadHOOKTYPER=[],dloadSTRIPS=[],dloadB=[],dloadBTHREAD=[],dloadBWIDTH=[],dloadFLIPY=[],dloadMOUNTTYPE=[],dloadFEED=[],dloadDOUBLEFOLD=[],dloadDOUBLEFOLDR=[],dloadN=[],dloadSUPPORTS=[],dsupSymetry=[],dsupBase=[],dloadBOLTS=[],dloadOVERLAP1=[],dloadOVERLAP2=[],dloadSPISPA=[],i=0;i<x.length;i++)dloadSUPPORTS[i]=xmlDoc.getElementsByTagName("support")[i].childNodes[0].nodeValue,dloadSCREENTYPE[i]=parseInt(xmlDoc.getElementsByTagName("screentype")[i].childNodes[0].nodeValue),dloadLS[i]=parseInt(xmlDoc.getElementsByTagName("Ls")[i].childNodes[0].nodeValue),dloadWS[i]=parseInt(xmlDoc.getElementsByTagName("Ws")[i].childNodes[0].nodeValue),dloadPERPAR[i]=parseInt(xmlDoc.getElementsByTagName("PERPAR")[i].childNodes[0].nodeValue),dloadOW[i]=parseFloat(xmlDoc.getElementsByTagName("ow")[i].childNodes[0].nodeValue),dloadOL[i]=parseFloat(xmlDoc.getElementsByTagName("ol")[i].childNodes[0].nodeValue),dloadFI[i]=parseFloat(xmlDoc.getElementsByTagName("fi")[i].childNodes[0].nodeValue),dloadSQUARE[i]=parseInt(xmlDoc.getElementsByTagName("SQROPN")[i].childNodes[0].nodeValue),dloadWIREMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("wiremat")[i].childNodes[0].nodeValue),dloadHOOKSHEETS[i]=parseInt(xmlDoc.getElementsByTagName("hooksheets")[i].childNodes[0].nodeValue),dloadHOOKSMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("hooksmaterial")[i].childNodes[0].nodeValue),dloadHOOKTYPE[i]=parseInt(xmlDoc.getElementsByTagName("hooktype")[i].childNodes[0].nodeValue),dloadHOOKTYPER[i]=parseInt(xmlDoc.getElementsByTagName("hooktypeR")[i].childNodes[0].nodeValue),dloadSTRIPS[i]=parseInt(xmlDoc.getElementsByTagName("strips")[i].childNodes[0].nodeValue),dloadB[i]=parseInt(xmlDoc.getElementsByTagName("B")[i].childNodes[0].nodeValue),dloadBTHREAD[i]=parseInt(xmlDoc.getElementsByTagName("BTHREAD")[i].childNodes[0].nodeValue),dloadBWIDTH[i]=parseInt(xmlDoc.getElementsByTagName("BWIDTH")[i].childNodes[0].nodeValue),dloadFLIPY[i]=parseInt(xmlDoc.getElementsByTagName("flipy")[i].childNodes[0].nodeValue),dloadMOUNTTYPE[i]=parseInt(xmlDoc.getElementsByTagName("mounttype")[i].childNodes[0].nodeValue),dloadFEED[i]=parseInt(xmlDoc.getElementsByTagName("feed")[i].childNodes[0].nodeValue),dloadDOUBLEFOLD[i]=parseInt(xmlDoc.getElementsByTagName("doublefold")[i].childNodes[0].nodeValue),dloadDOUBLEFOLDR[i]=parseInt(xmlDoc.getElementsByTagName("doublefoldR")[i].childNodes[0].nodeValue),dloadN[i]=parseInt(xmlDoc.getElementsByTagName("N")[i].childNodes[0].nodeValue),dsupSymetry[i]=parseInt(xmlDoc.getElementsByTagName("symetry")[i].childNodes[0].nodeValue),dsupBase[i]=parseInt(xmlDoc.getElementsByTagName("basex")[i].childNodes[0].nodeValue),dloadBOLTS[i]=xmlDoc.getElementsByTagName("bolt")[i].childNodes[0].nodeValue,dloadOVERLAP1[i]=parseInt(xmlDoc.getElementsByTagName("overlap1")[i].childNodes[0].nodeValue),dloadOVERLAP2[i]=parseInt(xmlDoc.getElementsByTagName("overlap2")[i].childNodes[0].nodeValue),dloadSPISPA[i]=parseInt(xmlDoc.getElementsByTagName("SPISPA")[i].childNodes[0].nodeValue);for(deckno=[],x=xmlDoc.getElementsByTagName("dex"),i=0;i<x.length;i++)deckno[i]=parseInt(xmlDoc.getElementsByTagName("dex")[i].childNodes[0].nodeValue);decks=parseInt(x.length),reloadScene(0)}},xmlhttp.open("GET","xmlSBOX.php?action=1",!0),xmlhttp.send()}function adddeckSCREENBOX(e){window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){for(xmlDoc=xmlhttp.responseXML,x=xmlDoc.getElementsByTagName("SCREEN"),dloadSCREENTYPE=[],dloadLS=[],dloadWS=[],dloadPERPAR=[],dloadOW=[],dloadOL=[],dloadFI=[],dloadSQUARE=[],dloadWIREMATERIAL=[],dloadHOOKSHEETS=[],dloadHOOKSMATERIAL=[],dloadHOOKTYPE=[],dloadHOOKTYPER=[],dloadSTRIPS=[],dloadB=[],dloadBTHREAD=[],dloadBWIDTH=[],dloadFLIPY=[],dloadMOUNTTYPE=[],dloadFEED=[],dloadDOUBLEFOLD=[],dloadDOUBLEFOLDR=[],dloadN=[],dloadSUPPORTS=[],dsupSymetry=[],dsupBase=[],dloadBOLTS=[],dloadOVERLAP1=[],dloadOVERLAP2=[],dloadSPISPA=[],i=0;i<x.length;i++)dloadSUPPORTS[i]=xmlDoc.getElementsByTagName("support")[i].childNodes[0].nodeValue,dloadSCREENTYPE[i]=parseInt(xmlDoc.getElementsByTagName("screentype")[i].childNodes[0].nodeValue),dloadLS[i]=parseInt(xmlDoc.getElementsByTagName("Ls")[i].childNodes[0].nodeValue),dloadWS[i]=parseInt(xmlDoc.getElementsByTagName("Ws")[i].childNodes[0].nodeValue),dloadPERPAR[i]=parseInt(xmlDoc.getElementsByTagName("PERPAR")[i].childNodes[0].nodeValue),dloadOW[i]=parseFloat(xmlDoc.getElementsByTagName("ow")[i].childNodes[0].nodeValue),dloadOL[i]=parseFloat(xmlDoc.getElementsByTagName("ol")[i].childNodes[0].nodeValue),dloadFI[i]=parseFloat(xmlDoc.getElementsByTagName("fi")[i].childNodes[0].nodeValue),dloadSQUARE[i]=parseInt(xmlDoc.getElementsByTagName("SQROPN")[i].childNodes[0].nodeValue),dloadWIREMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("wiremat")[i].childNodes[0].nodeValue),dloadHOOKSHEETS[i]=parseInt(xmlDoc.getElementsByTagName("hooksheets")[i].childNodes[0].nodeValue),dloadHOOKSMATERIAL[i]=parseInt(xmlDoc.getElementsByTagName("hooksmaterial")[i].childNodes[0].nodeValue),dloadHOOKTYPE[i]=parseInt(xmlDoc.getElementsByTagName("hooktype")[i].childNodes[0].nodeValue),dloadHOOKTYPER[i]=parseInt(xmlDoc.getElementsByTagName("hooktypeR")[i].childNodes[0].nodeValue),dloadSTRIPS[i]=parseInt(xmlDoc.getElementsByTagName("strips")[i].childNodes[0].nodeValue),dloadB[i]=parseInt(xmlDoc.getElementsByTagName("B")[i].childNodes[0].nodeValue),dloadBTHREAD[i]=parseInt(xmlDoc.getElementsByTagName("BTHREAD")[i].childNodes[0].nodeValue),dloadBWIDTH[i]=parseInt(xmlDoc.getElementsByTagName("BWIDTH")[i].childNodes[0].nodeValue),dloadFLIPY[i]=parseInt(xmlDoc.getElementsByTagName("flipy")[i].childNodes[0].nodeValue),dloadMOUNTTYPE[i]=parseInt(xmlDoc.getElementsByTagName("mounttype")[i].childNodes[0].nodeValue),dloadFEED[i]=parseInt(xmlDoc.getElementsByTagName("feed")[i].childNodes[0].nodeValue),dloadDOUBLEFOLD[i]=parseInt(xmlDoc.getElementsByTagName("doublefold")[i].childNodes[0].nodeValue),dloadDOUBLEFOLDR[i]=parseInt(xmlDoc.getElementsByTagName("doublefoldR")[i].childNodes[0].nodeValue),dloadN[i]=parseInt(xmlDoc.getElementsByTagName("N")[i].childNodes[0].nodeValue),dsupSymetry[i]=parseInt(xmlDoc.getElementsByTagName("symetry")[i].childNodes[0].nodeValue),dsupBase[i]=parseInt(xmlDoc.getElementsByTagName("basex")[i].childNodes[0].nodeValue),dloadBOLTS[i]=xmlDoc.getElementsByTagName("bolt")[i].childNodes[0].nodeValue,dloadOVERLAP1[i]=parseInt(xmlDoc.getElementsByTagName("overlap1")[i].childNodes[0].nodeValue),dloadOVERLAP2[i]=parseInt(xmlDoc.getElementsByTagName("overlap2")[i].childNodes[0].nodeValue),dloadSPISPA[i]=parseInt(xmlDoc.getElementsByTagName("SPISPA")[i].childNodes[0].nodeValue);for(deckno=[],x=xmlDoc.getElementsByTagName("dex"),i=0;i<x.length;i++)deckno[i]=parseInt(xmlDoc.getElementsByTagName("dex")[i].childNodes[0].nodeValue);decks=parseInt(x.length),reloadScene(0)}},xmlhttp.open("GET","xmlSBOX.php?action=3",!0),xmlhttp.send()}0==productSheets?0==machineSelect?(onWindowResize(1),materialLoad(drawingMode,0),loadData(),dataCheck(),screenData(),init(),prepareSamples(),screenMesh(),loader.style.zIndex=0,loader.style.display="none",lightSettle(),render(),animate(),0==createNewBox&&rememberScreen()):(onWindowResize(1),materialLoad(drawingMode,0),loadData(),loadSCREENTYPE=0,loadHOOKSHEETS=0,loadDOUBLEFOLD=0,loadDOUBLEFOLDR=0,loadOVERLAP1=0,loadOVERLAP2=0,dataCheck(),screenData(),init(),prepareSamples(),screenMeshTemplate(1),screenMeshTemplate(2),screenMeshTemplate(3),screenMeshTemplate(4),screenMeshTemplate(0),screenMeshTemplate(-1),screenMeshTemplate(-2),screenMeshTemplate(-3),loader.style.zIndex=0,loader.style.display="none",lightSettle(),render(),animate(),rememberScreen()):(onWindowResize(1),materialLoad(drawingMode,0),loadData(),dataCheck(),screenData(),init(),screenMesh(),render(),animate(),shootCount=dloadLS.length,makeShoot=!0),document.addEventListener("mousemove",onDocumentMouseOver,!1),document.addEventListener("mousedown",onDocumentMouseDown,!1),document.addEventListener("mouseup",onDocumentMouseUp,!1);
